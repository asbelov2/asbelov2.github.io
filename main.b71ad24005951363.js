(self.webpackChunktest_app=self.webpackChunktest_app||[]).push([[179],{754:(Gr,ls,he)=>{"use strict";function at(e){return"function"==typeof e}function Yn(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const me=Yn(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function mt(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class kt{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(at(r))try{r()}catch(o){n=o instanceof me?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{ki(o)}catch(a){n=n??[],a instanceof me?n=[...n,...a.errors]:n.push(a)}}if(n)throw new me(n)}}add(n){var t;if(n&&n!==this)if(this.closed)ki(n);else{if(n instanceof kt){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&mt(t,n)}remove(n){const{_finalizers:t}=this;t&&mt(t,n),n instanceof kt&&n._removeParent(this)}}kt.EMPTY=(()=>{const e=new kt;return e.closed=!0,e})();const Bn=kt.EMPTY;function Mr(e){return e instanceof kt||e&&"closed"in e&&at(e.remove)&&at(e.add)&&at(e.unsubscribe)}function ki(e){at(e)?e():e.unsubscribe()}const Dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Li={setTimeout(e,n,...t){const{delegate:r}=Li;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Li;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function wr(e){Li.setTimeout(()=>{const{onUnhandledError:n}=Dt;if(!n)throw e;n(e)})}function K(){}const We=cs("C",void 0,void 0);function cs(e,n,t){return{kind:e,value:n,error:t}}let Cn=null;function Wr(e){if(Dt.useDeprecatedSynchronousErrorHandling){const n=!Cn;if(n&&(Cn={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=Cn;if(Cn=null,t)throw r}}else e()}class br extends kt{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Mr(n)&&n.add(this)):this.destination=js}static create(n,t,r){return new sr(n,t,r)}next(n){this.isStopped?fs(function Hs(e){return cs("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?fs(function Vi(e){return cs("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?fs(We,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Dn=Function.prototype.bind;function In(e,n){return Dn.call(e,n)}class ds{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){or(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){or(r)}else or(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){or(t)}}}class sr extends br{constructor(n,t,r){let i;if(super(),at(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Dt.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&In(n.next,o),error:n.error&&In(n.error,o),complete:n.complete&&In(n.complete,o)}):i=n}this.destination=new ds(i)}}function or(e){Dt.useDeprecatedSynchronousErrorHandling?function Bi(e){Dt.useDeprecatedSynchronousErrorHandling&&Cn&&(Cn.errorThrown=!0,Cn.error=e)}(e):wr(e)}function fs(e,n){const{onStoppedNotification:t}=Dt;t&&Li.setTimeout(()=>t(e,n))}const js={closed:!0,next:K,error:function ar(e){throw e},complete:K},hi="function"==typeof Symbol&&Symbol.observable||"@@observable";function ie(e){return e}function ee(e){return 0===e.length?ie:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let G=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function pe(e){return e&&e instanceof br||function ue(e){return e&&at(e.next)&&at(e.error)&&at(e.complete)}(e)&&Mr(e)}(t)?t:new sr(t,r,i);return Wr(()=>{const{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=W(r))((i,o)=>{const a=new sr({next:c=>{try{t(c)}catch(f){o(f),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[hi](){return this}pipe(...t){return ee(t)(this)}toPromise(t){return new(t=W(t))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=n=>new e(n),e})();function W(e){var n;return null!==(n=e??Dt.Promise)&&void 0!==n?n:Promise}const Ye=Yn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let we=(()=>{class e extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Qe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ye}next(t){Wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Bn:(this.currentObservers=null,o.push(t),new kt(()=>{this.currentObservers=null,mt(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new G;return t.source=this,t}}return e.create=(n,t)=>new Qe(n,t),e})();class Qe extends we{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:Bn}}function ft(e){return at(e?.lift)}function Ue(e){return n=>{if(ft(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(e,n,t,r,i){return new pi(e,n,t,r,i)}class pi extends br{constructor(n,t,r,i,o,a){super(n),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(f){n.error(f)}}:super._next,this._error=i?function(c){try{i(c)}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Fe(e,n){return Ue((t,r)=>{let i=0;t.subscribe(nt(r,o=>{r.next(e.call(n,o,i++))}))})}function gi(e){return this instanceof gi?(this.v=e,this):new gi(e)}function yd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function Ou(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(a){return new Promise(function(c,f){!function i(o,a,c,f){Promise.resolve(f).then(function(y){o({value:y,done:c})},a)}(c,f,(a=e[o](a)).done,a.value)})}}}const Us=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ku(e){return at(e?.then)}function Go(e){return at(e[hi])}function Lu(e){return Symbol.asyncIterator&&at(e?.[Symbol.asyncIterator])}function Wo(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vu=function wd(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Bu(e){return at(e?.[Vu])}function Hu(e){return function vd(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(N){r[N]&&(i[N]=function(L){return new Promise(function(U,Z){o.push([N,L,U,Z])>1||c(N,L)})})}function c(N,L){try{!function f(N){N.value instanceof gi?Promise.resolve(N.value.v).then(y,E):F(o[0][2],N)}(r[N](L))}catch(U){F(o[0][3],U)}}function y(N){c("next",N)}function E(N){c("throw",N)}function F(N,L){N(L),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield gi(t.read());if(i)return yield gi(void 0);yield yield gi(r)}}finally{t.releaseLock()}})}function ju(e){return at(e?.getReader)}function gn(e){if(e instanceof G)return e;if(null!=e){if(Go(e))return function bd(e){return new G(n=>{const t=e[hi]();if(at(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Us(e))return function Sd(e){return new G(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(ku(e))return function Ed(e){return new G(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,wr)})}(e);if(Lu(e))return Uu(e);if(Bu(e))return function Cd(e){return new G(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(ju(e))return function Dd(e){return Uu(Hu(e))}(e)}throw Wo(e)}function Uu(e){return new G(n=>{(function _d(e,n){var t,r,i,o;return function gd(e,n,t,r){return new(t||(t=Promise))(function(o,a){function c(E){try{y(r.next(E))}catch(F){a(F)}}function f(E){try{y(r.throw(E))}catch(F){a(F)}}function y(E){E.done?o(E.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(E.value).then(c,f)}y((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=yd(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Sr(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Jt(e,n,t=1/0){return at(n)?Jt((r,i)=>Fe((o,a)=>n(r,o,i,a))(gn(e(r,i))),t):("number"==typeof n&&(t=n),Ue((r,i)=>function Ad(e,n,t,r,i,o,a,c){const f=[];let y=0,E=0,F=!1;const N=()=>{F&&!f.length&&!y&&n.complete()},L=Z=>y<r?U(Z):f.push(Z),U=Z=>{o&&n.next(Z),y++;let re=!1;gn(t(Z,E++)).subscribe(nt(n,oe=>{i?.(oe),o?L(oe):n.next(oe)},()=>{re=!0},void 0,()=>{if(re)try{for(y--;f.length&&y<r;){const oe=f.shift();a?Sr(n,a,()=>U(oe)):U(oe)}N()}catch(oe){n.error(oe)}}))};return e.subscribe(nt(n,L,()=>{F=!0,N()})),()=>{c?.()}}(r,i,e,t)))}function ji(e=1/0){return Jt(ie,e)}const Er=new G(e=>e.complete());function $u(e){return e&&at(e.schedule)}function Jo(e){return e[e.length-1]}function qu(e){return at(Jo(e))?e.pop():void 0}function Pr(e){return $u(Jo(e))?e.pop():void 0}function Ku(e,n=0){return Ue((t,r)=>{t.subscribe(nt(r,i=>Sr(r,e,()=>r.next(i),n),()=>Sr(r,e,()=>r.complete(),n),i=>Sr(r,e,()=>r.error(i),n)))})}function Gu(e,n=0){return Ue((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Wu(e,n){if(!e)throw new Error("Iterable cannot be null");return new G(t=>{Sr(t,n,()=>{const r=e[Symbol.asyncIterator]();Sr(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ht(e,n){return n?function Pd(e,n){if(null!=e){if(Go(e))return function Fd(e,n){return gn(e).pipe(Gu(n),Ku(n))}(e,n);if(Us(e))return function Rd(e,n){return new G(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(ku(e))return function Td(e,n){return gn(e).pipe(Gu(n),Ku(n))}(e,n);if(Lu(e))return Wu(e,n);if(Bu(e))return function Ui(e,n){return new G(t=>{let r;return Sr(t,n,()=>{r=e[Vu](),Sr(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>at(r?.return)&&r.return()})}(e,n);if(ju(e))return function Md(e,n){return Wu(Hu(e),n)}(e,n)}throw Wo(e)}(e,n):gn(e)}function Ju(...e){const n=Pr(e),t=function zu(e,n){return"number"==typeof Jo(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?gn(r[0]):ji(t)(Ht(r,n)):Er}function Xo(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new sr({next:()=>{r.unsubscribe(),e()}});return gn(n(...t)).subscribe(r)}function wt(e){for(let n in e)if(e[n]===wt)return n;throw Error("Could not find renamed property on target object.")}function Yo(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Ke(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ke).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function Zo(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Od=wt({__forward_ref__:wt});function _t(e){return e.__forward_ref__=_t,e.toString=function(){return Ke(this())},e}function Re(e){return Qo(e)?e():e}function Qo(e){return"function"==typeof e&&e.hasOwnProperty(Od)&&e.__forward_ref__===_t}function ea(e){return e&&!!e.\u0275providers}const $s="https://g.co/ng/security#xss";class fe extends Error{constructor(n,t){super(mn(n,t)),this.code=n}}function mn(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}function De(e){return"string"==typeof e?e:null==e?"":String(e)}function hs(e,n){throw new fe(-201,!1)}function Zn(e,n){null==e&&function pt(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function Ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Hn(e){return{providers:e.providers||[],imports:e.imports||[]}}function qs(e){return Yu(e,zs)||Yu(e,Qu)}function Yu(e,n){return e.hasOwnProperty(n)?e[n]:null}function Zu(e){return e&&(e.hasOwnProperty(na)||e.hasOwnProperty($d))?e[na]:null}const zs=wt({\u0275prov:wt}),na=wt({\u0275inj:wt}),Qu=wt({ngInjectableDef:wt}),$d=wt({ngInjectorDef:wt});var Oe=(()=>((Oe=Oe||{})[Oe.Default=0]="Default",Oe[Oe.Host=1]="Host",Oe[Oe.Self=2]="Self",Oe[Oe.SkipSelf=4]="SkipSelf",Oe[Oe.Optional=8]="Optional",Oe))();let ra;function Qn(e){const n=ra;return ra=e,n}function el(e,n,t){const r=qs(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Oe.Optional?null:void 0!==n?n:void hs(Ke(e))}const Ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ps={},ia="__NG_DI_FLAG__",er="ngTempTokenPath",qd="ngTokenPath",zd=/\n/gm,Kd="\u0275",tl="__source";let gs;function $i(e){const n=gs;return gs=e,n}function Gd(e,n=Oe.Default){if(void 0===gs)throw new fe(-203,!1);return null===gs?el(e,void 0,n):gs.get(e,n&Oe.Optional?null:void 0,n)}function ge(e,n=Oe.Default){return(function ct(){return ra}()||Gd)(Re(e),n)}function h(e,n=Oe.Default){return ge(e,sa(n))}function sa(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ks(e){const n=[];for(let t=0;t<e.length;t++){const r=Re(e[t]);if(Array.isArray(r)){if(0===r.length)throw new fe(900,!1);let i,o=Oe.Default;for(let a=0;a<r.length;a++){const c=r[a],f=Gs(c);"number"==typeof f?-1===f?i=c.token:o|=f:i=c}n.push(ge(i,o))}else n.push(ge(r))}return n}function qi(e,n){return e[ia]=n,e.prototype[ia]=n,e}function Gs(e){return e[ia]}function Jr(e){return{toString:e}.toString()}var ur=(()=>((ur=ur||{})[ur.OnPush=0]="OnPush",ur[ur.Default=1]="Default",ur))(),vt=(()=>{return(e=vt||(vt={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",vt;var e})();const ut={},rt=[],Rn=wt({\u0275cmp:wt}),oa=wt({\u0275dir:wt}),aa=wt({\u0275pipe:wt}),zi=wt({\u0275mod:wt}),Xe=wt({\u0275fac:wt}),vs=wt({__NG_ELEMENT_ID__:wt});let _0=0;function lr(e){return Jr(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ur.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||rt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||vt.Emulated,id:"c"+_0++,styles:e.styles||rt,_:null,setInput:null,schemas:e.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=e.dependencies,a=e.features;return i.inputs=ua(e.inputs,r),i.outputs=ua(e.outputs),a&&a.forEach(c=>c(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(an).filter(jn):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(un).filter(jn):null,i})}function an(e){return gt(e)||vn(e)}function jn(e){return null!==e}function Un(e){return Jr(()=>({type:e.type,bootstrap:e.bootstrap||rt,declarations:e.declarations||rt,imports:e.imports||rt,exports:e.exports||rt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ua(e,n){if(null==e)return ut;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const be=lr;function gt(e){return e[Rn]||null}function vn(e){return e[oa]||null}function un(e){return e[aa]||null}function $n(e,n){const t=e[zi]||null;if(!t&&!0===n)throw new Error(`Type ${Ke(e)} does not have '\u0275mod' property.`);return t}const Nr=0,ye=1,je=2,Rt=3,qn=4,Dr=5,ln=6,Xr=7,Vt=8,Ki=9,yi=10,Ge=11,la=12,Gi=13,Js=14,Yr=15,yn=16,ys=17,xi=18,zn=19,Zr=20,ca=21,At=22,da=1,xs=2,ne=7,et=8,ws=9,Mn=10;function Pn(e){return Array.isArray(e)&&"object"==typeof e[da]}function cr(e){return Array.isArray(e)&&!0===e[da]}function rl(e){return 0!=(4&e.flags)}function Wi(e){return e.componentOffset>-1}function Pe(e){return 1==(1&e.flags)}function dr(e){return null!==e.template}function s(e){return 0!=(256&e[je])}function k(e,n){return e.hasOwnProperty(Xe)?e[Xe]:null}class X{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Y(){return R}function R(e){return e.type.prototype.ngOnChanges&&(e.setInput=B),P}function P(){const e=$(this),n=e?.current;if(n){const t=e.previous;if(t===ut)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function B(e,n,t,r){const i=this.declaredInputs[t],o=$(e)||function J(e,n){return e[H]=n}(e,{previous:ut,current:null}),a=o.current||(o.current={}),c=o.previous,f=c[i];a[i]=new X(f&&f.currentValue,n,c===ut),e[r]=n}Y.ngInherit=!0;const H="__ngSimpleChanges__";function $(e){return e[H]||null}const q=function(e,n,t){};function ve(e){for(;Array.isArray(e);)e=e[Nr];return e}function $e(e,n){return ve(n[e])}function Me(e,n){return ve(n[e.index])}function dt(e,n){return e.data[n]}function Tt(e,n){const t=n[e];return Pn(t)?t:t[Nr]}function tn(e){return 64==(64&e[je])}function Ze(e,n){return null==n?null:e[n]}function Ut(e){e[xi]=0}function It(e,n){e[Dr]+=n;let t=e,r=e[Rt];for(;null!==r&&(1===n&&1===t[Dr]||-1===n&&0===t[Dr]);)r[Dr]+=n,t=r,r=r[Rt]}const Se={lFrame:P0(null),bindingsEnabled:!0};function il(){return Se.bindingsEnabled}function le(){return Se.lFrame.lView}function st(){return Se.lFrame.tView}function St(e){return Se.lFrame.contextLView=e,e[Vt]}function tr(e){return Se.lFrame.contextLView=null,e}function Be(){let e=Or();for(;null!==e&&64===e.type;)e=e.parent;return e}function Or(){return Se.lFrame.currentTNode}function ei(e,n){const t=Se.lFrame;t.currentTNode=e,t.isParent=n}function Zd(){return Se.lFrame.isParent}function Qd(){Se.lFrame.isParent=!1}function Xs(){return Se.lFrame.bindingIndex++}function NE(e,n){const t=Se.lFrame;t.bindingIndex=t.bindingRootIndex=e,ef(n)}function ef(e){Se.lFrame.currentDirectiveIndex=e}function nf(e){Se.lFrame.currentQueryIndex=e}function kE(e){const n=e[ye];return 2===n.type?n.declTNode:1===n.type?e[ln]:null}function R0(e,n,t){if(t&Oe.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&Oe.Host||(i=kE(o),null===i||(o=o[Yr],10&i.type))););if(null===i)return!1;n=i,e=o}const r=Se.lFrame=M0();return r.currentTNode=n,r.lView=e,!0}function rf(e){const n=M0(),t=e[ye];Se.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function M0(){const e=Se.lFrame,n=null===e?null:e.child;return null===n?P0(e):n}function P0(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function N0(){const e=Se.lFrame;return Se.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const O0=N0;function sf(){const e=N0();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Gn(){return Se.lFrame.selectedIndex}function Ss(e){Se.lFrame.selectedIndex=e}function $t(){const e=Se.lFrame;return dt(e.tView,e.selectedIndex)}function sl(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:f,ngAfterViewChecked:y,ngOnDestroy:E}=o;a&&(e.contentHooks||(e.contentHooks=[])).push(-t,a),c&&((e.contentHooks||(e.contentHooks=[])).push(t,c),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,c)),f&&(e.viewHooks||(e.viewHooks=[])).push(-t,f),y&&((e.viewHooks||(e.viewHooks=[])).push(t,y),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,y)),null!=E&&(e.destroyHooks||(e.destroyHooks=[])).push(t,E)}}function ol(e,n,t){k0(e,n,3,t)}function al(e,n,t,r){(3&e[je])===t&&k0(e,n,t,r)}function af(e,n){let t=e[je];(3&t)===n&&(t&=2047,t+=1,e[je]=t)}function k0(e,n,t,r){const o=r??-1,a=n.length-1;let c=0;for(let f=void 0!==r?65535&e[xi]:0;f<a;f++)if("number"==typeof n[f+1]){if(c=n[f],null!=r&&c>=r)break}else n[f]<0&&(e[xi]+=65536),(c<o||-1==o)&&(zE(e,t,n,f),e[xi]=(4294901760&e[xi])+f+2),f++}function zE(e,n,t,r){const i=t[r]<0,o=t[r+1],c=e[i?-t[r]:t[r]];if(i){if(e[je]>>11<e[xi]>>16&&(3&e[je])===n){e[je]+=2048,q(4,c,o);try{o.call(c)}finally{q(5,c,o)}}}else{q(4,c,o);try{o.call(c)}finally{q(5,c,o)}}}const Ys=-1;class ha{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function lf(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],a=t[r++],c=t[r++];e.setAttribute(n,a,c,o)}else{const o=i,a=t[++r];V0(o)?e.setProperty(n,o,a):e.setAttribute(n,o,a),r++}}return r}function L0(e){return 3===e||4===e||6===e}function V0(e){return 64===e.charCodeAt(0)}function pa(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||B0(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function B0(e,n,t,r,i){let o=0,a=e.length;if(-1===n)a=-1;else for(;o<e.length;){const c=e[o++];if("number"==typeof c){if(c===n){a=-1;break}if(c>n){a=o-1;break}}}for(;o<e.length;){const c=e[o];if("number"==typeof c)break;if(c===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,n),o=a+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function H0(e){return e!==Ys}function ul(e){return 32767&e}function ll(e,n){let t=function JE(e){return e>>16}(e),r=n;for(;t>0;)r=r[Yr],t--;return r}let cf=!0;function cl(e){const n=cf;return cf=e,n}const j0=255,U0=5;let XE=0;const ti={};function dl(e,n){const t=$0(e,n);if(-1!==t)return t;const r=n[ye];r.firstCreatePass&&(e.injectorIndex=n.length,df(r.data,e),df(n,null),df(r.blueprint,null));const i=ff(e,n),o=e.injectorIndex;if(H0(i)){const a=ul(i),c=ll(i,n),f=c[ye].data;for(let y=0;y<8;y++)n[o+y]=c[a+y]|f[a+y]}return n[o+8]=i,o}function df(e,n){e.push(0,0,0,0,0,0,0,0,n)}function $0(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function ff(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=X0(i),null===r)return Ys;if(t++,i=i[Yr],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ys}function hf(e,n,t){!function YE(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(vs)&&(r=t[vs]),null==r&&(r=t[vs]=XE++);const i=r&j0;n.data[e+(i>>U0)]|=1<<i}(e,n,t)}function q0(e,n,t){if(t&Oe.Optional||void 0!==e)return e;hs()}function z0(e,n,t,r){if(t&Oe.Optional&&void 0===r&&(r=null),!(t&(Oe.Self|Oe.Host))){const i=e[Ki],o=Qn(void 0);try{return i?i.get(n,r,t&Oe.Optional):el(n,r,t&Oe.Optional)}finally{Qn(o)}}return q0(r,0,t)}function K0(e,n,t,r=Oe.Default,i){if(null!==e){if(1024&n[je]){const a=function n2(e,n,t,r,i){let o=e,a=n;for(;null!==o&&null!==a&&1024&a[je]&&!(256&a[je]);){const c=G0(o,a,t,r|Oe.Self,ti);if(c!==ti)return c;let f=o.parent;if(!f){const y=a[ca];if(y){const E=y.get(t,ti,r);if(E!==ti)return E}f=X0(a),a=a[Yr]}o=f}return i}(e,n,t,r,ti);if(a!==ti)return a}const o=G0(e,n,t,r,ti);if(o!==ti)return o}return z0(n,t,r,i)}function G0(e,n,t,r,i){const o=function e2(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(vs)?e[vs]:void 0;return"number"==typeof n?n>=0?n&j0:t2:n}(t);if("function"==typeof o){if(!R0(n,e,r))return r&Oe.Host?q0(i,0,r):z0(n,t,r,i);try{const a=o(r);if(null!=a||r&Oe.Optional)return a;hs()}finally{O0()}}else if("number"==typeof o){let a=null,c=$0(e,n),f=Ys,y=r&Oe.Host?n[yn][ln]:null;for((-1===c||r&Oe.SkipSelf)&&(f=-1===c?ff(e,n):n[c+8],f!==Ys&&J0(r,!1)?(a=n[ye],c=ul(f),n=ll(f,n)):c=-1);-1!==c;){const E=n[ye];if(W0(o,c,E.data)){const F=QE(c,n,t,a,r,y);if(F!==ti)return F}f=n[c+8],f!==Ys&&J0(r,n[ye].data[c+8]===y)&&W0(o,c,n)?(a=E,c=ul(f),n=ll(f,n)):c=-1}}return i}function QE(e,n,t,r,i,o){const a=n[ye],c=a.data[e+8],E=function fl(e,n,t,r,i){const o=e.providerIndexes,a=n.data,c=1048575&o,f=e.directiveStart,E=o>>20,N=i?c+E:e.directiveEnd;for(let L=r?c:c+E;L<N;L++){const U=a[L];if(L<f&&t===U||L>=f&&U.type===t)return L}if(i){const L=a[f];if(L&&dr(L)&&L.type===t)return f}return null}(c,a,t,null==r?Wi(c)&&cf:r!=a&&0!=(3&c.type),i&Oe.Host&&o===c);return null!==E?Es(n,a,E,c):ti}function Es(e,n,t,r){let i=e[t];const o=n.data;if(function KE(e){return e instanceof ha}(i)){const a=i;a.resolving&&function ta(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new fe(-200,`Circular dependency in DI detected for ${e}${t}`)}(function ht(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():De(e)}(o[t]));const c=cl(a.canSeeViewProviders);a.resolving=!0;const f=a.injectImpl?Qn(a.injectImpl):null;R0(e,r,Oe.Default);try{i=e[t]=a.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function qE(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const a=R(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==f&&Qn(f),cl(c),a.resolving=!1,O0()}}return i}function W0(e,n,t){return!!(t[n+(e>>U0)]&1<<e)}function J0(e,n){return!(e&Oe.Self||e&Oe.Host&&n)}class Zs{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return K0(this._tNode,this._lView,n,sa(r),t)}}function t2(){return new Zs(Be(),le())}function bn(e){return Jr(()=>{const n=e.prototype.constructor,t=n[Xe]||pf(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[Xe]||pf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function pf(e){return Qo(e)?()=>{const n=pf(Re(e));return n&&n()}:k(e)}function X0(e){const n=e[ye],t=n.type;return 2===t?n.declTNode:1===t?e[ln]:null}const eo="__parameters__";function no(e,n,t){return Jr(()=>{const r=function gf(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return c.annotation=a,c;function c(f,y,E){const F=f.hasOwnProperty(eo)?f[eo]:Object.defineProperty(f,eo,{value:[]})[eo];for(;F.length<=E;)F.push(null);return(F[E]=F[E]||[]).push(a),f}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class _e{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cs(e,n){e.forEach(t=>Array.isArray(t)?Cs(t,n):n(t))}function Z0(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function pl(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function fr(e,n,t){let r=ro(e,n);return r>=0?e[1|r]=t:(r=~r,function o2(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function vf(e,n){const t=ro(e,n);if(t>=0)return e[1|t]}function ro(e,n){return function Q0(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),a=e[o<<t];if(n===a)return o<<t;a>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const ya=qi(no("Optional"),8),xa=qi(no("SkipSelf"),4);var nr=(()=>((nr=nr||{})[nr.Important=1]="Important",nr[nr.DashCase=2]="DashCase",nr))();const Ef=new Map;let I2=0;const Df="__ngContext__";function kn(e,n){Pn(n)?(e[Df]=n[Zr],function T2(e){Ef.set(e[Zr],e)}(n)):e[Df]=n}let _f;function Af(e,n){return _f(e,n)}function Ea(e){const n=e[Rt];return cr(n)?n[Rt]:n}function If(e){return xm(e[Gi])}function Ff(e){return xm(e[qn])}function xm(e){for(;null!==e&&!cr(e);)e=e[qn];return e}function so(e,n,t,r,i){if(null!=r){let o,a=!1;cr(r)?o=r:Pn(r)&&(a=!0,r=r[Nr]);const c=ve(r);0===e&&null!==t?null==i?Dm(n,t,c):Ds(n,t,c,i||null,!0):1===e&&null!==t?Ds(n,t,c,i||null,!0):2===e?function kf(e,n,t){const r=yl(e,n);r&&function X2(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,c,a):3===e&&n.destroyNode(c),null!=o&&function Q2(e,n,t,r,i){const o=t[ne];o!==ve(t)&&so(n,e,r,o,i);for(let c=Mn;c<t.length;c++){const f=t[c];Ca(f[ye],f,e,n,r,o)}}(n,e,o,t,i)}}function Rf(e,n,t){return e.createElement(n,t)}function bm(e,n){const t=e[ws],r=t.indexOf(n),i=n[Rt];512&n[je]&&(n[je]&=-513,It(i,-1)),t.splice(r,1)}function Mf(e,n){if(e.length<=Mn)return;const t=Mn+n,r=e[t];if(r){const i=r[ys];null!==i&&i!==e&&bm(i,r),n>0&&(e[t-1][qn]=r[qn]);const o=pl(e,Mn+n);!function U2(e,n){Ca(e,n,n[Ge],2,null,null),n[Nr]=null,n[ln]=null}(r[ye],r);const a=o[zn];null!==a&&a.detachView(o[ye]),r[Rt]=null,r[qn]=null,r[je]&=-65}return r}function Sm(e,n){if(!(128&n[je])){const t=n[Ge];t.destroyNode&&Ca(e,n,t,3,null,null),function z2(e){let n=e[Gi];if(!n)return Pf(e[ye],e);for(;n;){let t=null;if(Pn(n))t=n[Gi];else{const r=n[Mn];r&&(t=r)}if(!t){for(;n&&!n[qn]&&n!==e;)Pn(n)&&Pf(n[ye],n),n=n[Rt];null===n&&(n=e),Pn(n)&&Pf(n[ye],n),t=n&&n[qn]}n=t}}(n)}}function Pf(e,n){if(!(128&n[je])){n[je]&=-65,n[je]|=128,function J2(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof ha)){const o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const c=i[o[a]],f=o[a+1];q(4,c,f);try{f.call(c)}finally{q(5,c,f)}}else{q(4,i,o);try{o.call(i)}finally{q(5,i,o)}}}}}(e,n),function W2(e,n){const t=e.cleanup,r=n[Xr];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),o+=2}else{const a=r[i=t[o+1]];t[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();n[Xr]=null}}(e,n),1===n[ye].type&&n[Ge].destroy();const t=n[ys];if(null!==t&&cr(n[Rt])){t!==n[Rt]&&bm(t,n);const r=n[zn];null!==r&&r.detachView(e)}!function R2(e){Ef.delete(e[Zr])}(n)}}function Em(e,n,t){return function Cm(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[Nr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===vt.None||o===vt.Emulated)return null}return Me(r,t)}}(e,n.parent,t)}function Ds(e,n,t,r,i){e.insertBefore(n,t,r,i)}function Dm(e,n,t){e.appendChild(n,t)}function _m(e,n,t,r,i){null!==r?Ds(e,n,t,r,i):Dm(e,n,t)}function yl(e,n){return e.parentNode(n)}let Nf,Bf,Sl,Fm=function Im(e,n,t){return 40&e.type?Me(e,t):null};function xl(e,n,t,r){const i=Em(e,r,n),o=n[Ge],c=function Am(e,n,t){return Fm(e,n,t)}(r.parent||n[ln],r,n);if(null!=i)if(Array.isArray(t))for(let f=0;f<t.length;f++)_m(o,i,t[f],c,!1);else _m(o,i,t,c,!1);void 0!==Nf&&Nf(o,r,n,t,i)}function wl(e,n){if(null!==n){const t=n.type;if(3&t)return Me(n,e);if(4&t)return Of(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return wl(e,r);{const i=e[n.index];return cr(i)?Of(-1,i):ve(i)}}if(32&t)return Af(n,e)()||ve(e[n.index]);{const r=Rm(e,n);return null!==r?Array.isArray(r)?r[0]:wl(Ea(e[yn]),r):wl(e,n.next)}}return null}function Rm(e,n){return null!==n?e[yn][ln].projection[n.projection]:null}function Of(e,n){const t=Mn+e+1;if(t<n.length){const r=n[t],i=r[ye].firstChild;if(null!==i)return wl(r,i)}return n[ne]}function Lf(e,n,t,r,i,o,a){for(;null!=t;){const c=r[t.index],f=t.type;if(a&&0===n&&(c&&kn(ve(c),r),t.flags|=2),32!=(32&t.flags))if(8&f)Lf(e,n,t.child,r,i,o,!1),so(n,e,i,c,o);else if(32&f){const y=Af(t,r);let E;for(;E=y();)so(n,e,i,E,o);so(n,e,i,c,o)}else 16&f?Mm(e,n,r,t,i,o):so(n,e,i,c,o);t=a?t.projectionNext:t.next}}function Ca(e,n,t,r,i,o){Lf(t,r,e.firstChild,n,i,o,!1)}function Mm(e,n,t,r,i,o){const a=t[yn],f=a[ln].projection[r.projection];if(Array.isArray(f))for(let y=0;y<f.length;y++)so(n,e,i,f[y],o);else Lf(e,n,f,a[Rt],i,o,!0)}function Pm(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function Nm(e,n,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&lf(e,n,r),null!==i&&Pm(e,n,i),null!==o&&function tC(e,n,t){e.setAttribute(n,"style",t)}(e,n,o)}function Vm(e){return function Hf(){if(void 0===Sl&&(Sl=null,Ft.trustedTypes))try{Sl=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Sl}()?.createScriptURL(e)||e}class Bm{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$s})`}}function Ji(e){return e instanceof Bm?e.changingThisBreaksApplicationSecurity:e}function Da(e,n){const t=function dC(e){return e instanceof Bm&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${$s})`)}return t===n}const gC=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var nn=(()=>((nn=nn||{})[nn.NONE=0]="NONE",nn[nn.HTML=1]="HTML",nn[nn.STYLE=2]="STYLE",nn[nn.SCRIPT=3]="SCRIPT",nn[nn.URL=4]="URL",nn[nn.RESOURCE_URL=5]="RESOURCE_URL",nn))();function zf(e){const n=Aa();return n?n.sanitize(nn.URL,e)||"":Da(e,"URL")?Ji(e):function jf(e){return(e=String(e)).match(gC)?e:"unsafe:"+e}(De(e))}function Km(e){const n=Aa();if(n)return Vm(n.sanitize(nn.RESOURCE_URL,e)||"");if(Da(e,"ResourceURL"))return Vm(Ji(e));throw new fe(904,!1)}function Aa(){const e=le();return e&&e[la]}const Cl=new _e("ENVIRONMENT_INITIALIZER"),Wm=new _e("INJECTOR",-1),Jm=new _e("INJECTOR_DEF_TYPES");class Xm{get(n,t=ps){if(t===ps){const r=new Error(`NullInjectorError: No provider for ${Ke(n)}!`);throw r.name="NullInjectorError",r}return t}}function Ym(e){return{\u0275providers:e}}function IC(...e){return{\u0275providers:Zm(0,e),\u0275fromNgModule:!0}}function Zm(e,...n){const t=[],r=new Set;let i;return Cs(n,o=>{const a=o;Kf(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Qm(i,t),t}function Qm(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];Gf(i,o=>{n.push(o)})}}function Kf(e,n,t,r){if(!(e=Re(e)))return!1;let i=null,o=Zu(e);const a=!o&&gt(e);if(o||a){if(a&&!a.standalone)return!1;i=e}else{const f=e.ngModule;if(o=Zu(f),!o)return!1;i=f}const c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){const f="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const y of f)Kf(y,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!c){let y;r.add(i);try{Cs(o.imports,E=>{Kf(E,n,t,r)&&(y||(y=[]),y.push(E))})}finally{}void 0!==y&&Qm(y,n)}if(!c){const y=k(i)||(()=>new i);n.push({provide:i,useFactory:y,deps:rt},{provide:Jm,useValue:i,multi:!0},{provide:Cl,useValue:()=>ge(i),multi:!0})}const f=o.providers;null==f||c||Gf(f,E=>{n.push(E)})}}return i!==e&&void 0!==e.providers}function Gf(e,n){for(let t of e)ea(t)&&(t=t.\u0275providers),Array.isArray(t)?Gf(t,n):n(t)}const FC=wt({provide:String,useValue:wt});function Wf(e){return null!==e&&"object"==typeof e&&FC in e}function _s(e){return"function"==typeof e}const Jf=new _e("Set Injector scope."),Dl={},RC={};let Xf;function _l(){return void 0===Xf&&(Xf=new Xm),Xf}class ni{}class nv extends ni{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zf(n,a=>this.processProvider(a)),this.records.set(Wm,ao(void 0,this)),i.has("environment")&&this.records.set(ni,ao(void 0,this));const o=this.records.get(Jf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Jm.multi,rt,Oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=$i(this),r=Qn(void 0);try{return n()}finally{$i(t),Qn(r)}}get(n,t=ps,r=Oe.Default){this.assertNotDestroyed(),r=sa(r);const i=$i(this),o=Qn(void 0);try{if(!(r&Oe.SkipSelf)){let c=this.records.get(n);if(void 0===c){const f=function kC(e){return"function"==typeof e||"object"==typeof e&&e instanceof _e}(n)&&qs(n);c=f&&this.injectableDefInScope(f)?ao(Yf(n),Dl):null,this.records.set(n,c)}if(null!=c)return this.hydrate(n,c)}return(r&Oe.Self?_l():this.parent).get(n,t=r&Oe.Optional&&t===ps?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[er]=a[er]||[]).unshift(Ke(n)),i)throw a;return function Tn(e,n,t,r){const i=e[er];throw n[tl]&&i.unshift(n[tl]),e.message=function Wd(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Kd?e.slice(2):e;let i=Ke(n);if(Array.isArray(n))i=n.map(Ke).join(" -> ");else if("object"==typeof n){let o=[];for(let a in n)if(n.hasOwnProperty(a)){let c=n[a];o.push(a+":"+("string"==typeof c?JSON.stringify(c):Ke(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(zd,"\n  ")}`}("\n"+e.message,i,t,r),e[qd]=i,e[er]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{Qn(o),$i(i)}}resolveInjectorInitializers(){const n=$i(this),t=Qn(void 0);try{const r=this.get(Cl.multi,rt,Oe.Self);for(const i of r)i()}finally{$i(n),Qn(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Ke(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(n){let t=_s(n=Re(n))?n:Re(n&&n.provide);const r=function PC(e){return Wf(e)?ao(void 0,e.useValue):ao(rv(e),Dl)}(n);if(_s(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ao(void 0,Dl,!0),i.factory=()=>Ks(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Dl&&(t.value=RC,t.value=t.factory()),"object"==typeof t.value&&t.value&&function OC(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Re(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Yf(e){const n=qs(e),t=null!==n?n.factory:k(e);if(null!==t)return t;if(e instanceof _e)throw new fe(204,!1);if(e instanceof Function)return function MC(e){const n=e.length;if(n>0)throw function va(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(n,"?"),new fe(204,!1);const t=function Xt(e){const n=e&&(e[zs]||e[Qu]);return n?(function Ud(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),n):null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new fe(204,!1)}function rv(e,n,t){let r;if(_s(e)){const i=Re(e);return k(i)||Yf(i)}if(Wf(e))r=()=>Re(e.useValue);else if(function tv(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ks(e.deps||[]));else if(function ev(e){return!(!e||!e.useExisting)}(e))r=()=>ge(Re(e.useExisting));else{const i=Re(e&&(e.useClass||e.provide));if(!function NC(e){return!!e.deps}(e))return k(i)||Yf(i);r=()=>new i(...Ks(e.deps))}return r}function ao(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Zf(e,n){for(const t of e)Array.isArray(t)?Zf(t,n):t&&ea(t)?Zf(t.\u0275providers,n):n(t)}class LC{}class iv{}class BC{resolveComponentFactory(n){throw function VC(e){const n=Error(`No component factory found for ${Ke(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Ia=(()=>{class e{}return e.NULL=new BC,e})();function HC(){return uo(Be(),le())}function uo(e,n){return new hr(Me(e,n))}let hr=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=HC,e})();class ov{}let Ci=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function UC(){const e=le(),t=Tt(Be().index,e);return(Pn(t)?t:e)[Ge]}(),e})(),$C=(()=>{class e{}return e.\u0275prov=Ee({token:e,providedIn:"root",factory:()=>null}),e})();class Fa{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const qC=new Fa("15.2.1"),Qf={},eh="ngOriginalError";function th(e){return e[eh]}class lo{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&th(n);for(;t&&th(t);)t=th(t);return t||null}}function Di(e){return e instanceof Function?e():e}function uv(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const lv="ng-template";function tD(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==uv(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function cv(e){return 4===e.type&&e.value!==lv}function nD(e,n,t){return n===(4!==e.type||t?e.value:lv)}function rD(e,n,t){let r=4;const i=e.attrs||[],o=function oD(e){for(let n=0;n<e.length;n++)if(L0(e[n]))return n;return e.length}(i);let a=!1;for(let c=0;c<n.length;c++){const f=n[c];if("number"!=typeof f){if(!a)if(4&r){if(r=2|1&r,""!==f&&!nD(e,f,t)||""===f&&1===n.length){if(kr(r))return!1;a=!0}}else{const y=8&r?f:n[++c];if(8&r&&null!==e.attrs){if(!tD(e.attrs,y,t)){if(kr(r))return!1;a=!0}continue}const F=iD(8&r?"class":f,i,cv(e),t);if(-1===F){if(kr(r))return!1;a=!0;continue}if(""!==y){let N;N=F>o?"":i[F+1].toLowerCase();const L=8&r?N:null;if(L&&-1!==uv(L,y,0)||2&r&&y!==N){if(kr(r))return!1;a=!0}}}}else{if(!a&&!kr(r)&&!kr(f))return!1;if(a&&kr(f))continue;a=!1,r=f|1&r}}return kr(r)||a}function kr(e){return 0==(1&e)}function iD(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const a=n[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let c=n[++i];for(;"string"==typeof c;)c=n[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function aD(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function dv(e,n,t=!1){for(let r=0;r<n.length;r++)if(rD(e,n[r],t))return!0;return!1}function fv(e,n){return e?":not("+n.trim()+")":n}function lD(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let a=e[t];if("string"==typeof a)if(2&r){const c=e[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!kr(a)&&(n+=fv(o,i),i=""),r=a,o=o||!kr(r);t++}return""!==i&&(n+=fv(o,i)),n}const qe={};function Et(e){hv(st(),le(),Gn()+e,!1)}function hv(e,n,t,r){if(!r)if(3==(3&n[je])){const o=e.preOrderCheckHooks;null!==o&&ol(n,o,t)}else{const o=e.preOrderHooks;null!==o&&al(n,o,0,t)}Ss(t)}function vv(e,n=null,t=null,r){const i=yv(e,n,t,r);return i.resolveInjectorInitializers(),i}function yv(e,n=null,t=null,r,i=new Set){const o=[t||rt,IC(e)];return r=r||("object"==typeof e?void 0:Ke(e)),new nv(o,n||_l(),r||null,i)}let Lr=(()=>{class e{static create(t,r){if(Array.isArray(t))return vv({name:""},r,t,"");{const i=t.name??"";return vv({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=ps,e.NULL=new Xm,e.\u0275prov=Ee({token:e,providedIn:"any",factory:()=>ge(Wm)}),e.__NG_ELEMENT_ID__=-1,e})();function se(e,n=Oe.Default){const t=le();return null===t?ge(e,n):K0(Be(),t,Re(e),n)}function _v(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=e.data[o];nf(t[r]),a.contentQueries(2,n[o],o)}}}function Il(e,n,t,r,i,o,a,c,f,y,E){const F=n.blueprint.slice();return F[Nr]=i,F[je]=76|r,(null!==E||e&&1024&e[je])&&(F[je]|=1024),Ut(F),F[Rt]=F[Yr]=e,F[Vt]=t,F[yi]=a||e&&e[yi],F[Ge]=c||e&&e[Ge],F[la]=f||e&&e[la]||null,F[Ki]=y||e&&e[Ki]||null,F[ln]=o,F[Zr]=function F2(){return I2++}(),F[ca]=E,F[yn]=2==n.type?e[yn]:F,F}function ho(e,n,t,r,i){let o=e.data[n];if(null===o)o=function oh(e,n,t,r,i){const o=Or(),a=Zd(),f=e.data[n]=function OD(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=f),null!==o&&(a?null==o.child&&null!==f.parent&&(o.child=f):null===o.next&&(o.next=f,f.prev=o)),f}(e,n,t,r,i),function PE(){return Se.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const a=function fa(){const e=Se.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return ei(o,!0),o}function Ta(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function ah(e,n,t){rf(n);try{const r=e.viewQuery;null!==r&&vh(1,r,t);const i=e.template;null!==i&&Av(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&_v(e,n),e.staticViewQueries&&vh(2,e.viewQuery,t);const o=e.components;null!==o&&function MD(e,n){for(let t=0;t<n.length;t++)e_(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[je]&=-5,sf()}}function Fl(e,n,t,r){const i=n[je];if(128!=(128&i)){rf(n);try{Ut(n),function I0(e){return Se.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Av(e,n,t,2,r);const a=3==(3&i);if(a){const y=e.preOrderCheckHooks;null!==y&&ol(n,y,null)}else{const y=e.preOrderHooks;null!==y&&al(n,y,0,null),af(n,0)}if(function ZD(e){for(let n=If(e);null!==n;n=Ff(n)){if(!n[xs])continue;const t=n[ws];for(let r=0;r<t.length;r++){const i=t[r];512&i[je]||It(i[Rt],1),i[je]|=512}}}(n),function YD(e){for(let n=If(e);null!==n;n=Ff(n))for(let t=Mn;t<n.length;t++){const r=n[t],i=r[ye];tn(r)&&Fl(i,r,i.template,r[Vt])}}(n),null!==e.contentQueries&&_v(e,n),a){const y=e.contentCheckHooks;null!==y&&ol(n,y)}else{const y=e.contentHooks;null!==y&&al(n,y,1),af(n,1)}!function TD(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ss(~i);else{const o=i,a=t[++r],c=t[++r];NE(a,o),c(2,n[o])}}}finally{Ss(-1)}}(e,n);const c=e.components;null!==c&&function RD(e,n){for(let t=0;t<n.length;t++)QD(e,n[t])}(n,c);const f=e.viewQuery;if(null!==f&&vh(2,f,r),a){const y=e.viewCheckHooks;null!==y&&ol(n,y)}else{const y=e.viewHooks;null!==y&&al(n,y,2),af(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[je]&=-41,512&n[je]&&(n[je]&=-513,It(n[Rt],-1))}finally{sf()}}}function Av(e,n,t,r,i){const o=Gn(),a=2&r;try{Ss(-1),a&&n.length>At&&hv(e,n,At,!1),q(a?2:0,i),t(r,i)}finally{Ss(o),q(a?3:1,i)}}function uh(e,n,t){if(rl(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}}function lh(e,n,t){il()&&(function jD(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;Wi(t)&&function WD(e,n,t){const r=Me(n,e),i=Iv(t),o=e[yi],a=Tl(e,Il(e,i,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=a}(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||dl(t,n),kn(r,n);const a=t.initialInputs;for(let c=i;c<o;c++){const f=e.data[c],y=Es(n,e,c,t);kn(y,n),null!==a&&JD(0,c-i,y,f,0,a),dr(f)&&(Tt(t.index,n)[Vt]=Es(n,e,c,t))}}(e,n,t,Me(t,n)),64==(64&t.flags)&&Nv(e,n,t))}function ch(e,n,t=Me){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],c=-1===a?t(n,e):e[a];e[i++]=c}}}function Iv(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=dh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function dh(e,n,t,r,i,o,a,c,f,y){const E=At+r,F=E+i,N=function PD(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:qe);return t}(E,F),L="function"==typeof y?y():y;return N[ye]={type:e,blueprint:N,template:t,queries:null,viewQuery:c,declTNode:n,data:N.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:f,consts:L,incompleteFirstPass:!1}}function Tv(e,n,t,r){for(let i in e)if(e.hasOwnProperty(i)){t=null===t?{}:t;const o=e[i];null===r?Rv(t,n,i,o):r.hasOwnProperty(i)&&Rv(t,n,r[i],o)}return t}function Rv(e,n,t,r){e.hasOwnProperty(t)?e[t].push(n,r):e[t]=[n,r]}function pr(e,n,t,r,i,o,a,c){const f=Me(n,t);let E,y=n.inputs;!c&&null!=y&&(E=y[r])?(yh(e,t,E,r,i),Wi(n)&&Mv(t,n.index)):3&n.type&&(r=function LD(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,n.value||"",r):i,o.setProperty(f,r,i))}function Mv(e,n){const t=Tt(n,e);16&t[je]||(t[je]|=32)}function fh(e,n,t,r){if(il()){const i=null===r?null:{"":-1},o=function $D(e,n){const t=e.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const a=t[o];if(dv(n,a.selectors,!1))if(r||(r=[]),dr(a))if(null!==a.findHostDirectiveDefs){const c=[];i=i||new Map,a.findHostDirectiveDefs(a,c,i),r.unshift(...c,a),hh(e,n,c.length)}else r.unshift(a),hh(e,n,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(e,t);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&Pv(e,n,t,a,i,c),i&&function qD(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new fe(-301,!1);r.push(n[i],o)}}}(t,r,i)}t.mergedAttrs=pa(t.mergedAttrs,t.attrs)}function Pv(e,n,t,r,i,o){for(let y=0;y<r.length;y++)hf(dl(t,n),e,r[y].type);!function KD(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,r.length);for(let y=0;y<r.length;y++){const E=r[y];E.providersResolver&&E.providersResolver(E)}let a=!1,c=!1,f=Ta(e,n,r.length,null);for(let y=0;y<r.length;y++){const E=r[y];t.mergedAttrs=pa(t.mergedAttrs,E.hostAttrs),GD(e,t,n,f,E),zD(f,E,i),null!==E.contentQueries&&(t.flags|=4),(null!==E.hostBindings||null!==E.hostAttrs||0!==E.hostVars)&&(t.flags|=64);const F=E.type.prototype;!a&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),a=!0),!c&&(F.ngOnChanges||F.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),c=!0),f++}!function kD(e,n,t){const i=n.directiveEnd,o=e.data,a=n.attrs,c=[];let f=null,y=null;for(let E=n.directiveStart;E<i;E++){const F=o[E],N=t?t.get(F):null,U=N?N.outputs:null;f=Tv(F.inputs,E,f,N?N.inputs:null),y=Tv(F.outputs,E,y,U);const Z=null===f||null===a||cv(n)?null:XD(f,E,a);c.push(Z)}null!==f&&(f.hasOwnProperty("class")&&(n.flags|=8),f.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=c,n.inputs=f,n.outputs=y}(e,t,o)}function Nv(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function OE(){return Se.lFrame.currentDirectiveIndex}();try{Ss(o);for(let c=r;c<i;c++){const f=e.data[c],y=n[c];ef(c),(null!==f.hostBindings||0!==f.hostVars||null!==f.hostAttrs)&&UD(f,y)}}finally{Ss(-1),ef(a)}}function UD(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function hh(e,n,t){n.componentOffset=t,(e.components||(e.components=[])).push(n.index)}function zD(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;dr(n)&&(t[""]=e)}}function GD(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=k(i.type)),a=new ha(o,dr(i),se);e.blueprint[r]=a,t[r]=a,function BD(e,n,t,r,i){const o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const c=~n.index;(function HD(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(t,r,o)}}(e,n,r,Ta(e,t,i.hostVars,qe),i)}function ri(e,n,t,r,i,o){const a=Me(e,n);!function ph(e,n,t,r,i,o,a){if(null==o)e.removeAttribute(n,i,t);else{const c=null==a?De(o):a(o,r||"",i);e.setAttribute(n,i,c,t)}}(n[Ge],a,o,e.value,t,r,i)}function JD(e,n,t,r,i,o){const a=o[n];if(null!==a){const c=r.setInput;for(let f=0;f<a.length;){const y=a[f++],E=a[f++],F=a[f++];null!==c?r.setInput(t,F,y,E):t[E]=F}}}function XD(e,n,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const a=e[o];for(let c=0;c<a.length;c+=2)if(a[c]===n){r.push(o,a[c+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Ov(e,n,t,r){return[e,!0,!1,n,null,0,r,t,null,null]}function QD(e,n){const t=Tt(n,e);if(tn(t)){const r=t[ye];48&t[je]?Fl(r,t,r.template,t[Vt]):t[Dr]>0&&gh(t)}}function gh(e){for(let r=If(e);null!==r;r=Ff(r))for(let i=Mn;i<r.length;i++){const o=r[i];if(tn(o))if(512&o[je]){const a=o[ye];Fl(a,o,a.template,o[Vt])}else o[Dr]>0&&gh(o)}const t=e[ye].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Tt(t[r],e);tn(i)&&i[Dr]>0&&gh(i)}}function e_(e,n){const t=Tt(n,e),r=t[ye];(function t_(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),ah(r,t,t[Vt])}function Tl(e,n){return e[Gi]?e[Js][qn]=n:e[Gi]=n,e[Js]=n,n}function mh(e){for(;e;){e[je]|=32;const n=Ea(e);if(s(e)&&!n)return e;e=n}return null}function Rl(e,n,t,r=!0){const i=n[yi];i.begin&&i.begin();try{Fl(e,n,e.template,t)}catch(a){throw r&&Bv(n,a),a}finally{i.end&&i.end()}}function vh(e,n,t){nf(0),n(e,t)}function kv(e){return e[Xr]||(e[Xr]=[])}function Lv(e){return e.cleanup||(e.cleanup=[])}function Bv(e,n){const t=e[Ki],r=t?t.get(lo,null):null;r&&r.handleError(n)}function yh(e,n,t,r,i){for(let o=0;o<t.length;){const a=t[o++],c=t[o++],f=n[a],y=e.data[a];null!==y.setInput?y.setInput(f,i,r,c):f[c]=i}}function Ml(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let a=0;a<n.length;a++){const c=n[a];"number"==typeof c?o=c:1==o?i=Zo(i,c):2==o&&(r=Zo(r,c+": "+n[++a]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Pl(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(ve(o)),cr(o))for(let c=Mn;c<o.length;c++){const f=o[c],y=f[ye].firstChild;null!==y&&Pl(f[ye],f,y,r)}const a=t.type;if(8&a)Pl(e,n,t.child,r);else if(32&a){const c=Af(t,n);let f;for(;f=c();)r.push(f)}else if(16&a){const c=Rm(n,t);if(Array.isArray(c))r.push(...c);else{const f=Ea(n[yn]);Pl(f[ye],f,c,r,!0)}}t=i?t.projectionNext:t.next}return r}class Ra{get rootNodes(){const n=this._lView,t=n[ye];return Pl(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vt]}set context(n){this._lView[Vt]=n}get destroyed(){return 128==(128&this._lView[je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Rt];if(cr(n)){const t=n[et],r=t?t.indexOf(this):-1;r>-1&&(Mf(n,r),pl(t,r))}this._attachedToViewContainer=!1}Sm(this._lView[ye],this._lView)}onDestroy(n){!function Fv(e,n,t,r){const i=kv(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&Lv(e).push(r,i.length-1))}(this._lView[ye],this._lView,null,n)}markForCheck(){mh(this._cdRefInjectingView||this._lView)}detach(){this._lView[je]&=-65}reattach(){this._lView[je]|=64}detectChanges(){Rl(this._lView[ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function q2(e,n){Ca(e,n,n[Ge],2,null,null)}(this._lView[ye],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=n}}class n_ extends Ra{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Rl(n[ye],n,n[Vt],!1)}checkNoChanges(){}get context(){return null}}class Hv extends Ia{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=gt(n);return new Ma(t,this.ngModule)}}function jv(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class i_{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=sa(r);const i=this.injector.get(n,Qf,r);return i!==Qf||t===Qf?i:this.parentInjector.get(n,t,r)}}class Ma extends iv{get inputs(){return jv(this.componentDef.inputs)}get outputs(){return jv(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function cD(e){return e.map(lD).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let o=(i=i||this.ngModule)instanceof ni?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new i_(n,o):n,c=a.get(ov,null);if(null===c)throw new fe(407,!1);const f=a.get($C,null),y=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",F=r?function ND(e,n,t){return e.selectRootElement(n,t===vt.ShadowDom)}(y,r,this.componentDef.encapsulation):Rf(y,E,function r_(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(E)),N=this.componentDef.onPush?288:272,L=dh(0,null,null,1,0,null,null,null,null,null),U=Il(null,L,null,N,null,null,c,y,f,a,null);let Z,re;rf(U);try{const oe=this.componentDef;let ce,ae=null;oe.findHostDirectiveDefs?(ce=[],ae=new Map,oe.findHostDirectiveDefs(oe,ce,ae),ce.push(oe)):ce=[oe];const Ne=function o_(e,n){const t=e[ye],r=At;return e[r]=n,ho(t,r,2,"#host",null)}(U,F),xt=function a_(e,n,t,r,i,o,a,c){const f=i[ye];!function u_(e,n,t,r){for(const i of e)n.mergedAttrs=pa(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(Ml(n,n.mergedAttrs,!0),null!==t&&Nm(r,t,n))}(r,e,n,a);const y=o.createRenderer(n,t),E=Il(i,Iv(t),null,t.onPush?32:16,i[e.index],e,o,y,c||null,null,null);return f.firstCreatePass&&hh(f,e,r.length-1),Tl(i,E),i[e.index]=E}(Ne,F,oe,ce,U,c,y);re=dt(L,At),F&&function c_(e,n,t,r){if(r)lf(e,t,["ng-version",qC.full]);else{const{attrs:i,classes:o}=function dD(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!kr(i))break;i=o}r++}return{attrs:n,classes:t}}(n.selectors[0]);i&&lf(e,t,i),o&&o.length>0&&Pm(e,t,o.join(" "))}}(y,oe,F,r),void 0!==t&&function d_(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(re,this.ngContentSelectors,t),Z=function l_(e,n,t,r,i,o){const a=Be(),c=i[ye],f=Me(a,i);Pv(c,i,a,t,null,r);for(let E=0;E<t.length;E++)kn(Es(i,c,a.directiveStart+E,a),i);Nv(c,i,a),f&&kn(f,i);const y=Es(i,c,a.directiveStart+a.componentOffset,a);if(e[Vt]=i[Vt]=y,null!==o)for(const E of o)E(y,n);return uh(c,a,e),y}(xt,oe,ce,ae,U,[f_]),ah(L,U,null)}finally{sf()}return new s_(this.componentType,Z,uo(re,U),U,re)}}class s_ extends LC{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new n_(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const o=this._rootLView;yh(o[ye],o,i,n,t),Mv(o,this._tNode.index)}}get injector(){return new Zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function f_(){const e=Be();sl(le()[ye],e)}function Ct(e){let n=function Uv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(dr(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new fe(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const a=e;a.inputs=xh(e.inputs),a.declaredInputs=xh(e.declaredInputs),a.outputs=xh(e.outputs);const c=i.hostBindings;c&&m_(e,c);const f=i.viewQuery,y=i.contentQueries;if(f&&p_(e,f),y&&g_(e,y),Yo(e.inputs,i.inputs),Yo(e.declaredInputs,i.declaredInputs),Yo(e.outputs,i.outputs),dr(i)&&i.data.animation){const E=e.data;E.animation=(E.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let a=0;a<o.length;a++){const c=o[a];c&&c.ngInherit&&c(e),c===Ct&&(t=!1)}}n=Object.getPrototypeOf(n)}!function h_(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=pa(i.hostAttrs,t=pa(t,i.hostAttrs))}}(r)}function xh(e){return e===ut?{}:e===rt?[]:e}function p_(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function g_(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function m_(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}function Nl(e){return!!function wh(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Ln(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function si(e,n,t,r){const i=le();return Ln(i,Xs(),n)&&(st(),ri($t(),i,e,n,t,r)),si}function go(e,n,t,r){return Ln(e,Xs(),t)?n+De(t)+r:qe}function oi(e,n,t,r,i,o,a,c){const f=le(),y=st(),E=e+At,F=y.firstCreatePass?function __(e,n,t,r,i,o,a,c,f){const y=n.consts,E=ho(n,e,4,a||null,Ze(y,c));fh(n,t,E,Ze(y,f)),sl(n,E);const F=E.tViews=dh(2,E,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,y);return null!==n.queries&&(n.queries.template(n,E),F.queries=n.queries.embeddedTView(E)),E}(E,y,f,n,t,r,i,o,a):y.data[E];ei(F,!1);const N=f[Ge].createComment("");xl(y,f,N,F),kn(N,f),Tl(f,f[E]=Ov(N,f,N,F)),Pe(F)&&lh(y,f,F),null!=a&&ch(f,F,c)}function Na(e){return function jt(e,n){return e[n]}(function ME(){return Se.lFrame.contextLView}(),At+e)}function Mt(e,n,t){const r=le();return Ln(r,Xs(),n)&&pr(st(),$t(),r,e,n,r[Ge],t,!1),Mt}function bh(e,n,t,r,i){const a=i?"class":"style";yh(e,t,n.inputs[a],a,r)}function ke(e,n,t,r){const i=le(),o=st(),a=At+e,c=i[Ge],f=o.firstCreatePass?function I_(e,n,t,r,i,o){const a=n.consts,f=ho(n,e,2,r,Ze(a,i));return fh(n,t,f,Ze(a,o)),null!==f.attrs&&Ml(f,f.attrs,!1),null!==f.mergedAttrs&&Ml(f,f.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,f),f}(a,o,i,n,t,r):o.data[a],y=i[a]=Rf(c,n,function $E(){return Se.lFrame.currentNamespace}()),E=Pe(f);return ei(f,!0),Nm(c,y,f),32!=(32&f.flags)&&xl(o,i,y,f),0===function On(){return Se.lFrame.elementDepthCount}()&&kn(y,i),function bs(){Se.lFrame.elementDepthCount++}(),E&&(lh(o,i,f),uh(o,f,i)),null!==r&&ch(i,f),ke}function Le(){let e=Be();Zd()?Qd():(e=e.parent,ei(e,!1));const n=e;!function Qr(){Se.lFrame.elementDepthCount--}();const t=st();return t.firstCreatePass&&(sl(t,e),rl(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function GE(e){return 0!=(8&e.flags)}(n)&&bh(t,n,le(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function WE(e){return 0!=(16&e.flags)}(n)&&bh(t,n,le(),n.stylesWithoutHost,!1),Le}function Is(e,n,t,r){return ke(e,n,t,r),Le(),Is}function kl(e,n,t){const r=le(),i=st(),o=e+At,a=i.firstCreatePass?function F_(e,n,t,r,i){const o=n.consts,a=Ze(o,r),c=ho(n,e,8,"ng-container",a);return null!==a&&Ml(c,a,!0),fh(n,t,c,Ze(o,i)),null!==n.queries&&n.queries.elementStart(n,c),c}(o,i,r,n,t):i.data[o];ei(a,!0);const c=r[o]=r[Ge].createComment("");return xl(i,r,c,a),kn(c,r),Pe(a)&&(lh(i,r,a),uh(i,a,r)),null!=t&&ch(r,a),kl}function Ll(){let e=Be();const n=st();return Zd()?Qd():(e=e.parent,ei(e,!1)),n.firstCreatePass&&(sl(n,e),rl(e)&&n.queries.elementEnd(e)),Ll}function Sh(){return le()}function Oa(e){return!!e&&"function"==typeof e.then}const Eh=function ny(e){return!!e&&"function"==typeof e.subscribe};function Pt(e,n,t,r){const i=le(),o=st(),a=Be();return function iy(e,n,t,r,i,o,a){const c=Pe(r),y=e.firstCreatePass&&Lv(e),E=n[Vt],F=kv(n);let N=!0;if(3&r.type||a){const Z=Me(r,n),re=a?a(Z):Z,oe=F.length,ce=a?Ne=>a(ve(Ne[r.index])):r.index;let ae=null;if(!a&&c&&(ae=function T_(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===t&&i[o+1]===r){const c=n[Xr],f=i[o+2];return c.length>f?c[f]:null}"string"==typeof a&&(o+=2)}return null}(e,n,i,r.index)),null!==ae)(ae.__ngLastListenerFn__||ae).__ngNextListenerFn__=o,ae.__ngLastListenerFn__=o,N=!1;else{o=oy(r,n,E,o,!1);const Ne=t.listen(re,i,o);F.push(o,Ne),y&&y.push(i,ce,oe,oe+1)}}else o=oy(r,n,E,o,!1);const L=r.outputs;let U;if(N&&null!==L&&(U=L[i])){const Z=U.length;if(Z)for(let re=0;re<Z;re+=2){const xt=n[U[re]][U[re+1]].subscribe(o),zt=F.length;F.push(o,xt),y&&y.push(i,r.index,zt,-(zt+1))}}}(o,i,i[Ge],a,e,n,r),Pt}function sy(e,n,t,r){try{return q(6,n,t),!1!==t(r)}catch(i){return Bv(e,i),!1}finally{q(7,n,t)}}function oy(e,n,t,r,i){return function o(a){if(a===Function)return r;mh(e.componentOffset>-1?Tt(e.index,n):n);let f=sy(n,t,r,a),y=o.__ngNextListenerFn__;for(;y;)f=sy(n,t,y,a)&&f,y=y.__ngNextListenerFn__;return i&&!1===f&&(a.preventDefault(),a.returnValue=!1),f}}function ka(e=1){return function LE(e){return(Se.lFrame.contextLView=function VE(e,n){for(;e>0;)n=n[Yr],e--;return n}(e,Se.lFrame.contextLView))[Vt]}(e)}function Vl(e,n,t,r,i){const o=le(),a=go(o,n,t,r);return a!==qe&&pr(st(),$t(),o,e,a,o[Ge],i,!1),Vl}function Bl(e,n){return e<<17|n<<2}function Xi(e){return e>>17&32767}function Ch(e){return 2|e}function Fs(e){return(131068&e)>>2}function Dh(e,n){return-131069&e|n<<2}function _h(e){return 1|e}function my(e,n,t,r,i){const o=e[t+1],a=null===n;let c=r?Xi(o):Fs(o),f=!1;for(;0!==c&&(!1===f||a);){const E=e[c+1];B_(e[c],n)&&(f=!0,e[c+1]=r?_h(E):Ch(E)),c=r?Xi(E):Fs(E)}f&&(e[t+1]=r?Ch(o):_h(o))}function B_(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&ro(e,n)>=0}function Hl(e,n){return function Vr(e,n,t,r){const i=le(),o=st(),a=function Si(e){const n=Se.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}(2);o.firstUpdatePass&&function Dy(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[Gn()],a=function Cy(e,n){return n>=e.expandoStartIndex}(e,t);(function Fy(e,n){return 0!=(e.flags&(n?8:16))})(o,r)&&null===n&&!a&&(n=!1),n=function W_(e,n,t,r){const i=function tf(e){const n=Se.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=La(t=Ah(null,e,n,t,r),n.attrs,r),o=null);else{const a=n.directiveStylingLast;if(-1===a||e[a]!==i)if(t=Ah(i,e,n,t,r),null===o){let f=function J_(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==Fs(r))return e[Xi(r)]}(e,n,r);void 0!==f&&Array.isArray(f)&&(f=Ah(null,e,n,f[1],r),f=La(f,n.attrs,r),function X_(e,n,t,r){e[Xi(t?n.classBindings:n.styleBindings)]=r}(e,n,r,f))}else o=function Y_(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=La(r,e[o].hostAttrs,t);return La(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function L_(e,n,t,r,i,o){let a=o?n.classBindings:n.styleBindings,c=Xi(a),f=Fs(a);e[r]=t;let E,y=!1;if(Array.isArray(t)?(E=t[1],(null===E||ro(t,E)>0)&&(y=!0)):E=t,i)if(0!==f){const N=Xi(e[c+1]);e[r+1]=Bl(N,c),0!==N&&(e[N+1]=Dh(e[N+1],r)),e[c+1]=function O_(e,n){return 131071&e|n<<17}(e[c+1],r)}else e[r+1]=Bl(c,0),0!==c&&(e[c+1]=Dh(e[c+1],r)),c=r;else e[r+1]=Bl(f,0),0===c?c=r:e[f+1]=Dh(e[f+1],r),f=r;y&&(e[r+1]=Ch(e[r+1])),my(e,E,r,!0),my(e,E,r,!1),function V_(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&ro(o,n)>=0&&(t[r+1]=_h(t[r+1]))}(n,E,e,r,o),a=Bl(c,f),o?n.classBindings=a:n.styleBindings=a}(i,o,n,t,a,r)}}(o,e,a,r),n!==qe&&Ln(i,a,n)&&function Ay(e,n,t,r,i,o,a,c){if(!(3&n.type))return;const f=e.data,y=f[c+1],E=function k_(e){return 1==(1&e)}(y)?Iy(f,n,t,i,Fs(y),a):void 0;jl(E)||(jl(o)||function N_(e){return 2==(2&e)}(y)&&(o=Iy(f,null,t,i,c,a)),function eC(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:nr.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nr.Important),e.setStyle(t,r,i,o))}}(r,a,$e(Gn(),t),i,o))}(o,o.data[Gn()],i,i[Ge],e,i[a+1]=function eA(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Ke(Ji(e)))),e}(n,t),r,a)}(e,n,null,!0),Hl}function Ah(e,n,t,r,i){let o=null;const a=t.directiveEnd;let c=t.directiveStylingLast;for(-1===c?c=t.directiveStart:c++;c<a&&(o=n[c],r=La(r,o.hostAttrs,i),o!==e);)c++;return null!==e&&(t.directiveStylingLast=c),r}function La(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const a=n[o];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),fr(e,a,!!t||n[++o]))}return void 0===e?null:e}function Iy(e,n,t,r,i,o){const a=null===n;let c;for(;i>0;){const f=e[i],y=Array.isArray(f),E=y?f[1]:f,F=null===E;let N=t[i+1];N===qe&&(N=F?rt:void 0);let L=F?vf(N,r):E===r?N:void 0;if(y&&!jl(L)&&(L=vf(f,r)),jl(L)&&(c=L,a))return c;const U=e[i+1];i=a?Xi(U):Fs(U)}if(null!==n){let f=o?n.residualClasses:n.residualStyles;null!=f&&(c=vf(f,r))}return c}function jl(e){return void 0!==e}function lt(e,n=""){const t=le(),r=st(),i=e+At,o=r.firstCreatePass?ho(r,i,1,n,null):r.data[i],a=t[i]=function Tf(e,n){return e.createText(n)}(t[Ge],n);xl(r,t,a,o),ei(o,!1)}function Co(e){return Ih("",e,""),Co}function Ih(e,n,t){const r=le(),i=go(r,e,n,t);return i!==qe&&function _i(e,n,t){const r=$e(n,e);!function wm(e,n,t){e.setValue(n,t)}(e[Ge],r,t)}(r,Gn(),i),Ih}const _o="en-US";let Yy=_o;function Rh(e,n,t,r,i){if(e=Re(e),Array.isArray(e))for(let o=0;o<e.length;o++)Rh(e[o],n,t,r,i);else{const o=st(),a=le();let c=_s(e)?e:Re(e.provide),f=rv(e);const y=Be(),E=1048575&y.providerIndexes,F=y.directiveStart,N=y.providerIndexes>>20;if(_s(e)||!e.multi){const L=new ha(f,i,se),U=Ph(c,n,i?E:E+N,F);-1===U?(hf(dl(y,a),o,c),Mh(o,e,n.length),n.push(c),y.directiveStart++,y.directiveEnd++,i&&(y.providerIndexes+=1048576),t.push(L),a.push(L)):(t[U]=L,a[U]=L)}else{const L=Ph(c,n,E+N,F),U=Ph(c,n,E,E+N),re=U>=0&&t[U];if(i&&!re||!i&&!(L>=0&&t[L])){hf(dl(y,a),o,c);const oe=function yI(e,n,t,r,i){const o=new ha(e,t,se);return o.multi=[],o.index=n,o.componentProviders=0,S1(o,i,r&&!t),o}(i?vI:mI,t.length,i,r,f);!i&&re&&(t[U].providerFactory=oe),Mh(o,e,n.length,0),n.push(c),y.directiveStart++,y.directiveEnd++,i&&(y.providerIndexes+=1048576),t.push(oe),a.push(oe)}else Mh(o,e,L>-1?L:U,S1(t[i?U:L],f,!i&&r));!i&&r&&re&&t[U].componentProviders++}}}function Mh(e,n,t,r){const i=_s(n),o=function TC(e){return!!e.useClass}(n);if(i||o){const f=(o?Re(n.useClass):n).prototype.ngOnDestroy;if(f){const y=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const E=y.indexOf(t);-1===E?y.push(t,[r,f]):y[E+1].push(r,f)}else y.push(t,f)}}}function S1(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Ph(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function mI(e,n,t,r){return Nh(this.multi,[])}function vI(e,n,t,r){const i=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Es(t,t[ye],this.providerFactory.index,r);o=c.slice(0,a),Nh(i,o);for(let f=a;f<c.length;f++)o.push(c[f])}else o=[],Nh(i,o);return o}function Nh(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Bt(e,n=[]){return t=>{t.providersResolver=(r,i)=>function gI(e,n,t){const r=st();if(r.firstCreatePass){const i=dr(e);Rh(t,r.data,r.blueprint,i,!0),Rh(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class Ao{}class E1{}class C1 extends Ao{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hv(this);const r=$n(n);this._bootstrapComponents=Di(r.bootstrap),this._r3Injector=yv(n,t,[{provide:Ao,useValue:this},{provide:Ia,useValue:this.componentFactoryResolver}],Ke(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Oh extends E1{constructor(n){super(),this.moduleType=n}create(n){return new C1(this.moduleType,n)}}class wI extends Ao{constructor(n,t,r){super(),this.componentFactoryResolver=new Hv(this),this.instance=null;const i=new nv([...n,{provide:Ao,useValue:this},{provide:Ia,useValue:this.componentFactoryResolver}],t||_l(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Kl(e,n,t=null){return new wI(e,n,t).injector}let bI=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=Zm(0,t.type),i=r.length>0?Kl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Ee({token:e,providedIn:"environment",factory:()=>new e(ge(ni))}),e})();function D1(e){e.getStandaloneInjector=n=>n.get(bI).getOrCreateStandaloneInjector(e)}function Lh(e){return n=>{setTimeout(e,void 0,n)}}const Gt=class GI extends we{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,o=t||(()=>null),a=r;if(n&&"object"==typeof n){const f=n;i=f.next?.bind(f),o=f.error?.bind(f),a=f.complete?.bind(f)}this.__isAsync&&(o=Lh(o),i&&(i=Lh(i)),a&&(a=Lh(a)));const c=super.subscribe({next:i,error:o,complete:a});return n instanceof kt&&n.add(c),c}};let Ai=(()=>{class e{}return e.__NG_ELEMENT_ID__=YI,e})();const JI=Ai,XI=class extends JI{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=Il(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[ys]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[zn];return null!==a&&(i[zn]=a.createEmbeddedView(r)),ah(r,i,n),new Ra(i)}};function YI(){return function Gl(e,n){return 4&e.type?new XI(n,e,uo(e,n)):null}(Be(),le())}let Hr=(()=>{class e{}return e.__NG_ELEMENT_ID__=ZI,e})();function ZI(){return function B1(e,n){let t;const r=n[e.index];if(cr(r))t=r;else{let i;if(8&e.type)i=ve(r);else{const o=n[Ge];i=o.createComment("");const a=Me(e,n);Ds(o,yl(o,a),i,function Y2(e,n){return e.nextSibling(n)}(o,a),!1)}n[e.index]=t=Ov(r,n,i,e),Tl(n,t)}return new L1(t,e,n)}(Be(),le())}const QI=Hr,L1=class extends QI{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return uo(this._hostTNode,this._hostLView)}get injector(){return new Zs(this._hostTNode,this._hostLView)}get parentInjector(){const n=ff(this._hostTNode,this._hostLView);if(H0(n)){const t=ll(n,this._hostLView),r=ul(n);return new Zs(t[ye].data[r+8],t)}return new Zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=V1(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-Mn}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=n.createEmbeddedView(t||{},o);return this.insert(a,i),a}createComponent(n,t,r,i,o){const a=n&&!function ma(e){return"function"==typeof e}(n);let c;if(a)c=t;else{const F=t||{};c=F.index,r=F.injector,i=F.projectableNodes,o=F.environmentInjector||F.ngModuleRef}const f=a?n:new Ma(gt(n)),y=r||this.parentInjector;if(!o&&null==f.ngModule){const N=(a?y:this.parentInjector).get(ni,null);N&&(o=N)}const E=f.create(y,i,void 0,o);return this.insert(E.hostView,c),E}insert(n,t){const r=n._lView,i=r[ye];if(function Nn(e){return cr(e[Rt])}(r)){const E=this.indexOf(n);if(-1!==E)this.detach(E);else{const F=r[Rt],N=new L1(F,F[ln],F[Rt]);N.detach(N.indexOf(n))}}const o=this._adjustIndex(t),a=this._lContainer;!function K2(e,n,t,r){const i=Mn+r,o=t.length;r>0&&(t[i-1][qn]=n),r<o-Mn?(n[qn]=t[i],Z0(t,Mn+r,n)):(t.push(n),n[qn]=null),n[Rt]=t;const a=n[ys];null!==a&&t!==a&&function G2(e,n){const t=e[ws];n[yn]!==n[Rt][Rt][yn]&&(e[xs]=!0),null===t?e[ws]=[n]:t.push(n)}(a,n);const c=n[zn];null!==c&&c.insertView(e),n[je]|=64}(i,r,a,o);const c=Of(o,a),f=r[Ge],y=yl(f,a[ne]);return null!==y&&function $2(e,n,t,r,i,o){r[Nr]=i,r[ln]=n,Ca(e,r,t,1,i,o)}(i,a[ln],f,r,y,c),n.attachToViewContainerRef(),Z0(Bh(a),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=V1(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Mf(this._lContainer,t);r&&(pl(Bh(this._lContainer),t),Sm(r[ye],r))}detach(n){const t=this._adjustIndex(n,-1),r=Mf(this._lContainer,t);return r&&null!=pl(Bh(this._lContainer),t)?new Ra(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function V1(e){return e[et]}function Bh(e){return e[et]||(e[et]=[])}function Jl(...e){}const Xl=new _e("Application Initializer");let Yl=(()=>{class e{constructor(t){this.appInits=t,this.resolve=Jl,this.reject=Jl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Oa(o))t.push(o);else if(Eh(o)){const a=new Promise((c,f)=>{o.subscribe({complete:c,error:f})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(ge(Xl,8))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ka=new _e("AppId",{providedIn:"root",factory:function dx(){return`${Xh()}${Xh()}${Xh()}`}});function Xh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fx=new _e("Platform Initializer"),Zl=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hx=new _e("appBootstrapListener");let AF=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ii=new _e("LocaleId",{providedIn:"root",factory:()=>h(Ii,Oe.Optional|Oe.SkipSelf)||function IF(){return typeof $localize<"u"&&$localize.locale||_o}()});class TF{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let px=(()=>{class e{compileModuleSync(t){return new Oh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Di($n(t).declarations).reduce((a,c)=>{const f=gt(c);return f&&a.push(new Ma(f)),a},[]);return new TF(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const PF=(()=>Promise.resolve(0))();function Yh(e){typeof Zone>"u"?PF.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Wt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gt(!1),this.onMicrotaskEmpty=new Gt(!1),this.onStable=new Gt(!1),this.onError=new Gt(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function NF(){let e=Ft.requestAnimationFrame,n=Ft.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function LF(e){const n=()=>{!function kF(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ft,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Qh(e),e.isCheckStableRunning=!0,Zh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Qh(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,a,c)=>{try{return vx(e),t.invokeTask(i,o,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),yx(e)}},onInvoke:(t,r,i,o,a,c,f)=>{try{return vx(e),t.invoke(i,o,a,c,f)}finally{e.shouldCoalesceRunChangeDetection&&n(),yx(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Qh(e),Zh(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wt.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Wt.isInAngularZone())throw new fe(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,n,OF,Jl,Jl);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const OF={};function Zh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Qh(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function vx(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function yx(e){e._nesting--,Zh(e)}class VF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gt,this.onMicrotaskEmpty=new Gt,this.onStable=new Gt,this.onError=new Gt}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const xx=new _e(""),Ql=new _e("");let np,ep=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,np||(function BF(e){np=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wt.assertNotInAngularZone(),Yh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yh(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(ge(Wt),ge(tp),ge(Ql))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),tp=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return np?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Yi=null;const wx=new _e("AllowMultipleToken"),rp=new _e("PlatformDestroyListeners"),Fi=!1;class bx{constructor(n,t){this.name=n,this.token=t}}function Ex(e,n,t=[]){const r=`Platform: ${n}`,i=new _e(r);return(o=[])=>{let a=ip();if(!a||a.injector.get(wx,!1)){const c=[...t,...o,{provide:i,useValue:!0}];e?e(c):function UF(e){if(Yi&&!Yi.get(wx,!1))throw new fe(400,!1);Yi=e;const n=e.get(Dx);(function Sx(e){const n=e.get(fx,null);n&&n.forEach(t=>t())})(e)}(function Cx(e=[],n){return Lr.create({name:n,providers:[{provide:Jf,useValue:"platform"},{provide:rp,useValue:new Set([()=>Yi=null])},...e]})}(c,r))}return function qF(e){const n=ip();if(!n)throw new fe(401,!1);return n}()}}function ip(){return Yi?.get(Dx)??null}let Dx=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Ax(e,n){let t;return t="noop"===e?new VF:("zone.js"===e?void 0:e)||new Wt(n),t}(r?.ngZone,function _x(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Wt,useValue:i}];return i.run(()=>{const a=Lr.create({providers:o,parent:this.injector,name:t.moduleType.name}),c=t.create(a),f=c.injector.get(lo,null);if(!f)throw new fe(402,!1);return i.runOutsideAngular(()=>{const y=i.onError.subscribe({next:E=>{f.handleError(E)}});c.onDestroy(()=>{tc(this._modules,c),y.unsubscribe()})}),function Ix(e,n,t){try{const r=t();return Oa(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(f,i,()=>{const y=c.injector.get(Yl);return y.runInitializers(),y.donePromise.then(()=>(function Zy(e){Zn(e,"Expected localeId to be defined"),"string"==typeof e&&(Yy=e.toLowerCase().replace(/_/g,"-"))}(c.injector.get(Ii,_o)||_o),this._moduleDoBootstrap(c),c))})})}bootstrapModule(t,r=[]){const i=Fx({},r);return function HF(e,n,t){const r=new Oh(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(ec);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new fe(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(rp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(ge(Lr))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Fx(e,n){return Array.isArray(n)?n.reduce(Fx,e):{...e,...n}}let ec=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new G(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),a=new G(c=>{let f;this._zone.runOutsideAngular(()=>{f=this._zone.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),Yh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const y=this._zone.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});this.isStable=Ju(o,a.pipe(function Nd(e={}){const{connector:n=(()=>new we),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let a,c,f,y=0,E=!1,F=!1;const N=()=>{c?.unsubscribe(),c=void 0},L=()=>{N(),a=f=void 0,E=F=!1},U=()=>{const Z=a;L(),Z?.unsubscribe()};return Ue((Z,re)=>{y++,!F&&!E&&N();const oe=f=f??n();re.add(()=>{y--,0===y&&!F&&!E&&(c=Xo(U,i))}),oe.subscribe(re),!a&&y>0&&(a=new sr({next:ce=>oe.next(ce),error:ce=>{F=!0,N(),c=Xo(L,t,ce),oe.error(ce)},complete:()=>{E=!0,N(),c=Xo(L,r),oe.complete()}}),gn(Z).subscribe(a))})(o)}}()))}bootstrap(t,r){const i=t instanceof iv;if(!this._injector.get(Yl).done){!i&&function vi(e){const n=gt(e)||vn(e)||un(e);return null!==n&&n.standalone}(t);throw new fe(405,Fi)}let a;a=i?t:this._injector.get(Ia).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const c=function jF(e){return e.isBoundToModule}(a)?void 0:this._injector.get(Ao),y=a.create(Lr.NULL,[],r||a.selector,c),E=y.location.nativeElement,F=y.injector.get(xx,null);return F?.registerApplication(E),y.onDestroy(()=>{this.detachView(y.hostView),tc(this.components,y),F?.unregisterApplication(E)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;tc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(hx,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(ge(Wt),ge(ni),ge(lo))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function tc(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let nc=(()=>{class e{}return e.__NG_ELEMENT_ID__=KF,e})();function KF(e){return function GF(e,n,t){if(Wi(e)&&!t){const r=Tt(e.index,n);return new Ra(r,r)}return 47&e.type?new Ra(n[yn],n):null}(Be(),le(),16==(16&e))}class Nx{constructor(){}supports(n){return Nl(n)}create(n){return new QF(n)}}const ZF=(e,n)=>n;class QF{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||ZF}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const a=!r||t&&t.currentIndex<kx(r,i,o)?t:r,c=kx(a,i,o),f=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{o||(o=[]);const y=c-i,E=f-i;if(y!=E){for(let N=0;N<y;N++){const L=N<o.length?o[N]:o[N]=0,U=L+N;E<=U&&U<y&&(o[N]=L+1)}o[a.previousIndex]=E-y}}c!==f&&n(a,c,f)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Nl(n))throw new fe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,a,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let c=0;c<this.length;c++)o=n[c],a=this._trackByFn(c,o),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,o,a,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,a,c),r=!0),t=t._next}else i=0,function E_(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,c=>{a=this._trackByFn(i,c),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)):(t=this._mismatch(t,c,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new eT(t,r),o,i),n}_verifyReinsertion(n,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new Ox),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ox),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class eT{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tT{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ox{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new tT,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kx(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}function Vx(){return new sc([new Nx])}let sc=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Vx()),deps:[[e,new xa,new ya]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new fe(901,!1)}}return e.\u0275prov=Ee({token:e,providedIn:"root",factory:Vx}),e})();const oT=Ex(null,"core",[]);let aT=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(ge(ec))},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({}),e})();function To(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let lp=null;function Ti(){return lp}class cT{}const _n=new _e("DocumentToken");let cp=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(){return function dT(){return ge(Hx)}()},providedIn:"platform"}),e})();const fT=new _e("Location Initialized");let Hx=(()=>{class e extends cp{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ti().getBaseHref(this._doc)}onPopState(t){const r=Ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){jx()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){jx()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(ge(_n))},e.\u0275prov=Ee({token:e,factory:function(){return function hT(){return new Hx(ge(_n))}()},providedIn:"platform"}),e})();function jx(){return!!window.history.pushState}function dp(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function Ux(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Ri(e){return e&&"?"!==e[0]?"?"+e:e}let Ms=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(){return h(qx)},providedIn:"root"}),e})();const $x=new _e("appBaseHref");let qx=(()=>{class e extends Ms{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??h(_n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dp(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ri(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+Ri(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+Ri(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(ge(cp),ge($x,8))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pT=(()=>{class e extends Ms{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=dp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Ri(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Ri(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(ge(cp),ge($x,8))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),fp=(()=>{class e{constructor(t){this._subject=new Gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function vT(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(Ux(zx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ri(r))}normalize(t){return e.stripTrailingSlash(function mT(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,zx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ri(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ri(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=Ri,e.joinWithSlash=dp,e.stripTrailingSlash=Ux,e.\u0275fac=function(t){return new(t||e)(ge(Ms))},e.\u0275prov=Ee({token:e,factory:function(){return function gT(){return new fp(ge(Ms))}()},providedIn:"root"}),e})();function zx(e){return e.replace(/\/index.html$/,"")}function ew(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}class n4{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let iw=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new n4(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,a),sw(c,i)}});for(let i=0,o=r.length;i<o;i++){const c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{sw(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(se(Hr),se(Ai),se(sc))},e.\u0275dir=be({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function sw(e,n){e.context.$implicit=n.item}let Ep=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new i4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ow("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ow("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(se(Hr),se(Ai))},e.\u0275dir=be({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class i4{constructor(){this.$implicit=null,this.ngIf=null}}function ow(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Ke(n)}'.`)}let lw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({}),e})();const cw="browser";let P4=(()=>{class e{}return e.\u0275prov=Ee({token:e,providedIn:"root",factory:()=>new N4(ge(_n),window)}),e})();class N4{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function O4(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=dw(this.window.history)||dw(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function dw(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class fw{}class u3 extends cT{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Tp extends u3{static makeCurrent(){!function lT(e){lp||(lp=e)}(new Tp)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function l3(){return Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null}();return null==t?null:function c3(e){vc=vc||document.createElement("a"),vc.setAttribute("href",e);const n=vc.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ew(document.cookie,n)}}let vc,Ya=null;const vw=new _e("TRANSITION_ID"),f3=[{provide:Xl,useFactory:function d3(e,n,t){return()=>{t.get(Yl).donePromise.then(()=>{const r=Ti(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[vw,_n,Lr],multi:!0}];let p3=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const yc=new _e("EventManagerPlugins");let xc=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(ge(yc),ge(Wt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class yw{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=Ti().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let xw=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),Za=(()=>{class e extends xw{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return e.\u0275fac=function(t){return new(t||e)(ge(_n))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const Rp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mp=/%COMP%/g,Sw=new _e("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ew(e,n){return n.flat(100).map(t=>t.replace(Mp,e))}function Cw(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let Pp=(()=>{class e{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Np(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Aw?i.applyToHost(t):i instanceof Op&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const a=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestory;switch(r.encapsulation){case vt.Emulated:o=new Aw(a,c,r,this.appId,f);break;case vt.ShadowDom:return new b3(a,c,t,r);default:o=new Op(a,c,r,f)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(ge(xc),ge(Za),ge(Ka),ge(Sw))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class Np{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(Rp[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(_w(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(_w(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=Rp[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=Rp[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(nr.DashCase|nr.Important)?n.style.setProperty(t,r,i&nr.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&nr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,Cw(r)):this.eventManager.addEventListener(n,t,Cw(r))}}function _w(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class b3 extends Np{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ew(i.id,i.styles);for(const a of o){const c=document.createElement("style");c.textContent=a,this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Op extends Np{constructor(n,t,r,i,o=r.id){super(n),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ew(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Aw extends Op{constructor(n,t,r,i,o){const a=i+"-"+r.id;super(n,t,r,o,a),this.contentAttr=function y3(e){return"_ngcontent-%COMP%".replace(Mp,e)}(a),this.hostAttr=function x3(e){return"_nghost-%COMP%".replace(Mp,e)}(a)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}let S3=(()=>{class e extends yw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(ge(_n))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const Iw=["alt","control","meta","shift"],E3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C3={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let D3=(()=>{class e extends yw{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ti().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Iw.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),a+=y+".")}),a+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=i,f.fullKey=a,f}static matchEventFullKeyCode(t,r){let i=E3[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Iw.forEach(a=>{a!==i&&(0,C3[a])(t)&&(o+=a+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(ge(_n))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const F3=Ex(oT,"browser",[{provide:Zl,useValue:cw},{provide:fx,useValue:function _3(){Tp.makeCurrent()},multi:!0},{provide:_n,useFactory:function I3(){return function sC(e){Bf=e}(document),document},deps:[]}]),Rw=new _e(""),Mw=[{provide:Ql,useClass:class h3{addToWindow(n){Ft.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ft.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ft.getAllAngularRootElements=()=>n.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(r=>{const i=Ft.getAllAngularTestabilities();let o=i.length,a=!1;const c=function(f){a=a||f,o--,0==o&&r(a)};i.forEach(function(f){f.whenStable(c)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?Ti().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:xx,useClass:ep,deps:[Wt,tp,Ql]},{provide:ep,useClass:ep,deps:[Wt,tp,Ql]}],Pw=[{provide:Jf,useValue:"root"},{provide:lo,useFactory:function A3(){return new lo},deps:[]},{provide:yc,useClass:S3,multi:!0,deps:[_n,Wt,Zl]},{provide:yc,useClass:D3,multi:!0,deps:[_n]},{provide:Pp,useClass:Pp,deps:[xc,Za,Ka,Sw]},{provide:ov,useExisting:Pp},{provide:xw,useExisting:Za},{provide:Za,useClass:Za,deps:[_n]},{provide:xc,useClass:xc,deps:[yc,Wt]},{provide:fw,useClass:p3,deps:[]},[]];let T3=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Ka,useValue:t.appId},{provide:vw,useExisting:Ka},f3]}}}return e.\u0275fac=function(t){return new(t||e)(ge(Rw,12))},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({providers:[...Pw,...Mw],imports:[lw,aT]}),e})(),Nw=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(ge(_n))},e.\u0275prov=Ee({token:e,factory:function(t){let r=null;return r=t?new t:function M3(){return new Nw(ge(_n))}(),r},providedIn:"root"}),e})();function Ae(...e){return Ht(e,Pr(e))}typeof window<"u"&&window;class gr extends we{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const wc=Yn(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:H3}=Array,{getPrototypeOf:j3,prototype:U3,keys:$3}=Object;function Lw(e){if(1===e.length){const n=e[0];if(H3(n))return{args:n,keys:null};if(function q3(e){return e&&"object"==typeof e&&j3(e)===U3}(n)){const t=$3(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:z3}=Array;function Vw(e){return Fe(n=>function K3(e,n){return z3(n)?e(...n):e(n)}(e,n))}function Bw(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function Vp(...e){const n=Pr(e),t=qu(e),{args:r,keys:i}=Lw(e);if(0===r.length)return Ht([],n);const o=new G(function G3(e,n,t=ie){return r=>{Hw(n,()=>{const{length:i}=e,o=new Array(i);let a=i,c=i;for(let f=0;f<i;f++)Hw(n,()=>{const y=Ht(e[f],n);let E=!1;y.subscribe(nt(r,F=>{o[f]=F,E||(E=!0,c--),c||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,n,i?a=>Bw(i,a):ie));return t?o.pipe(Vw(t)):o}function Hw(e,n,t){e?Sr(t,e,n):n()}function bc(...e){return function W3(){return ji(1)}()(Ht(e,Pr(e)))}function jw(e){return new G(n=>{gn(e()).subscribe(n)})}function Qi(e,n){const t=at(e)?e:()=>e,r=i=>i.error(t());return new G(n?i=>n.schedule(r,0,i):r)}function Bp(){return Ue((e,n)=>{let t=null;e._refCount++;const r=nt(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class Uw extends G{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ft(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new kt;const t=this.getSubject();n.add(this.source.subscribe(nt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=kt.EMPTY)}return n}refCount(){return Bp()(this)}}function qr(e,n){return Ue((t,r)=>{let i=null,o=0,a=!1;const c=()=>a&&!i&&r.complete();t.subscribe(nt(r,f=>{i?.unsubscribe();let y=0;const E=o++;gn(e(f,E)).subscribe(i=nt(r,F=>r.next(n?n(f,F,E,y++):F),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function es(e){return e<=0?()=>Er:Ue((n,t)=>{let r=0;n.subscribe(nt(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function hn(e,n){return Ue((t,r)=>{let i=0;t.subscribe(nt(r,o=>e.call(n,o,i++)&&r.next(o)))})}function Sc(e){return Ue((n,t)=>{let r=!1;n.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function $w(e=X3){return Ue((n,t)=>{let r=!1;n.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function X3(){return new wc}function zr(e,n){const t=arguments.length>=2;return r=>r.pipe(e?hn((i,o)=>e(i,o,r)):ie,es(1),t?Sc(n):$w(()=>new wc))}function ts(e,n){return at(n)?Jt(e,n,1):Jt(e,1)}function Sn(e,n,t){const r=at(e)||n||t?{next:e,error:n,complete:t}:e;return r?Ue((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let c=!0;i.subscribe(nt(o,f=>{var y;null===(y=r.next)||void 0===y||y.call(r,f),o.next(f)},()=>{var f;c=!1,null===(f=r.complete)||void 0===f||f.call(r),o.complete()},f=>{var y;c=!1,null===(y=r.error)||void 0===y||y.call(r,f),o.error(f)},()=>{var f,y;c&&(null===(f=r.unsubscribe)||void 0===f||f.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):ie}function mr(e){return Ue((n,t)=>{let o,r=null,i=!1;r=n.subscribe(nt(t,void 0,void 0,a=>{o=gn(e(a,mr(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function qw(e,n){return Ue(function Y3(e,n,t,r,i){return(o,a)=>{let c=t,f=n,y=0;o.subscribe(nt(a,E=>{const F=y++;f=c?e(f,E,F):(c=!0,E),r&&a.next(f)},i&&(()=>{c&&a.next(f),a.complete()})))}}(e,n,arguments.length>=2,!0))}function Hp(e){return e<=0?()=>Er:Ue((n,t)=>{let r=[];n.subscribe(nt(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zw(e,n){const t=arguments.length>=2;return r=>r.pipe(e?hn((i,o)=>e(i,o,r)):ie,Hp(1),t?Sc(n):$w(()=>new wc))}function Kw(e){return Fe(()=>e)}function jp(e){return Ue((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const ze="primary",Qa=Symbol("RouteTitle");class Q3{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ro(e){return new Q3(e)}function e5(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const a=r[o],c=e[o];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function li(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Gw(e[i],n[i]))return!1;return!0}function Gw(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function Ww(e){return Array.prototype.concat.apply([],e)}function Jw(e){return e.length>0?e[e.length-1]:null}function An(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function ns(e){return Eh(e)?e:Oa(e)?Ht(Promise.resolve(e)):Ae(e)}const Ec=!1,n5={exact:function Zw(e,n,t){if(!Ps(e.segments,n.segments)||!Cc(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!Zw(e.children[r],n.children[r],t))return!1;return!0},subset:Qw},Xw={exact:function r5(e,n){return li(e,n)},subset:function i5(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Gw(e[t],n[t]))},ignored:()=>!0};function Yw(e,n,t){return n5[t.paths](e.root,n.root,t.matrixParams)&&Xw[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function Qw(e,n,t){return eb(e,n,n.segments,t)}function eb(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Ps(i,t)||n.hasChildren()||!Cc(i,t,r))}if(e.segments.length===t.length){if(!Ps(e.segments,t)||!Cc(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!Qw(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Ps(e.segments,i)&&Cc(e.segments,i,r)&&e.children[ze])&&eb(e.children[ze],n,o,r)}}function Cc(e,n,t){return n.every((r,i)=>Xw[t](e[i].parameters,r.parameters))}class rs{constructor(n=new tt([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return a5.serialize(this)}}class tt{constructor(n,t){this.segments=n,this.children=t,this.parent=null,An(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dc(this)}}class eu{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return rb(this)}}function Ps(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let tu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(){return new Up},providedIn:"root"}),e})();class Up{parse(n){const t=new m5(n);return new rs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${nu(n.root,!0)}`,r=function c5(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${_c(t)}=${_c(i)}`).join("&"):`${_c(t)}=${_c(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function u5(e){return encodeURI(e)}(n.fragment)}`:""}`}}const a5=new Up;function Dc(e){return e.segments.map(n=>rb(n)).join("/")}function nu(e,n){if(!e.hasChildren())return Dc(e);if(n){const t=e.children[ze]?nu(e.children[ze],!1):"",r=[];return An(e.children,(i,o)=>{o!==ze&&r.push(`${o}:${nu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function o5(e,n){let t=[];return An(e.children,(r,i)=>{i===ze&&(t=t.concat(n(r,i)))}),An(e.children,(r,i)=>{i!==ze&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===ze?[nu(e.children[ze],!1)]:[`${i}:${nu(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ze]?`${Dc(e)}/${t[0]}`:`${Dc(e)}/(${t.join("//")})`}}function tb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _c(e){return tb(e).replace(/%3B/gi,";")}function $p(e){return tb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ac(e){return decodeURIComponent(e)}function nb(e){return Ac(e.replace(/\+/g,"%20"))}function rb(e){return`${$p(e.path)}${function l5(e){return Object.keys(e).map(n=>`;${$p(n)}=${$p(e[n])}`).join("")}(e.parameters)}`}const d5=/^[^\/()?;=#]+/;function Ic(e){const n=e.match(d5);return n?n[0]:""}const f5=/^[^=?&#]+/,p5=/^[^&#]+/;class m5{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[ze]=new tt(n,t)),r}parseSegment(){const n=Ic(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new fe(4009,Ec);return this.capture(n),new eu(Ac(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=Ic(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ic(this.remaining);i&&(r=i,this.capture(r))}n[Ac(t)]=Ac(r)}parseQueryParam(n){const t=function h5(e){const n=e.match(f5);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function g5(e){const n=e.match(p5);return n?n[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=nb(t),o=nb(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ic(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new fe(4010,Ec);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=ze);const a=this.parseChildren();t[o]=1===Object.keys(a).length?a[ze]:new tt([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new fe(4011,Ec)}}function qp(e){return e.segments.length>0?new tt([],{[ze]:e}):e}function Fc(e){const n={};for(const r of Object.keys(e.children)){const o=Fc(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function v5(e){if(1===e.numberOfChildren&&e.children[ze]){const n=e.children[ze];return new tt(e.segments.concat(n.segments),n.children)}return e}(new tt(e.segments,n))}function Ns(e){return e instanceof rs}const zp=!1;function y5(e,n,t,r,i){if(0===t.length)return Mo(n.root,n.root,n.root,r,i);const o=function ub(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new ab(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return An(o.outlets,(f,y)=>{c[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((c,f)=>{0==f&&"."===c||(0==f&&""===c?t=!0:".."===c?n++:""!=c&&i.push(c))}),i):[...i,o]},[]);return new ab(t,n,r)}(t);return o.toRoot()?Mo(n.root,n.root,new tt([],{}),r,i):function a(f){const y=function w5(e,n,t,r){if(e.isAbsolute)return new Po(n.root,!0,0);if(-1===r)return new Po(t,t===n.root,0);return function lb(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new fe(4005,zp&&"Invalid number of '../'");i=r.segments.length}return new Po(r,!1,i-o)}(t,r+(ru(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,f),E=y.processChildren?No(y.segmentGroup,y.index,o.commands):Kp(y.segmentGroup,y.index,o.commands);return Mo(n.root,y.segmentGroup,E,r,i)}(e.snapshot?._lastPathIndex)}function ru(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function iu(e){return"object"==typeof e&&null!=e&&e.outlets}function Mo(e,n,t,r,i){let a,o={};r&&An(r,(f,y)=>{o[y]=Array.isArray(f)?f.map(E=>`${E}`):`${f}`}),a=e===n?t:ob(e,n,t);const c=qp(Fc(a));return new rs(c,o,i)}function ob(e,n,t){const r={};return An(e.children,(i,o)=>{r[o]=i===n?t:ob(i,n,t)}),new tt(e.segments,r)}class ab{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&ru(r[0]))throw new fe(4003,zp&&"Root segment cannot have matrix parameters");const i=r.find(iu);if(i&&i!==Jw(r))throw new fe(4004,zp&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Po{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function Kp(e,n,t){if(e||(e=new tt([],{})),0===e.segments.length&&e.hasChildren())return No(e,n,t);const r=function S5(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const a=e.segments[i],c=t[r];if(iu(c))break;const f=`${c}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!db(f,y,a))return o;r+=2}else{if(!db(f,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new tt(e.segments.slice(0,r.pathIndex),{});return o.children[ze]=new tt(e.segments.slice(r.pathIndex),e.children),No(o,0,i)}return r.match&&0===i.length?new tt(e.segments,{}):r.match&&!e.hasChildren()?Gp(e,n,t):r.match?No(e,0,i):Gp(e,n,t)}function No(e,n,t){if(0===t.length)return new tt(e.segments,{});{const r=function b5(e){return iu(e[0])?e[0].outlets:{[ze]:e}}(t),i={};return!r[ze]&&e.children[ze]&&1===e.numberOfChildren&&0===e.children[ze].segments.length?No(e.children[ze],n,t):(An(r,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[a]=Kp(e.children[a],n,o))}),An(e.children,(o,a)=>{void 0===r[a]&&(i[a]=o)}),new tt(e.segments,i))}}function Gp(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(iu(o)){const f=E5(o.outlets);return new tt(r,f)}if(0===i&&ru(t[0])){r.push(new eu(e.segments[n].path,cb(t[0]))),i++;continue}const a=iu(o)?o.outlets[ze]:`${o}`,c=i<t.length-1?t[i+1]:null;a&&c&&ru(c)?(r.push(new eu(a,cb(c))),i+=2):(r.push(new eu(a,{})),i++)}return new tt(r,{})}function E5(e){const n={};return An(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=Gp(new tt([],{}),0,t))}),n}function cb(e){const n={};return An(e,(t,r)=>n[r]=`${t}`),n}function db(e,n,t){return e==t.path&&li(n,t.parameters)}const su="imperative";class ci{constructor(n,t){this.id=n,this.url=t}}class Wp extends ci{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Os extends ci{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tc extends ci{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rc extends ci{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=16}}class Jp extends ci{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class C5 extends ci{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D5 extends ci{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _5 extends ci{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class A5 extends ci{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I5 extends ci{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F5{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T5{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class R5{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M5{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P5{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N5{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fb{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let L5=(()=>{class e{createUrlTree(t,r,i,o,a,c){return y5(t||r.root,i,o,a,c)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),B5=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(n){return L5.\u0275fac(n)},providedIn:"root"}),e})();class hb{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=Xp(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=Xp(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=Yp(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Yp(n,this._root).map(t=>t.value)}}function Xp(e,n){if(e===n.value)return n;for(const t of n.children){const r=Xp(e,t);if(r)return r}return null}function Yp(e,n){if(e===n.value)return[n];for(const t of n.children){const r=Yp(e,t);if(r.length)return r.unshift(n),r}return[]}class Pi{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Oo(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class pb extends hb{constructor(n,t){super(n),this.snapshot=t,Zp(this,n)}toString(){return this.snapshot.toString()}}function gb(e,n){const t=function H5(e,n){const a=new Mc([],{},{},"",{},ze,n,null,e.root,-1,{});return new vb("",new Pi(a,[]))}(e,n),r=new gr([new eu("",{})]),i=new gr({}),o=new gr({}),a=new gr({}),c=new gr(""),f=new is(r,i,a,c,o,ze,n,t.root);return f.snapshot=t.root,new pb(new Pi(f,[]),t)}class is{constructor(n,t,r,i,o,a,c,f){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.title=this.data?.pipe(Fe(y=>y[Qa]))??Ae(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Fe(n=>Ro(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Fe(n=>Ro(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mb(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function j5(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Mc{get title(){return this.data?.[Qa]}constructor(n,t,r,i,o,a,c,f,y,E,F){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=E,this._resolve=F}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vb extends hb{constructor(n,t){super(t),this.url=n,Zp(this,t)}toString(){return yb(this._root)}}function Zp(e,n){n.value._routerState=e,n.children.forEach(t=>Zp(e,t))}function yb(e){const n=e.children.length>0?` { ${e.children.map(yb).join(", ")} } `:"";return`${e.value}${n}`}function Qp(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,li(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),li(n.params,t.params)||e.params.next(t.params),function t5(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!li(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),li(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function eg(e,n){const t=li(e.params,n.params)&&function s5(e,n){return Ps(e,n)&&e.every((t,r)=>li(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||eg(e.parent,n.parent))}function ou(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function $5(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ou(e,r,i);return ou(e,r)})}(e,n,t);return new Pi(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(c=>ou(e,c)),a}}const r=function q5(e){return new is(new gr(e.url),new gr(e.params),new gr(e.queryParams),new gr(e.fragment),new gr(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>ou(e,o));return new Pi(r,i)}}const tg="ngNavigationCancelingError";function xb(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Ns(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=wb(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function wb(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[tg]=!0,r.cancellationCode=n,t&&(r.url=t),r}function bb(e){return Sb(e)&&Ns(e.url)}function Sb(e){return e&&e[tg]}class z5{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new au,this.attachRef=null}}let au=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new z5,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Pc=!1;let ng=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ze,this.activateEvents=new Gt,this.deactivateEvents=new Gt,this.attachEvents=new Gt,this.detachEvents=new Gt,this.parentContexts=h(au),this.location=h(Hr),this.changeDetector=h(nc),this.environmentInjector=h(ni)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,Pc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,Pc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,Pc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new fe(4013,Pc);this._activatedRoute=t;const i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,f=new K5(t,c,i.injector);if(r&&function G5(e){return!!e.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(a);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(a,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=be({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Y]}),e})();class K5{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===is?this.route:n===au?this.childContexts:this.parent.get(n,t)}}let rg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lr({type:e,selectors:[["ng-component"]],standalone:!0,features:[D1],decls:1,vars:0,template:function(t,r){1&t&&Is(0,"router-outlet")},dependencies:[ng],encapsulation:2}),e})();function Eb(e,n){return e.providers&&!e._injector&&(e._injector=Kl(e.providers,n,`Route: ${e.path}`)),e._injector??n}function sg(e){const n=e.children&&e.children.map(sg),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==ze&&(t.component=rg),t}function Rr(e){return e.outlet||ze}function Cb(e,n){const t=e.filter(r=>Rr(r)===n);return t.push(...e.filter(r=>Rr(r)!==n)),t}function uu(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Z5{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Qp(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=Oo(t);n.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),An(i,(o,a)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Oo(n);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:c})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Oo(n);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=Oo(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new N5(o.value.snapshot))}),n.children.length&&this.forwardEvent(new M5(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(Qp(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Qp(c.route.value),this.activateChildRoutes(n,null,a.children)}else{const c=uu(i.snapshot),f=c?.get(Ia)??null;a.attachRef=null,a.route=i,a.resolver=f,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}}else this.activateChildRoutes(n,null,r)}}class Db{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Nc{constructor(n,t){this.component=n,this.route=t}}function Q5(e,n,t){const r=e._root;return lu(r,n?n._root:null,t,[r.value])}function ko(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function jd(e){return null!==qs(e)}(e)?n.get(e):e:r}function lu(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Oo(n);return e.children.forEach(a=>{(function t8(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,c=t?t.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const f=function n8(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Ps(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Ps(e.url,n.url)||!li(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eg(e,n)||!li(e.queryParams,n.queryParams);default:return!eg(e,n)}}(a,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new Db(r)):(o.data=a.data,o._resolvedData=a._resolvedData),lu(e,n,o.component?c?c.children:null:t,r,i),f&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Nc(c.outlet.component,a))}else a&&cu(n,c,i),i.canActivateChecks.push(new Db(r)),lu(e,null,o.component?c?c.children:null:t,r,i)})(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),An(o,(a,c)=>cu(a,t.getContext(c),i)),i}function cu(e,n,t){const r=Oo(e),i=e.value;An(r,(o,a)=>{cu(o,i.component?n?n.children.getContext(a):null:n,t)}),t.canDeactivateChecks.push(new Nc(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function du(e){return"function"==typeof e}function og(e){return e instanceof wc||"EmptyError"===e?.name}const Oc=Symbol("INITIAL_VALUE");function Lo(){return qr(e=>Vp(e.map(n=>n.pipe(es(1),function J3(...e){const n=Pr(e);return Ue((t,r)=>{(n?bc(e,t,n):bc(e,t)).subscribe(r)})}(Oc)))).pipe(Fe(n=>{for(const t of n)if(!0!==t){if(t===Oc)return Oc;if(!1===t||t instanceof rs)return t}return!0}),hn(n=>n!==Oc),es(1)))}function _b(e){return function te(...e){return ee(e)}(Sn(n=>{if(Ns(n))throw xb(0,n)}),Fe(n=>!0===n))}const ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ab(e,n,t,r,i){const o=ug(e,n,t);return o.matched?function x8(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?Ae(i.map(a=>{const c=ko(a,e);return ns(function u8(e){return e&&du(e.canMatch)}(c)?c.canMatch(n,t):e.runInContext(()=>c(n,t)))})).pipe(Lo(),_b()):Ae(!0)}(r=Eb(n,r),n,t).pipe(Fe(a=>!0===a?o:{...ag})):Ae(o)}function ug(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...ag}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||e5)(t,e,n);if(!i)return{...ag};const o={};An(i.posParams,(c,f)=>{o[f]=c.path});const a=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function kc(e,n,t,r){if(t.length>0&&function S8(e,n,t){return t.some(r=>Lc(e,n,r)&&Rr(r)!==ze)}(e,t,r)){const o=new tt(n,function b8(e,n,t,r){const i={};i[ze]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&Rr(o)!==ze){const a=new tt([],{});a._sourceSegment=e,a._segmentIndexShift=n.length,i[Rr(o)]=a}return i}(e,n,r,new tt(t,e.children)));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function E8(e,n,t){return t.some(r=>Lc(e,n,r))}(e,t,r)){const o=new tt(e.segments,function w8(e,n,t,r,i){const o={};for(const a of r)if(Lc(e,t,a)&&!i[Rr(a)]){const c=new tt([],{});c._sourceSegment=e,c._segmentIndexShift=n.length,o[Rr(a)]=c}return{...i,...o}}(e,n,t,r,e.children));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}const i=new tt(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:t}}function Lc(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ib(e,n,t,r){return!!(Rr(e)===r||r!==ze&&Lc(n,t,e))&&("**"===e.path||ug(n,e,t).matched)}function Fb(e,n,t){return 0===n.length&&!e.children[t]}const Vc=!1;class Bc{constructor(n){this.segmentGroup=n||null}}class Tb{constructor(n){this.urlTree=n}}function fu(e){return Qi(new Bc(e))}function Rb(e){return Qi(new Tb(e))}class A8{constructor(n,t,r,i,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const n=kc(this.urlTree.root,[],[],this.config).segmentGroup,t=new tt(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,ze).pipe(Fe(o=>this.createUrlTree(Fc(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mr(o=>{if(o instanceof Tb)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Bc?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,ze).pipe(Fe(i=>this.createUrlTree(Fc(i),n.queryParams,n.fragment))).pipe(mr(i=>{throw i instanceof Bc?this.noMatchError(i):i}))}noMatchError(n){return new fe(4002,Vc)}createUrlTree(n,t,r){const i=qp(n);return new rs(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Fe(o=>new tt([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Ht(i).pipe(ts(o=>{const a=r.children[o],c=Cb(t,o);return this.expandSegmentGroup(n,c,a,o).pipe(Fe(f=>({segment:f,outlet:o})))}),qw((o,a)=>(o[a.outlet]=a.segment,o),{}),zw())}expandSegment(n,t,r,i,o,a){return Ht(r).pipe(ts(c=>this.expandSegmentAgainstRoute(n,t,r,c,i,o,a).pipe(mr(y=>{if(y instanceof Bc)return Ae(null);throw y}))),zr(c=>!!c),mr((c,f)=>{if(og(c))return Fb(t,i,o)?Ae(new tt([],{})):fu(t);throw c}))}expandSegmentAgainstRoute(n,t,r,i,o,a,c){return Ib(i,t,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a):fu(t):fu(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Rb(o):this.lineralizeSegments(r,o).pipe(Jt(a=>{const c=new tt(a,{});return this.expandSegment(n,c,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a){const{matched:c,consumedSegments:f,remainingSegments:y,positionalParamSegments:E}=ug(t,i,o);if(!c)return fu(t);const F=this.applyRedirectCommands(f,i.redirectTo,E);return i.redirectTo.startsWith("/")?Rb(F):this.lineralizeSegments(i,F).pipe(Jt(N=>this.expandSegment(n,t,r,N.concat(y),a,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){return"**"===r.path?(n=Eb(r,n),r.loadChildren?(r._loadedRoutes?Ae({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Fe(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new tt(i,{})))):Ae(new tt(i,{}))):Ab(t,r,i,n).pipe(qr(({matched:a,consumedSegments:c,remainingSegments:f})=>a?this.getChildConfig(n=r._injector??n,r,i).pipe(Jt(E=>{const F=E.injector??n,N=E.routes,{segmentGroup:L,slicedSegments:U}=kc(t,c,f,N),Z=new tt(L.segments,L.children);if(0===U.length&&Z.hasChildren())return this.expandChildren(F,N,Z).pipe(Fe(ae=>new tt(c,ae)));if(0===N.length&&0===U.length)return Ae(new tt(c,{}));const re=Rr(r)===o;return this.expandSegment(F,Z,N,U,re?ze:o,!0).pipe(Fe(ce=>new tt(c.concat(ce.segments),ce.children)))})):fu(t)))}getChildConfig(n,t,r){return t.children?Ae({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?Ae({routes:t._loadedRoutes,injector:t._loadedInjector}):function y8(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?Ae(!0):Ae(i.map(a=>{const c=ko(a,e);return ns(function i8(e){return e&&du(e.canLoad)}(c)?c.canLoad(n,t):e.runInContext(()=>c(n,t)))})).pipe(Lo(),_b())}(n,t,r).pipe(Jt(i=>i?this.configLoader.loadChildren(n,t).pipe(Sn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function D8(e){return Qi(wb(Vc,3))}())):Ae({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ae(r);if(i.numberOfChildren>1||!i.children[ze])return n.redirectTo,Qi(new fe(4e3,Vc));i=i.children[ze]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new rs(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return An(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[o]=t[c]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let a={};return An(t.children,(c,f)=>{a[f]=this.createSegmentGroup(n,c,r,i)}),new tt(o,a)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new fe(4001,Vc);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class F8{}class M8{constructor(n,t,r,i,o,a,c){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c}recognize(){const n=kc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,ze).pipe(Fe(t=>{if(null===t)return null;const r=new Mc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ze,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Pi(r,t),o=new vb(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(n){const t=n.value,r=mb(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return Ht(Object.keys(r.children)).pipe(ts(i=>{const o=r.children[i],a=Cb(t,i);return this.processSegmentGroup(n,a,o,i)}),qw((i,o)=>i&&o?(i.push(...o),i):null),function Z3(e,n=!1){return Ue((t,r)=>{let i=0;t.subscribe(nt(r,o=>{const a=e(o,i++);(a||n)&&r.next(o),!a&&r.complete()}))})}(i=>null!==i),Sc(null),zw(),Fe(i=>{if(null===i)return null;const o=Pb(i);return function P8(e){e.sort((n,t)=>n.value.outlet===ze?-1:t.value.outlet===ze?1:n.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(n,t,r,i,o){return Ht(t).pipe(ts(a=>this.processSegmentAgainstRoute(a._injector??n,a,r,i,o)),zr(a=>!!a),mr(a=>{if(og(a))return Fb(r,i,o)?Ae([]):Ae(null);throw a}))}processSegmentAgainstRoute(n,t,r,i,o){if(t.redirectTo||!Ib(t,r,i,o))return Ae(null);let a;if("**"===t.path){const c=i.length>0?Jw(i).parameters:{},f=Ob(r)+i.length;a=Ae({snapshot:new Mc(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kb(t),Rr(t),t.component??t._loadedComponent??null,t,Nb(r),f,Lb(t)),consumedSegments:[],remainingSegments:[]})}else a=Ab(r,t,i,n).pipe(Fe(({matched:c,consumedSegments:f,remainingSegments:y,parameters:E})=>{if(!c)return null;const F=Ob(r)+f.length;return{snapshot:new Mc(f,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kb(t),Rr(t),t.component??t._loadedComponent??null,t,Nb(r),F,Lb(t)),consumedSegments:f,remainingSegments:y}}));return a.pipe(qr(c=>{if(null===c)return Ae(null);const{snapshot:f,consumedSegments:y,remainingSegments:E}=c;n=t._injector??n;const F=t._loadedInjector??n,N=function N8(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:L,slicedSegments:U}=kc(r,y,E,N.filter(re=>void 0===re.redirectTo));if(0===U.length&&L.hasChildren())return this.processChildren(F,N,L).pipe(Fe(re=>null===re?null:[new Pi(f,re)]));if(0===N.length&&0===U.length)return Ae([new Pi(f,[])]);const Z=Rr(t)===o;return this.processSegment(F,N,L,U,Z?ze:o).pipe(Fe(re=>null===re?null:[new Pi(f,re)]))}))}}function O8(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function Pb(e){const n=[],t=new Set;for(const r of e){if(!O8(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=Pb(r.children);n.push(new Pi(r.value,i))}return n.filter(r=>!t.has(r))}function Nb(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function Ob(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function kb(e){return e.data||{}}function Lb(e){return e.resolve||{}}function Vb(e){return"string"==typeof e.title||null===e.title}function lg(e){return qr(n=>{const t=e(n);return t?Ht(t).pipe(Fe(()=>n)):Ae(n)})}const Vo=new _e("ROUTES");let cg=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ns(t.loadComponent()).pipe(Fe(Hb),Sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),jp(()=>{this.componentLoaders.delete(t)})),i=new Uw(r,()=>new we).pipe(Bp());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Fe(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,E=!1;Array.isArray(c)?y=c:(f=c.create(t).injector,y=Ww(f.get(Vo,[],Oe.Self|Oe.Optional)));return{routes:y.map(sg),injector:f}}),jp(()=>{this.childrenLoaders.delete(r)})),a=new Uw(o,()=>new we).pipe(Bp());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(t){return ns(t()).pipe(Fe(Hb),Jt(i=>i instanceof E1||Array.isArray(i)?Ae(i):Ht(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(t){return new(t||e)(ge(Lr),ge(px))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Hb(e){return function q8(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let jc=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new we,this.configLoader=h(cg),this.environmentInjector=h(ni),this.urlSerializer=h(tu),this.rootContexts=h(au),this.navigationId=0,this.afterPreactivation=()=>Ae(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new T5(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new F5(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new gr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:su,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hn(r=>0!==r.id),Fe(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),qr(r=>{let i=!1,o=!1;return Ae(r).pipe(Sn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qr(a=>{const c=t.browserUrlTree.toString(),f=!t.navigated||a.extractedUrl.toString()!==c||c!==t.currentUrlTree.toString();if(!f&&"reload"!==(a.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const E="";return this.events.next(new Rc(a.id,t.serializeUrl(r.rawUrl),E,0)),t.rawUrlTree=a.rawUrl,a.resolve(null),Er}if(t.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return jb(a.source)&&(t.browserUrlTree=a.extractedUrl),Ae(a).pipe(qr(E=>{const F=this.transitions?.getValue();return this.events.next(new Wp(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),F!==this.transitions?.getValue()?Er:Promise.resolve(E)}),function I8(e,n,t,r){return qr(i=>function _8(e,n,t,r,i){return new A8(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Fe(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Sn(E=>{this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},r.urlAfterRedirects=E.urlAfterRedirects}),function L8(e,n,t,r,i){return Jt(o=>function R8(e,n,t,r,i,o,a="emptyOnly"){return new M8(e,n,t,r,i,a,o).recognize().pipe(qr(c=>null===c?function T8(e){return new G(n=>n.error(e))}(new F8):Ae(c)))}(e,n,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(Fe(a=>({...o,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Sn(E=>{if(r.targetSnapshot=E.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!E.extras.skipLocationChange){const N=t.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);t.setBrowserUrl(N,E)}t.browserUrlTree=E.urlAfterRedirects}const F=new C5(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(F)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:E,extractedUrl:F,source:N,restoredState:L,extras:U}=a,Z=new Wp(E,this.urlSerializer.serialize(F),N,L);this.events.next(Z);const re=gb(F,this.rootComponentType).snapshot;return Ae(r={...a,targetSnapshot:re,urlAfterRedirects:F,extras:{...U,skipLocationChange:!1,replaceUrl:!1}})}{const E="";return this.events.next(new Rc(a.id,t.serializeUrl(r.extractedUrl),E,1)),t.rawUrlTree=a.rawUrl,a.resolve(null),Er}}),Sn(a=>{const c=new D5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Fe(a=>r={...a,guards:Q5(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function c8(e,n){return Jt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return 0===a.length&&0===o.length?Ae({...t,guardsResult:!0}):function d8(e,n,t,r){return Ht(e).pipe(Jt(i=>function v8(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?Ae(o.map(c=>{const f=uu(n)??i,y=ko(c,f);return ns(function a8(e){return e&&du(e.canDeactivate)}(y)?y.canDeactivate(e,n,t,r):f.runInContext(()=>y(e,n,t,r))).pipe(zr())})).pipe(Lo()):Ae(!0)}(i.component,i.route,t,n,r)),zr(i=>!0!==i,!0))}(a,r,i,e).pipe(Jt(c=>c&&function r8(e){return"boolean"==typeof e}(c)?function f8(e,n,t,r){return Ht(n).pipe(ts(i=>bc(function p8(e,n){return null!==e&&n&&n(new R5(e)),Ae(!0)}(i.route.parent,r),function h8(e,n){return null!==e&&n&&n(new P5(e)),Ae(!0)}(i.route,r),function m8(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>function e8(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(a)).filter(a=>null!==a).map(a=>jw(()=>Ae(a.guards.map(f=>{const y=uu(a.node)??t,E=ko(f,y);return ns(function o8(e){return e&&du(e.canActivateChild)}(E)?E.canActivateChild(r,e):y.runInContext(()=>E(r,e))).pipe(zr())})).pipe(Lo())));return Ae(o).pipe(Lo())}(e,i.path,t),function g8(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Ae(!0);const i=r.map(o=>jw(()=>{const a=uu(n)??t,c=ko(o,a);return ns(function s8(e){return e&&du(e.canActivate)}(c)?c.canActivate(n,e):a.runInContext(()=>c(n,e))).pipe(zr())}));return Ae(i).pipe(Lo())}(e,i.route,t))),zr(i=>!0!==i,!0))}(r,o,e,n):Ae(c)),Fe(c=>({...t,guardsResult:c})))})}(this.environmentInjector,a=>this.events.next(a)),Sn(a=>{if(r.guardsResult=a.guardsResult,Ns(a.guardsResult))throw xb(0,a.guardsResult);const c=new _5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),hn(a=>!!a.guardsResult||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),lg(a=>{if(a.guards.canActivateChecks.length)return Ae(a).pipe(Sn(c=>{const f=new A5(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),qr(c=>{let f=!1;return Ae(c).pipe(function V8(e,n){return Jt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ae(t);let o=0;return Ht(i).pipe(ts(a=>function B8(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!Vb(i)&&(o[Qa]=i.title),function H8(e,n,t,r){const i=function j8(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ae({});const o={};return Ht(i).pipe(Jt(a=>function U8(e,n,t,r){const i=uu(n)??r,o=ko(e,i);return ns(o.resolve?o.resolve(n,t):i.runInContext(()=>o(n,t)))}(e[a],n,t,r).pipe(zr(),Sn(c=>{o[a]=c}))),Hp(1),Kw(o),mr(a=>og(a)?Er:Qi(a)))}(o,e,n,r).pipe(Fe(a=>(e._resolvedData=a,e.data=mb(e,t).resolve,i&&Vb(i)&&(e.data[Qa]=i.title),null)))}(a.route,r,e,n)),Sn(()=>o++),Hp(1),Jt(a=>o===i.length?Ae(t):Er))})}(t.paramsInheritanceStrategy,this.environmentInjector),Sn({next:()=>f=!0,complete:()=>{f||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Sn(c=>{const f=new I5(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),lg(a=>{const c=f=>{const y=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(f.routeConfig).pipe(Sn(E=>{f.component=E}),Fe(()=>{})));for(const E of f.children)y.push(...c(E));return y};return Vp(c(a.targetSnapshot.root)).pipe(Sc(),es(1))}),lg(()=>this.afterPreactivation()),Fe(a=>{const c=function U5(e,n,t){const r=ou(e,n._root,t?t._root:void 0);return new pb(r,n)}(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),Sn(a=>{t.currentUrlTree=a.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),t.routerState=a.targetRouterState,"deferred"===t.urlUpdateStrategy&&(a.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,a),t.browserUrlTree=a.urlAfterRedirects)}),((e,n,t)=>Fe(r=>(new Z5(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a)),Sn({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Os(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),jp(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),mr(a=>{if(o=!0,Sb(a)){bb(a)||(t.navigated=!0,t.restoreHistory(r,!0));const c=new Tc(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(c),bb(a)){const f=t.urlHandlingStrategy.merge(a.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||jb(r.source)};t.scheduleNavigation(f,su,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const c=new Jp(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(c);try{r.resolve(t.errorHandler(a))}catch(f){r.reject(f)}}return Er}))}))}cancelNavigationTransition(t,r,i){const o=new Tc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function jb(e){return e!==su}let Ub=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ze);return r}getResolvedTitleForRoute(t){return t.data[Qa]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(){return h(z8)},providedIn:"root"}),e})(),z8=(()=>{class e extends Ub{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(ge(Nw))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),K8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(){return h(W8)},providedIn:"root"}),e})();class G8{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let W8=(()=>{class e extends G8{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Uc=new _e("",{providedIn:"root",factory:()=>({})});let X8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:function(){return h(Y8)},providedIn:"root"}),e})(),Y8=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Z8(e){throw e}function Q8(e,n,t){return n.parse("/")}const e6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},t6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let En=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=h(AF),this.isNgZoneEnabled=!1,this.options=h(Uc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Z8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Q8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=h(X8),this.routeReuseStrategy=h(K8),this.urlCreationStrategy=h(B5),this.titleStrategy=h(Ub),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ww(h(Vo,{optional:!0})??[]),this.navigationTransitions=h(jc),this.urlSerializer=h(tu),this.location=h(fp),this.isNgZoneEnabled=h(Wt)instanceof Wt&&Wt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new rs,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gb(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),su,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(o.state=f)}const c=this.parseUrl(t);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(sg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:f}=r,y=f?this.currentUrlTree.fragment:a;let E=null;switch(c){case"merge":E={...this.currentUrlTree.queryParams,...o};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=o||null}return null!==E&&(E=this.removeEmptyProps(E)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,E,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ns(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,su,null,r)}navigate(t,r={skipLocationChange:!1}){return function n6(e){for(let n=0;n<e.length;n++){const t=e[n];if(null==t)throw new fe(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...e6}:!1===r?{...t6}:r,Ns(t))return Yw(this.currentUrlTree,t,i);const o=this.parseUrl(t);return Yw(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,f,y,E;return a?(c=a.resolve,f=a.reject,y=a.promise):y=new Promise((F,N)=>{c=F,f=N}),E="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:E,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),$c=(()=>{class e{constructor(t,r,i,o,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new we;const f=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=To(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=To(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=To(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function Gm(e,n,t){return function AC(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Km:zf}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(se(En),se(is),function hl(e){return function ZE(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(L0(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Be(),e)}("tabindex"),se(Ci),se(hr),se(Ms))},e.\u0275dir=be({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&Pt("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&si("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Y]}),e})();class $b{}let s6=(()=>{class e{constructor(t,r,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(hn(t=>t instanceof Os),ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Kl(o.providers,t,`Route: ${o.path}`));const a=o._injector??t,c=o._loadedInjector??a;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(a,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Ht(i).pipe(ji())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ae(null);const o=i.pipe(Jt(a=>null===a?Ae(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return r.loadComponent&&!r._loadedComponent?Ht([o,this.loader.loadComponent(r)]).pipe(ji()):o})}}return e.\u0275fac=function(t){return new(t||e)(ge(En),ge(px),ge(ni),ge($b),ge(cg))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const fg=new _e("");let qb=(()=>{class e{constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Os&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(t){!function Dv(){throw new Error("invalid")}()},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();var vr=(()=>((vr=vr||{})[vr.COMPLETE=0]="COMPLETE",vr[vr.FAILED=1]="FAILED",vr[vr.REDIRECTING=2]="REDIRECTING",vr))();const Bo=!1;function ss(e,n){return{\u0275kind:e,\u0275providers:n}}const hg=new _e("",{providedIn:"root",factory:()=>!1});function Kb(){const e=h(Lr);return n=>{const t=e.get(ec);if(n!==t.components[0])return;const r=e.get(En),i=e.get(Gb);1===e.get(pg)&&r.initialNavigation(),e.get(Wb,null,Oe.Optional)?.setUpPreloading(),e.get(fg,null,Oe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Gb=new _e(Bo?"bootstrap done indicator":"",{factory:()=>new we}),pg=new _e(Bo?"initial navigation":"",{providedIn:"root",factory:()=>1});function c6(){let e=[];return e=Bo?[{provide:Cl,multi:!0,useFactory:()=>{const n=h(En);return()=>n.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function O5(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ss(1,e)}const Wb=new _e(Bo?"router preloader":"");function d6(e){return ss(0,[{provide:Wb,useExisting:s6},{provide:$b,useExisting:e}])}const hu=!1,Jb=new _e(hu?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),f6=[fp,{provide:tu,useClass:Up},En,au,{provide:is,useFactory:function zb(e){return e.routerState.root},deps:[En]},cg,hu?{provide:hg,useValue:!0}:[]];function h6(){return new bx("Router",En)}let Xb=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[f6,hu&&r?.enableTracing?c6().\u0275providers:[],{provide:Vo,multi:!0,useValue:t},{provide:Jb,useFactory:v6,deps:[[En,new ya,new xa]]},{provide:Uc,useValue:r||{}},r?.useHash?{provide:Ms,useClass:pT}:{provide:Ms,useClass:qx},{provide:fg,useFactory:()=>{const e=h(P4),n=h(Wt),t=h(Uc),r=h(jc),i=h(tu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new qb(i,r,e,n,t)}},r?.preloadingStrategy?d6(r.preloadingStrategy).\u0275providers:[],{provide:bx,multi:!0,useFactory:h6},r?.initialNavigation?y6(r):[],[{provide:Yb,useFactory:Kb},{provide:hx,multi:!0,useExisting:Yb}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Vo,multi:!0,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(ge(Jb,8))},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({imports:[rg]}),e})();function v6(e){if(hu&&e)throw new fe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function y6(e){return["disabled"===e.initialNavigation?ss(3,[{provide:Xl,multi:!0,useFactory:()=>{const n=h(En);return()=>{n.setUpLocationChangeListener()}}},{provide:pg,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?ss(2,[{provide:pg,useValue:0},{provide:Xl,multi:!0,deps:[Lr],useFactory:n=>{const t=n.get(fT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=n.get(En),o=n.get(Gb);(function o6(e,n){e.events.pipe(hn(t=>t instanceof Os||t instanceof Tc||t instanceof Jp||t instanceof Rc),Fe(t=>t instanceof Os||t instanceof Rc?vr.COMPLETE:t instanceof Tc&&(0===t.code||1===t.code)?vr.REDIRECTING:vr.FAILED),hn(t=>t!==vr.REDIRECTING),es(1)).subscribe(()=>{n()})})(i,()=>{r(!0)}),n.get(jc).afterPreactivation=()=>(r(!0),o.closed?Ae(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const Yb=new _e(hu?"Router Initializer":"");class qc{}class gg{}class pn{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof pn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new pn;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pn?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let a=this.headers.get(t);if(!a)return;a=a.filter(c=>-1===o.indexOf(c)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class w6{encodeKey(n){return Zb(n)}encodeValue(n){return Zb(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const S6=/%(\d[a-f0-9])/gi,E6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Zb(e){return encodeURIComponent(e).replace(S6,(n,t)=>E6[t]??n)}function zc(e){return`${e}`}class yr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new w6,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function b6(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[a,c]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],f=t.get(a)||[];f.push(c),t.set(a,f)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(zc):[zc(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new yr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(zc(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(zc(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class C6{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function Qb(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function eS(e){return typeof Blob<"u"&&e instanceof Blob}function tS(e){return typeof FormData<"u"&&e instanceof FormData}class pu{constructor(n,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function D6(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new pn),this.context||(this.context=new C6),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const c=t.indexOf("?");this.urlWithParams=t+(-1===c?"?":c<t.length-1?"&":"")+a}}else this.params=new yr,this.urlWithParams=t}serializeBody(){return null===this.body?null:Qb(this.body)||eS(this.body)||tS(this.body)||function _6(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tS(this.body)?null:eS(this.body)?this.body.type||null:Qb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,a=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,c=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let f=n.headers||this.headers,y=n.params||this.params;const E=n.context??this.context;return void 0!==n.setHeaders&&(f=Object.keys(n.setHeaders).reduce((F,N)=>F.set(N,n.setHeaders[N]),f)),n.setParams&&(y=Object.keys(n.setParams).reduce((F,N)=>F.set(N,n.setParams[N]),y)),new pu(t,r,o,{params:y,headers:f,context:E,reportProgress:c,responseType:i,withCredentials:a})}}var on=(()=>((on=on||{})[on.Sent=0]="Sent",on[on.UploadProgress=1]="UploadProgress",on[on.ResponseHeader=2]="ResponseHeader",on[on.DownloadProgress=3]="DownloadProgress",on[on.Response=4]="Response",on[on.User=5]="User",on))();class mg{constructor(n,t=200,r="OK"){this.headers=n.headers||new pn,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class vg extends mg{constructor(n={}){super(n),this.type=on.ResponseHeader}clone(n={}){return new vg({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Kc extends mg{constructor(n={}){super(n),this.type=on.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Kc({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class nS extends mg{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function yg(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let ks=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof pu)o=t;else{let f,y;f=i.headers instanceof pn?i.headers:new pn(i.headers),i.params&&(y=i.params instanceof yr?i.params:new yr({fromObject:i.params})),o=new pu(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=Ae(o).pipe(ts(f=>this.handler.handle(f)));if(t instanceof pu||"events"===i.observe)return a;const c=a.pipe(hn(f=>f instanceof Kc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(Fe(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return c.pipe(Fe(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return c.pipe(Fe(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return c.pipe(Fe(f=>f.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new yr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,yg(i,r))}post(t,r,i={}){return this.request("POST",t,yg(i,r))}put(t,r,i={}){return this.request("PUT",t,yg(i,r))}}return e.\u0275fac=function(t){return new(t||e)(ge(qc))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();function rS(e,n){return n(e)}function A6(e,n){return(t,r)=>n.intercept(t,{handle:i=>e(i,r)})}const iS=new _e("HTTP_INTERCEPTORS"),gu=new _e("HTTP_INTERCEPTOR_FNS");function F6(){let e=null;return(n,t)=>(null===e&&(e=(h(iS,{optional:!0})??[]).reduceRight(A6,rS)),e(n,t))}let sS=(()=>{class e extends qc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(gu)));this.chain=r.reduceRight((i,o)=>function I6(e,n,t){return(r,i)=>t.runInContext(()=>n(r,o=>e(o,i)))}(i,o,this.injector),rS)}return this.chain(t,r=>this.backend.handle(r))}}return e.\u0275fac=function(t){return new(t||e)(ge(gg),ge(ni))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const P6=/^\)\]\}',?\n/;let aS=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new G(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,U)=>i.setRequestHeader(L,U.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const o=t.serializeBody();let a=null;const c=()=>{if(null!==a)return a;const L=i.statusText||"OK",U=new pn(i.getAllResponseHeaders()),Z=function N6(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||t.url;return a=new vg({headers:U,status:i.status,statusText:L,url:Z}),a},f=()=>{let{headers:L,status:U,statusText:Z,url:re}=c(),oe=null;204!==U&&(oe=typeof i.response>"u"?i.responseText:i.response),0===U&&(U=oe?200:0);let ce=U>=200&&U<300;if("json"===t.responseType&&"string"==typeof oe){const ae=oe;oe=oe.replace(P6,"");try{oe=""!==oe?JSON.parse(oe):null}catch(Ne){oe=ae,ce&&(ce=!1,oe={error:Ne,text:oe})}}ce?(r.next(new Kc({body:oe,headers:L,status:U,statusText:Z,url:re||void 0})),r.complete()):r.error(new nS({error:oe,headers:L,status:U,statusText:Z,url:re||void 0}))},y=L=>{const{url:U}=c(),Z=new nS({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:U||void 0});r.error(Z)};let E=!1;const F=L=>{E||(r.next(c()),E=!0);let U={type:on.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(U.total=L.total),"text"===t.responseType&&i.responseText&&(U.partialText=i.responseText),r.next(U)},N=L=>{let U={type:on.UploadProgress,loaded:L.loaded};L.lengthComputable&&(U.total=L.total),r.next(U)};return i.addEventListener("load",f),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",F),null!==o&&i.upload&&i.upload.addEventListener("progress",N)),i.send(o),r.next({type:on.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",f),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",F),null!==o&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(ge(fw))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const xg=new _e("XSRF_ENABLED"),uS=new _e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),lS=new _e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class cS{}let L6=(()=>{class e{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ew(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(ge(_n),ge(Zl),ge(uS))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();function V6(e,n){const t=e.url.toLowerCase();if(!h(xg)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=h(cS).getToken(),i=h(lS);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}var Qt=(()=>((Qt=Qt||{})[Qt.Interceptors=0]="Interceptors",Qt[Qt.LegacyInterceptors=1]="LegacyInterceptors",Qt[Qt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Qt[Qt.NoXsrfProtection=3]="NoXsrfProtection",Qt[Qt.JsonpSupport=4]="JsonpSupport",Qt[Qt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Qt))();function Ho(e,n){return{\u0275kind:e,\u0275providers:n}}function B6(...e){const n=[ks,aS,sS,{provide:qc,useExisting:sS},{provide:gg,useExisting:aS},{provide:gu,useValue:V6,multi:!0},{provide:xg,useValue:!0},{provide:cS,useClass:L6}];for(const t of e)n.push(...t.\u0275providers);return Ym(n)}const dS=new _e("LEGACY_INTERCEPTOR_FN");let j6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({providers:[B6(Ho(Qt.LegacyInterceptors,[{provide:dS,useFactory:F6},{provide:gu,useExisting:dS,multi:!0}]))]}),e})();function wg(e){this.message=e}(wg.prototype=new Error).name="InvalidCharacterError";var fS=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new wg("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,i=0,o=0,a="";r=n.charAt(o++);~r&&(t=i%4?64*t+r:r,i++%4)?a+=String.fromCharCode(255&t>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function Gc(e){this.message=e}(Gc.prototype=new Error).name="InvalidTokenError";const hS=function $6(e,n){if("string"!=typeof e)throw new Gc("Invalid token specified");var t=!0===(n=n||{}).header?0:1;try{return JSON.parse(function U6(e){var n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(fS(n).replace(/(.)/g,function(r,i){var o=i.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch{return fS(n)}}(e.split(".")[t]))}catch(r){throw new Gc("Invalid token specified: "+r.message)}};class Ni{constructor(){}setToken(n){n&&(this.jwtToken=n)}decodeToken(){this.jwtToken&&(this.decodedToken=hS(this.jwtToken))}getDecodeToken(){if(this.jwtToken)return hS(this.jwtToken)}getUsername(){return this.decodeToken(),this.decodedToken?this.decodedToken.name:null}getEmail(){return this.decodeToken(),this.decodedToken?this.decodedToken.email:null}getExpiryTime(){return this.decodeToken(),this.decodedToken?this.decodedToken.exp:null}isTokenExpired(){const n=+this.getExpiryTime();return!!n&&1e3*n-(new Date).getTime()<5e3}clear(){this.jwtToken=void 0,this.decodedToken=void 0}}Ni.\u0275fac=function(n){return new(n||Ni)},Ni.\u0275prov=Ee({token:Ni,factory:Ni.\u0275fac,providedIn:"root"});let mu=(()=>{class e{constructor(t,r){this.document=t,this.platformId=r,this.documentIsAccessible=function M4(e){return e===cw}(this.platformId)}static getCookieRegExp(t){const r=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+r+"|;\\s*"+r+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),e.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const i=e.getCookieRegExp(t).exec(this.document.cookie);return i[1]?e.safeDecodeURIComponent(i[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},r=this.document;return r.cookie&&""!==r.cookie&&r.cookie.split(";").forEach(i=>{const[o,a]=i.split("=");t[e.safeDecodeURIComponent(o.replace(/^ /,""))]=e.safeDecodeURIComponent(a)}),t}set(t,r,i,o,a,c,f){if(!this.documentIsAccessible)return;if("number"==typeof i||i instanceof Date||o||a||c||f)return void this.set(t,r,{expires:i,path:o,domain:a,secure:c,sameSite:f||"Lax"});let y=encodeURIComponent(t)+"="+encodeURIComponent(r)+";";const E=i||{};E.expires&&(y+="number"==typeof E.expires?"expires="+new Date((new Date).getTime()+1e3*E.expires*60*60*24).toUTCString()+";":"expires="+E.expires.toUTCString()+";"),E.path&&(y+="path="+E.path+";"),E.domain&&(y+="domain="+E.domain+";"),!1===E.secure&&"None"===E.sameSite&&(E.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),E.secure&&(y+="secure;"),E.sameSite||(E.sameSite="Lax"),y+="sameSite="+E.sameSite+";",this.document.cookie=y}delete(t,r,i,o,a="Lax"){this.documentIsAccessible&&this.set(t,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:r,domain:i,secure:o,sameSite:a})}deleteAll(t,r,i,o="Lax"){if(!this.documentIsAccessible)return;const a=this.getAll();for(const c in a)a.hasOwnProperty(c)&&this.delete(c,t,r,i,o)}}return e.\u0275fac=function(t){return new(t||e)(ge(_n),ge(Zl))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Kr{constructor(n,t,r){this.http=n,this.jwtTokenService=t,this.cookieService=r,this.loggedByGoogle=new gr(!1),this.islogged=new gr(!1),this.loadInfo()}loadInfo(){this.jwtTokenService.jwtToken&&(this.username=this.jwtTokenService.getUsername(),this.email=this.jwtTokenService.getEmail(),this.islogged.next(!0))}clear(){this.username=void 0,this.email=void 0,this.avatar=void 0,this.loggedByGoogle.next(!1),this.islogged.next(!1)}}Kr.\u0275fac=function(n){return new(n||Kr)(ge(ks),ge(Ni),ge(mu))},Kr.\u0275prov=Ee({token:Kr,factory:Kr.\u0275fac,providedIn:"root"});class di{constructor(n){this.userService=n}canActivate(n,t){return this.userService.islogged.value?["profile","post"].includes(n.routeConfig?.path):["login","register"].includes(n.routeConfig?.path)}}function pS(e,n,t,r,i,o,a){try{var c=e[o](a),f=c.value}catch(y){return void t(y)}c.done?n(f):Promise.resolve(f).then(r,i)}function Ls(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function a(f){pS(o,r,i,a,c,"next",f)}function c(f){pS(o,r,i,a,c,"throw",f)}a(void 0)})}}di.\u0275fac=function(n){return new(n||di)(ge(Kr))},di.\u0275prov=Ee({token:di,factory:di.\u0275fac,providedIn:"root"});var bg=he(573);const{isArray:q6}=Array;class W6 extends kt{constructor(n,t){super()}schedule(n,t=0){return this}}const Wc={setInterval(e,n,...t){const{delegate:r}=Wc;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=Wc;return(n?.clearInterval||clearInterval)(e)},delegate:void 0},gS={now:()=>(gS.delegate||Date).now(),delegate:void 0};class vu{constructor(n,t=vu.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}vu.now=gS.now;const Jc=new class X6 extends vu{constructor(n,t=vu.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}(class J6 extends W6{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return Wc.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Wc.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,mt(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}),Y6=Jc;function mS(e,n){return n?t=>bc(n.pipe(es(1),function Q6(){return Ue((e,n)=>{e.subscribe(nt(n,K))})}()),t.pipe(mS(e))):Jt((t,r)=>gn(e(t,r)).pipe(es(1),Kw(t)))}function vS(e){return e instanceof Date&&!isNaN(e)}function Sg(e,n=Jc){const t=function eR(e=0,n,t=Y6){let r=-1;return null!=n&&($u(n)?t=n:r=n),new G(i=>{let o=vS(e)?+e-t.now():e;o<0&&(o=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(e,n);return mS(()=>t)}const tR=Yn(e=>function(t=null){e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function rR(e){throw new tR(e)}class yS{validateSignature(n){return Promise.resolve(null)}validateAtHash(n){return Promise.resolve(!0)}}class xS{}class Eg{}let iR=(()=>{class e extends Eg{now(){return Date.now()}new(){return new Date}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class wS{}class bS{}let sR=(()=>{class e{constructor(){this.data=new Map}getItem(t){return this.data.get(t)}removeItem(t){this.data.delete(t)}setItem(t,r){this.data.set(t,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class Cg{constructor(n){this.type=n}}class xr extends Cg{constructor(n,t=null){super(n),this.info=t}}class Oi extends Cg{constructor(n,t=null){super(n),this.info=t}}class en extends Cg{constructor(n,t,r=null){super(n),this.reason=t,this.params=r}}function SS(e){const n=e.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(n).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Dg(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class Xc{constructor(n){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.redirectUriAsPostLogoutRedirectUriFallback=!0,this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret="",this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.decreaseExpirationBySec=0,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.preserveRequestedRoute=!1,this.disableIdTokenTimer=!1,this.checkOrigin=!1,this.openUri=t=>{location.href=t},n&&Object.assign(this,n)}}class yu{encodeKey(n){return encodeURIComponent(n)}encodeValue(n){return encodeURIComponent(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}class ES{}class oR{validateAtHash(n){var t=this;return Ls(function*(){let r=t.inferHashAlgorithm(n.idTokenHeader),i=yield t.calcHash(n.accessToken,r),a=Dg(i.substr(0,i.length/2)),c=n.idTokenClaims.at_hash.replace(/=/g,"");return a!==c&&(console.error("exptected at_hash: "+a),console.error("actual at_hash: "+c)),a===c})()}inferHashAlgorithm(n){let t=n.alg;if(!t.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+t);return"sha-"+t.substr(2)}}let CS=(()=>{class e{getHashFragmentParams(t){let r=t||window.location.hash;if(r=decodeURIComponent(r),0!==r.indexOf("#"))return{};const i=r.indexOf("?");return r=r.substr(i>-1?i+1:1),this.parseQueryString(r)}parseQueryString(t){const r={};let i,o,a,c,f,y,E;if(null===t)return r;i=t.split("&");for(let F=0;F<i.length;F++)o=i[F],a=o.indexOf("="),-1===a?(c=o,f=null):(c=o.substr(0,a),f=o.substr(a+1)),y=decodeURIComponent(c),E=decodeURIComponent(f),"/"===y.substr(0,1)&&(y=y.substr(1)),r[y]=E;return r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const uR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function _g(e,n,t,r,i){let o,a,c,f,y,E,F,N,L,U,Z,re,oe;for(;i>=64;){for(o=n[0],a=n[1],c=n[2],f=n[3],y=n[4],E=n[5],F=n[6],N=n[7],U=0;U<16;U++)Z=r+4*U,e[U]=(255&t[Z])<<24|(255&t[Z+1])<<16|(255&t[Z+2])<<8|255&t[Z+3];for(U=16;U<64;U++)L=e[U-2],re=(L>>>17|L<<15)^(L>>>19|L<<13)^L>>>10,L=e[U-15],oe=(L>>>7|L<<25)^(L>>>18|L<<14)^L>>>3,e[U]=(re+e[U-7]|0)+(oe+e[U-16]|0);for(U=0;U<64;U++)re=(((y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&E^~y&F)|0)+(N+(uR[U]+e[U]|0)|0)|0,oe=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&c^a&c)|0,N=F,F=E,E=y,y=f+re|0,f=c,c=a,a=o,o=re+oe|0;n[0]+=o,n[1]+=a,n[2]+=c,n[3]+=f,n[4]+=y,n[5]+=E,n[6]+=F,n[7]+=N,r+=64,i-=64}return r}class Yc{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let n=0;n<this.buffer.length;n++)this.buffer[n]=0;for(let n=0;n<this.temp.length;n++)this.temp[n]=0;this.reset()}update(n,t=n.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let r=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=n[r++],t--;64===this.bufferLength&&(_g(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(r=_g(this.temp,this.state,n,r,t),t%=64);t>0;)this.buffer[this.bufferLength++]=n[r++],t--;return this}finish(n){if(!this.finished){const t=this.bytesHashed,r=this.bufferLength,i=t/536870912|0,o=t<<3,a=t%64<56?64:128;this.buffer[r]=128;for(let c=r+1;c<a-8;c++)this.buffer[c]=0;this.buffer[a-8]=i>>>24&255,this.buffer[a-7]=i>>>16&255,this.buffer[a-6]=i>>>8&255,this.buffer[a-5]=i>>>0&255,this.buffer[a-4]=o>>>24&255,this.buffer[a-3]=o>>>16&255,this.buffer[a-2]=o>>>8&255,this.buffer[a-1]=o>>>0&255,_g(this.temp,this.state,this.buffer,0,a),this.finished=!0}for(let t=0;t<8;t++)n[4*t+0]=this.state[t]>>>24&255,n[4*t+1]=this.state[t]>>>16&255,n[4*t+2]=this.state[t]>>>8&255,n[4*t+3]=this.state[t]>>>0&255;return this}digest(){const n=new Uint8Array(this.digestLength);return this.finish(n),n}_saveState(n){for(let t=0;t<this.state.length;t++)n[t]=this.state[t]}_restoreState(n,t){for(let r=0;r<this.state.length;r++)this.state[r]=n[r];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}}new Uint8Array(32);class _S{}let gR=(()=>{class e{calcHash(t,r){return Ls(function*(){return function pR(e){var n,t=[];for(n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}(function lR(e){const n=(new Yc).update(e),t=n.digest();return n.clean(),t}(function hR(e){if("string"!=typeof e)throw new TypeError("expected string");var n,t=e,r=new Uint8Array(t.length);for(n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}(t)))})()}toHashString2(t){let r="";for(let i of t)r+=String.fromCharCode(i);return r}toHashString(t){const r=new Uint8Array(t);let i="";for(let o of r)i+=String.fromCharCode(o);return i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),Zc=(()=>{class e extends Xc{constructor(t,r,i,o,a,c,f,y,E,F){super(),this.ngZone=t,this.http=r,this.config=a,this.urlHelper=c,this.logger=f,this.crypto=y,this.dateTimeService=F,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new we,this.discoveryDocumentLoadedSubject=new we,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.saveNoncesInLocalStorage=!1,this.debug("angular-oauth2-oidc v10"),this.document=E,a||(a={}),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),o&&(this.tokenValidationHandler=o),a&&this.configure(a);try{i?this.setStorage(i):typeof sessionStorage<"u"&&this.setStorage(sessionStorage)}catch(N){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",N)}if(this.checkLocalStorageAccessable()){const N=window?.navigator?.userAgent;(N?.includes("MSIE ")||N?.includes("Trident"))&&(this.saveNoncesInLocalStorage=!0)}this.setupRefreshTimer()}checkLocalStorageAccessable(){if(typeof window>"u")return!1;const t="test";try{return!(typeof window.localStorage>"u"||(localStorage.setItem(t,t),localStorage.removeItem(t),0))}catch{return!1}}configure(t){Object.assign(this,new Xc,t),this.config=Object.assign({},new Xc,t),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe(hn(t=>"token_received"===t.type)).subscribe(t=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(t={},r,i=!0){let o=!0;this.clearAutomaticRefreshTimer(),this.automaticRefreshSubscription=this.events.pipe(Sn(a=>{"token_received"===a.type?o=!0:"logout"===a.type&&(o=!1)}),hn(a=>"token_expires"===a.type&&(null==r||"any"===r||a.info===r)),function Z6(e,n=Jc){return Ue((t,r)=>{let i=null,o=null,a=null;const c=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function f(){const y=a+e,E=n.now();if(E<y)return i=this.schedule(void 0,y-E),void r.add(i);c()}t.subscribe(nt(r,y=>{o=y,a=n.now(),i||(i=n.schedule(f,e),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}(1e3)).subscribe(a=>{o&&this.refreshInternal(t,i).catch(c=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(t,r){return this.useSilentRefresh||"code"!==this.responseType?this.silentRefresh(t,r):this.refreshToken()}loadDiscoveryDocumentAndTryLogin(t=null){return this.loadDiscoveryDocument().then(r=>this.tryLogin(t))}loadDiscoveryDocumentAndLogin(t=null){return this.loadDiscoveryDocumentAndTryLogin(t=t||{}).then(r=>!(!this.hasValidIdToken()||!this.hasValidAccessToken())||(this.initLoginFlow("string"==typeof t.state?t.state:""),!1))}debug(...t){this.showDebugInformation&&this.logger.debug.apply(this.logger,t)}validateUrlFromDiscoveryDocument(t){const r=[],i=this.validateUrlForHttps(t),o=this.validateUrlAgainstIssuer(t);return i||r.push("https for all urls required. Also for urls received by discovery."),o||r.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),r}validateUrlForHttps(t){if(!t)return!0;const r=t.toLowerCase();return!(!1!==this.requireHttps&&(!r.match(/^http:\/\/localhost($|[:\/])/)&&!r.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps))||r.startsWith("https://")}assertUrlNotNullAndCorrectProtocol(t,r){if(!t)throw new Error(`'${r}' should not be null`);if(!this.validateUrlForHttps(t))throw new Error(`'${r}' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).`)}validateUrlAgainstIssuer(t){return!this.strictDiscoveryDocumentValidation||!t||t.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){typeof window>"u"?this.debug("timer not supported on this plattform"):((this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe(hn(t=>"token_received"===t.type)).subscribe(t=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()}))}setupExpirationTimers(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),!this.disableIdTokenTimer&&this.hasValidIdToken()&&this.setupIdTokenTimer()}setupAccessTokenTimer(){const t=this.getAccessTokenExpiration(),r=this.getAccessTokenStoredAt(),i=this.calcTimeout(r,t);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=Ae(new Oi("token_expires","access_token")).pipe(Sg(i)).subscribe(o=>{this.ngZone.run(()=>{this.eventsSubject.next(o)})})})}setupIdTokenTimer(){const t=this.getIdTokenExpiration(),r=this.getIdTokenStoredAt(),i=this.calcTimeout(r,t);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=Ae(new Oi("token_expires","id_token")).pipe(Sg(i)).subscribe(o=>{this.ngZone.run(()=>{this.eventsSubject.next(o)})})})}stopAutomaticRefresh(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.clearAutomaticRefreshTimer()}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}clearAutomaticRefreshTimer(){this.automaticRefreshSubscription&&this.automaticRefreshSubscription.unsubscribe()}calcTimeout(t,r){const i=this.dateTimeService.now(),a=Math.max(0,(r-t)*this.timeoutFactor-(i-t)),c=2147483647;return a>c?c:a}setStorage(t){this._storage=t,this.configChanged()}loadDiscoveryDocument(t=null){return new Promise((r,i)=>{t||((t=this.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),this.validateUrlForHttps(t)?this.http.get(t).subscribe(o=>{if(!this.validateDiscoveryDocument(o))return this.eventsSubject.next(new en("discovery_document_validation_error",null)),void i("discovery_document_validation_error");this.loginUrl=o.authorization_endpoint,this.logoutUrl=o.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=o.grant_types_supported,this.issuer=o.issuer,this.tokenEndpoint=o.token_endpoint,this.userinfoEndpoint=o.userinfo_endpoint||this.userinfoEndpoint,this.jwksUri=o.jwks_uri,this.sessionCheckIFrameUrl=o.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(o),this.revocationEndpoint=o.revocation_endpoint||this.revocationEndpoint,this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(a=>{const f=new xr("discovery_document_loaded",{discoveryDocument:o,jwks:a});this.eventsSubject.next(f),r(f)}).catch(a=>{this.eventsSubject.next(new en("discovery_document_load_error",a)),i(a)})},o=>{this.logger.error("error loading discovery document",o),this.eventsSubject.next(new en("discovery_document_load_error",o)),i(o)}):i("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")})}loadJwks(){return new Promise((t,r)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe(i=>{this.jwks=i,t(i)},i=>{this.logger.error("error loading jwks",i),this.eventsSubject.next(new en("jwks_load_error",i)),r(i)}):t(null)})}validateDiscoveryDocument(t){let r;return this.skipIssuerCheck||t.issuer===this.issuer?(r=this.validateUrlFromDiscoveryDocument(t.authorization_endpoint),r.length>0?(this.logger.error("error validating authorization_endpoint in discovery document",r),!1):(r=this.validateUrlFromDiscoveryDocument(t.end_session_endpoint),r.length>0?(this.logger.error("error validating end_session_endpoint in discovery document",r),!1):(r=this.validateUrlFromDiscoveryDocument(t.token_endpoint),r.length>0&&this.logger.error("error validating token_endpoint in discovery document",r),r=this.validateUrlFromDiscoveryDocument(t.revocation_endpoint),r.length>0&&this.logger.error("error validating revocation_endpoint in discovery document",r),r=this.validateUrlFromDiscoveryDocument(t.userinfo_endpoint),r.length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",r),!1):(r=this.validateUrlFromDiscoveryDocument(t.jwks_uri),r.length>0?(this.logger.error("error validating jwks_uri in discovery document",r),!1):(this.sessionChecksEnabled&&!t.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0))))):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+t.issuer),!1)}fetchTokenUsingPasswordFlowAndLoadUserProfile(t,r,i=new pn){return this.fetchTokenUsingPasswordFlow(t,r,i).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((t,r)=>{const i=(new pn).set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:i,observe:"response",responseType:"text"}).subscribe(o=>{if(this.debug("userinfo received",JSON.stringify(o)),o.headers.get("content-type").startsWith("application/json")){let a=JSON.parse(o.body);const c=this.getIdentityClaims()||{};if(!this.skipSubjectCheck&&this.oidc&&(!c.sub||a.sub!==c.sub))return void r("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false");a=Object.assign({},c,a),this._storage.setItem("id_token_claims_obj",JSON.stringify(a)),this.eventsSubject.next(new xr("user_profile_loaded")),t({info:a})}else this.debug("userinfo is not JSON, treating it as JWE/JWS"),this.eventsSubject.next(new xr("user_profile_loaded")),t(JSON.parse(o.body))},o=>{this.logger.error("error loading user info",o),this.eventsSubject.next(new en("user_profile_load_error",o)),r(o)})})}fetchTokenUsingPasswordFlow(t,r,i=new pn){return this.fetchTokenUsingGrant("password",{username:t,password:r},i)}fetchTokenUsingGrant(t,r,i=new pn){this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let o=new yr({encoder:new yu}).set("grant_type",t).set("scope",this.scope);if(this.useHttpBasicAuth){const a=btoa(`${this.clientId}:${this.dummyClientSecret}`);i=i.set("Authorization","Basic "+a)}if(this.useHttpBasicAuth||(o=o.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(o=o.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const a of Object.getOwnPropertyNames(this.customQueryParams))o=o.set(a,this.customQueryParams[a]);for(const a of Object.keys(r))o=o.set(a,r[a]);return i=i.set("Content-Type","application/x-www-form-urlencoded"),new Promise((a,c)=>{this.http.post(this.tokenEndpoint,o,{headers:i}).subscribe(f=>{this.debug("tokenResponse",f),this.storeAccessTokenResponse(f.access_token,f.refresh_token,f.expires_in||this.fallbackAccessTokenExpirationTimeInSec,f.scope,this.extractRecognizedCustomParameters(f)),this.oidc&&f.id_token&&this.processIdToken(f.id_token,f.access_token).then(y=>{this.storeIdToken(y),a(f)}),this.eventsSubject.next(new xr("token_received")),a(f)},f=>{this.logger.error("Error performing ${grantType} flow",f),this.eventsSubject.next(new en("token_error",f)),c(f)})})}refreshToken(){return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((t,r)=>{let i=new yr({encoder:new yu}).set("grant_type","refresh_token").set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token")),o=(new pn).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const a=btoa(`${this.clientId}:${this.dummyClientSecret}`);o=o.set("Authorization","Basic "+a)}if(this.useHttpBasicAuth||(i=i.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(i=i.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const a of Object.getOwnPropertyNames(this.customQueryParams))i=i.set(a,this.customQueryParams[a]);this.http.post(this.tokenEndpoint,i,{headers:o}).pipe(qr(a=>this.oidc&&a.id_token?Ht(this.processIdToken(a.id_token,a.access_token,!0)).pipe(Sn(c=>this.storeIdToken(c)),Fe(c=>a)):Ae(a))).subscribe(a=>{this.debug("refresh tokenResponse",a),this.storeAccessTokenResponse(a.access_token,a.refresh_token,a.expires_in||this.fallbackAccessTokenExpirationTimeInSec,a.scope,this.extractRecognizedCustomParameters(a)),this.eventsSubject.next(new xr("token_received")),this.eventsSubject.next(new xr("token_refreshed")),t(a)},a=>{this.logger.error("Error refreshing token",a),this.eventsSubject.next(new en("token_refresh_error",a)),r(a)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=t=>{const r=this.processMessageEventMessage(t);this.checkOrigin&&t.origin!==location.origin&&console.error("wrong origin requested silent refresh!"),this.tryLogin({customHashFragment:r,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri||this.redirectUri}).catch(i=>this.debug("tryLogin during silent refresh failed",i))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(t={},r=!0){const i=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(typeof this.document>"u")throw new Error("silent refresh is not supported on this platform");const o=this.document.getElementById(this.silentRefreshIFrameName);o&&this.document.body.removeChild(o),this.silentRefreshSubject=i.sub;const a=this.document.createElement("iframe");return a.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,r,t).then(F=>{a.setAttribute("src",F),this.silentRefreshShowIFrame||(a.style.display="none"),this.document.body.appendChild(a)}),function K6(...e){return 1===(e=function z6(e){return 1===e.length&&q6(e[0])?e[0]:e}(e)).length?gn(e[0]):new G(function G6(e){return n=>{let t=[];for(let r=0;t&&!n.closed&&r<e.length;r++)t.push(gn(e[r]).subscribe(nt(n,i=>{if(t){for(let o=0;o<t.length;o++)o!==r&&t[o].unsubscribe();t=null}n.next(i)})))}}(e))}([this.events.pipe(hn(F=>F instanceof en),zr()),this.events.pipe(hn(F=>"token_received"===F.type),zr()),Ae(new en("silent_refresh_timeout",null)).pipe(Sg(this.silentRefreshTimeout))]).pipe(Fe(F=>{if(F instanceof en)throw"silent_refresh_timeout"===F.type||(F=new en("silent_refresh_error",F)),this.eventsSubject.next(F),F;return"token_received"===F.type&&(F=new xr("silently_refreshed"),this.eventsSubject.next(F)),F})).toPromise()}initImplicitFlowInPopup(t){return this.initLoginFlowInPopup(t)}initLoginFlowInPopup(t){return t=t||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(r=>new Promise((i,o)=>{let f,c=null;t.windowRef?t.windowRef&&!t.windowRef.closed&&(c=t.windowRef,c.location.href=r):c=window.open(r,"ngx-oauth2-oidc-login",this.calculatePopupFeatures(t));const y=U=>{this.tryLogin({customHashFragment:U,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri}).then(()=>{F(),i(!0)},Z=>{F(),o(Z)})};c?f=window.setInterval(()=>{(!c||c.closed)&&(F(),o(new en("popup_closed",{})))},500):o(new en("popup_blocked",{}));const F=()=>{window.clearInterval(f),window.removeEventListener("storage",L),window.removeEventListener("message",N),null!==c&&c.close(),c=null},N=U=>{const Z=this.processMessageEventMessage(U);Z&&null!==Z?(window.removeEventListener("storage",L),y(Z)):console.log("false event firing")},L=U=>{"auth_hash"===U.key&&(window.removeEventListener("message",N),y(U.newValue))};window.addEventListener("message",N),window.addEventListener("storage",L)}))}calculatePopupFeatures(t){const r=t.height||470,i=t.width||500,o=window.screenLeft+(window.outerWidth-i)/2;return`location=no,toolbar=no,width=${i},height=${r},top=${window.screenTop+(window.outerHeight-r)/2},left=${o}`}processMessageEventMessage(t){let r="#";if(this.silentRefreshMessagePrefix&&(r+=this.silentRefreshMessagePrefix),!t||!t.data||"string"!=typeof t.data)return;const i=t.data;return i.startsWith(r)?"#"+i.substr(r.length):void 0}canPerformSessionCheck(){return!(!this.sessionChecksEnabled||(this.sessionCheckIFrameUrl?this.getSessionState()?typeof this.document>"u":(console.warn("sessionChecksEnabled is activated but there is no session_state"),1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),1)))}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=t=>{const r=t.origin.toLowerCase(),i=this.issuer.toLowerCase();if(this.debug("sessionCheckEventListener"),i.startsWith(r)){switch(t.data){case"unchanged":this.ngZone.run(()=>{this.handleSessionUnchanged()});break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()})}this.debug("got info from session check inframe",t)}else this.debug("sessionCheckEventListener","wrong origin",r,"expected",i,"event",t)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged"),this.eventsSubject.next(new Oi("session_unchanged"))}handleSessionChange(){this.eventsSubject.next(new Oi("session_changed")),this.stopSessionCheckTimer(),this.useSilentRefresh||"code"!==this.responseType?this.silentRefreshRedirectUri?(this.silentRefresh().catch(t=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new Oi("session_terminated")),this.logOut(!0)):this.refreshToken().then(t=>{this.debug("token refresh after session change worked")}).catch(t=>{this.debug("token refresh did not work after session changed"),this.eventsSubject.next(new Oi("session_terminated")),this.logOut(!0)})}waitForSilentRefreshAfterSessionChange(){this.events.pipe(hn(t=>"silently_refreshed"===t.type||"silent_refresh_timeout"===t.type||"silent_refresh_error"===t.type),zr()).subscribe(t=>{"silently_refreshed"!==t.type&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new Oi("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new Oi("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;const t=this.document.getElementById(this.sessionCheckIFrameName);t&&this.document.body.removeChild(t);const r=this.document.createElement("iframe");r.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),r.setAttribute("src",this.sessionCheckIFrameUrl),r.style.display="none",this.document.body.appendChild(r),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){const t=this.document.getElementById(this.sessionCheckIFrameName);t||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);const r=this.getSessionState();r||this.stopSessionCheckTimer(),t.contentWindow.postMessage(this.clientId+" "+r,this.issuer)}createLoginUrl(t="",r="",i="",o=!1,a={}){var c=this;return Ls(function*(){const f=c;let y;y=i||c.redirectUri;const E=yield c.createAndSaveNonce();if(t=t?E+c.config.nonceStateSeparator+encodeURIComponent(t):E,!c.requestAccessToken&&!c.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");c.responseType=c.config.responseType?c.config.responseType:c.oidc&&c.requestAccessToken?"id_token token":c.oidc&&!c.requestAccessToken?"id_token":"token";const F=f.loginUrl.indexOf("?")>-1?"&":"?";let N=f.scope;c.oidc&&!N.match(/(^|\s)openid($|\s)/)&&(N="openid "+N);let L=f.loginUrl+F+"response_type="+encodeURIComponent(f.responseType)+"&client_id="+encodeURIComponent(f.clientId)+"&state="+encodeURIComponent(t)+"&redirect_uri="+encodeURIComponent(y)+"&scope="+encodeURIComponent(N);if(c.responseType.includes("code")&&!c.disablePKCE){const[U,Z]=yield c.createChallangeVerifierPairForPKCE();c.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("PKCE_verifier",Z):c._storage.setItem("PKCE_verifier",Z),L+="&code_challenge="+U,L+="&code_challenge_method=S256"}r&&(L+="&login_hint="+encodeURIComponent(r)),f.resource&&(L+="&resource="+encodeURIComponent(f.resource)),f.oidc&&(L+="&nonce="+encodeURIComponent(E)),o&&(L+="&prompt=none");for(const U of Object.keys(a))L+="&"+encodeURIComponent(U)+"="+encodeURIComponent(a[U]);if(c.customQueryParams)for(const U of Object.getOwnPropertyNames(c.customQueryParams))L+="&"+U+"="+encodeURIComponent(c.customQueryParams[U]);return L})()}initImplicitFlowInternal(t="",r=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let i={},o=null;"string"==typeof r?o=r:"object"==typeof r&&(i=r),this.createLoginUrl(t,o,null,!1,i).then(this.config.openUri).catch(a=>{console.error("Error in initImplicitFlow",a),this.inImplicitFlow=!1})}initImplicitFlow(t="",r=""){""!==this.loginUrl?this.initImplicitFlowInternal(t,r):this.events.pipe(hn(i=>"discovery_document_loaded"===i.type)).subscribe(i=>this.initImplicitFlowInternal(t,r))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(t){const r=this;if(t.onTokenReceived){const i={idClaims:r.getIdentityClaims(),idToken:r.getIdToken(),accessToken:r.getAccessToken(),state:r.state};t.onTokenReceived(i)}}storeAccessTokenResponse(t,r,i,o,a){if(this._storage.setItem("access_token",t),o&&!Array.isArray(o)?this._storage.setItem("granted_scopes",JSON.stringify(o.split(" "))):o&&Array.isArray(o)&&this._storage.setItem("granted_scopes",JSON.stringify(o)),this._storage.setItem("access_token_stored_at",""+this.dateTimeService.now()),i){const c=1e3*i,y=this.dateTimeService.new().getTime()+c;this._storage.setItem("expires_at",""+y)}r&&this._storage.setItem("refresh_token",r),a&&a.forEach((c,f)=>{this._storage.setItem(f,c)})}tryLogin(t=null){return"code"===this.config.responseType?this.tryLoginCodeFlow(t).then(r=>!0):this.tryLoginImplicitFlow(t)}parseQueryString(t){return t&&0!==t.length?("?"===t.charAt(0)&&(t=t.substr(1)),this.urlHelper.parseQueryString(t)):{}}tryLoginCodeFlow(t=null){var r=this;return Ls(function*(){const i=(t=t||{}).customHashFragment?t.customHashFragment.substring(1):window.location.search,o=r.getCodePartsFromUrl(i),a=o.code,c=o.state,f=o.session_state;if(!t.preventClearHashAfterLogin){const F=location.origin+location.pathname+location.search.replace(/code=[^&\$]*/,"").replace(/scope=[^&\$]*/,"").replace(/state=[^&\$]*/,"").replace(/session_state=[^&\$]*/,"").replace(/^\?&/,"?").replace(/&$/,"").replace(/^\?$/,"").replace(/&+/g,"&").replace(/\?&/,"?").replace(/\?$/,"")+location.hash;history.replaceState(null,window.name,F)}let[y,E]=r.parseState(c);if(r.state=E,o.error){r.debug("error trying to login"),r.handleLoginError(t,o);const F=new en("code_error",{},o);return r.eventsSubject.next(F),Promise.reject(F)}if(!t.disableNonceCheck){if(!y)return r.saveRequestedRoute(),Promise.resolve();if(!t.disableOAuth2StateCheck&&!r.validateNonce(y)){const N=new en("invalid_nonce_in_state",null);return r.eventsSubject.next(N),Promise.reject(N)}}return r.storeSessionState(f),a&&(yield r.getTokenFromCode(a,t),r.restoreRequestedRoute()),Promise.resolve()})()}saveRequestedRoute(){this.config.preserveRequestedRoute&&this._storage.setItem("requested_route",window.location.pathname+window.location.search)}restoreRequestedRoute(){const t=this._storage.getItem("requested_route");t&&history.replaceState(null,"",window.location.origin+t)}getCodePartsFromUrl(t){return t&&0!==t.length?("?"===t.charAt(0)&&(t=t.substr(1)),this.urlHelper.parseQueryString(t)):this.urlHelper.getHashFragmentParams()}getTokenFromCode(t,r){let i=new yr({encoder:new yu}).set("grant_type","authorization_code").set("code",t).set("redirect_uri",r.customRedirectUri||this.redirectUri);if(!this.disablePKCE){let o;o=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("PKCE_verifier"):this._storage.getItem("PKCE_verifier"),o?i=i.set("code_verifier",o):console.warn("No PKCE verifier found in oauth storage!")}return this.fetchAndProcessToken(i,r)}fetchAndProcessToken(t,r){r=r||{},this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let i=(new pn).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const o=btoa(`${this.clientId}:${this.dummyClientSecret}`);i=i.set("Authorization","Basic "+o)}return this.useHttpBasicAuth||(t=t.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(t=t.set("client_secret",this.dummyClientSecret)),new Promise((o,a)=>{if(this.customQueryParams)for(let c of Object.getOwnPropertyNames(this.customQueryParams))t=t.set(c,this.customQueryParams[c]);this.http.post(this.tokenEndpoint,t,{headers:i}).subscribe(c=>{this.debug("refresh tokenResponse",c),this.storeAccessTokenResponse(c.access_token,c.refresh_token,c.expires_in||this.fallbackAccessTokenExpirationTimeInSec,c.scope,this.extractRecognizedCustomParameters(c)),this.oidc&&c.id_token?this.processIdToken(c.id_token,c.access_token,r.disableNonceCheck).then(f=>{this.storeIdToken(f),this.eventsSubject.next(new xr("token_received")),this.eventsSubject.next(new xr("token_refreshed")),o(c)}).catch(f=>{this.eventsSubject.next(new en("token_validation_error",f)),console.error("Error validating tokens"),console.error(f),a(f)}):(this.eventsSubject.next(new xr("token_received")),this.eventsSubject.next(new xr("token_refreshed")),o(c))},c=>{console.error("Error getting token",c),this.eventsSubject.next(new en("token_refresh_error",c)),a(c)})})}tryLoginImplicitFlow(t=null){let r;r=(t=t||{}).customHashFragment?this.urlHelper.getHashFragmentParams(t.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",r);const i=r.state;let[o,a]=this.parseState(i);if(this.state=a,r.error){this.debug("error trying to login"),this.handleLoginError(t,r);const F=new en("token_error",{},r);return this.eventsSubject.next(F),Promise.reject(F)}const c=r.access_token,f=r.id_token,y=r.session_state,E=r.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!c||this.requestAccessToken&&!t.disableOAuth2StateCheck&&!i||this.oidc&&!f)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!y&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!t.disableNonceCheck&&!this.validateNonce(o)){const N=new en("invalid_nonce_in_state",null);return this.eventsSubject.next(N),Promise.reject(N)}return this.requestAccessToken&&this.storeAccessTokenResponse(c,null,r.expires_in||this.fallbackAccessTokenExpirationTimeInSec,E),this.oidc?this.processIdToken(f,c,t.disableNonceCheck).then(F=>t.validationHandler?t.validationHandler({accessToken:c,idClaims:F.idTokenClaims,idToken:F.idToken,state:i}).then(N=>F):F).then(F=>(this.storeIdToken(F),this.storeSessionState(y),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash(),this.eventsSubject.next(new xr("token_received")),this.callOnTokenReceivedIfExists(t),this.inImplicitFlow=!1,!0)).catch(F=>(this.eventsSubject.next(new en("token_validation_error",F)),this.logger.error("Error validating tokens"),this.logger.error(F),Promise.reject(F))):(this.eventsSubject.next(new xr("token_received")),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash(),this.callOnTokenReceivedIfExists(t),Promise.resolve(!0))}parseState(t){let r=t,i="";if(t){const o=t.indexOf(this.config.nonceStateSeparator);o>-1&&(r=t.substr(0,o),i=t.substr(o+this.config.nonceStateSeparator.length))}return[r,i]}validateNonce(t){let r;return r=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),r===t||(console.error("Validating access_token failed, wrong state/nonce.",r,t),!1)}storeIdToken(t){this._storage.setItem("id_token",t.idToken),this._storage.setItem("id_token_claims_obj",t.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+t.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+this.dateTimeService.now())}storeSessionState(t){this._storage.setItem("session_state",t)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(t,r){t.onLoginError&&t.onLoginError(r),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash()}getClockSkewInMsec(t=6e5){return this.clockSkewInSec||0===this.clockSkewInSec?1e3*this.clockSkewInSec:t}processIdToken(t,r,i=!1){const o=t.split("."),c=SS(this.padBase64(o[0])),f=JSON.parse(c),E=SS(this.padBase64(o[1])),F=JSON.parse(E);let N;if(N=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),Array.isArray(F.aud)){if(F.aud.every(ce=>ce!==this.clientId)){const ce="Wrong audience: "+F.aud.join(",");return this.logger.warn(ce),Promise.reject(ce)}}else if(F.aud!==this.clientId){const ce="Wrong audience: "+F.aud;return this.logger.warn(ce),Promise.reject(ce)}if(!F.sub){const ce="No sub claim in id_token";return this.logger.warn(ce),Promise.reject(ce)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==F.sub){const ce=`After refreshing, we got an id_token for another user (sub). Expected sub: ${this.silentRefreshSubject}, received sub: ${F.sub}`;return this.logger.warn(ce),Promise.reject(ce)}if(!F.iat){const ce="No iat claim in id_token";return this.logger.warn(ce),Promise.reject(ce)}if(!this.skipIssuerCheck&&F.iss!==this.issuer){const ce="Wrong issuer: "+F.iss;return this.logger.warn(ce),Promise.reject(ce)}if(!i&&F.nonce!==N){const ce="Wrong nonce: "+F.nonce;return this.logger.warn(ce),Promise.reject(ce)}if(this.hasOwnProperty("responseType")&&("code"===this.responseType||"id_token"===this.responseType)&&(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!F.at_hash){const ce="An at_hash is needed!";return this.logger.warn(ce),Promise.reject(ce)}const L=this.dateTimeService.now(),U=1e3*F.iat,Z=1e3*F.exp,re=this.getClockSkewInMsec();if(U-re>=L||Z+re-this.decreaseExpirationBySec<=L){const ce="Token has expired";return console.error(ce),console.error({now:L,issuedAtMSec:U,expiresAtMSec:Z}),Promise.reject(ce)}const oe={accessToken:r,idToken:t,jwks:this.jwks,idTokenClaims:F,idTokenHeader:f,loadKeys:()=>this.loadJwks()};return this.disableAtHashCheck?this.checkSignature(oe).then(ce=>({idToken:t,idTokenClaims:F,idTokenClaimsJson:E,idTokenHeader:f,idTokenHeaderJson:c,idTokenExpiresAt:Z})):this.checkAtHash(oe).then(ce=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!ce){const ae="Wrong at_hash";return this.logger.warn(ae),Promise.reject(ae)}return this.checkSignature(oe).then(ae=>{const xt={idToken:t,idTokenClaims:F,idTokenClaimsJson:E,idTokenHeader:f,idTokenHeaderJson:c,idTokenExpiresAt:Z};return this.disableAtHashCheck?xt:this.checkAtHash(oe).then(zt=>{if(this.requestAccessToken&&!zt){const Kg="Wrong at_hash";return this.logger.warn(Kg),Promise.reject(Kg)}return xt})})})}getIdentityClaims(){const t=this._storage.getItem("id_token_claims_obj");return t?JSON.parse(t):null}getGrantedScopes(){const t=this._storage.getItem("granted_scopes");return t?JSON.parse(t):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(t){for(;t.length%4!=0;)t+="=";return t}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){const t=this._storage.getItem("expires_at"),r=this.dateTimeService.new();return!(t&&parseInt(t,10)-this.decreaseExpirationBySec<r.getTime()-this.getClockSkewInMsec())}return!1}hasValidIdToken(){if(this.getIdToken()){const t=this._storage.getItem("id_token_expires_at"),r=this.dateTimeService.new();return!(t&&parseInt(t,10)-this.decreaseExpirationBySec<r.getTime()-this.getClockSkewInMsec())}return!1}getCustomTokenResponseProperty(t){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(t)>=0&&null!==this._storage.getItem(t)?JSON.parse(this._storage.getItem(t)):null}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(t={},r=""){let i=!1;"boolean"==typeof t&&(i=t,t={});const o=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCE_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCE_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach(c=>this._storage.removeItem(c)),this.silentRefreshSubject=null,this.eventsSubject.next(new Oi("logout")),!this.logoutUrl||i)return;let a;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)a=this.logoutUrl.replace(/\{\{id_token\}\}/,encodeURIComponent(o)).replace(/\{\{client_id\}\}/,encodeURIComponent(this.clientId));else{let c=new yr({encoder:new yu});o&&(c=c.set("id_token_hint",o));const f=this.postLogoutRedirectUri||this.redirectUriAsPostLogoutRedirectUriFallback&&this.redirectUri||"";f&&(c=c.set("post_logout_redirect_uri",f),r&&(c=c.set("state",r)));for(let y in t)c=c.set(y,t[y]);a=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+c.toString()}this.config.openUri(a)}createAndSaveNonce(){const t=this;return this.createNonce().then(function(r){return t.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("nonce",r):t._storage.setItem("nonce",r),r})}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();const t=this.document.getElementById(this.silentRefreshIFrameName);t&&t.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();const r=this.document.getElementById(this.sessionCheckIFrameName);r&&r.remove()}createNonce(){return new Promise(t=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let i=45,o="";const a=typeof self>"u"?null:self.crypto||self.msCrypto;if(a){let c=new Uint8Array(i);a.getRandomValues(c),c.map||(c.map=Array.prototype.map),c=c.map(f=>r.charCodeAt(f%r.length)),o=String.fromCharCode.apply(null,c)}else for(;0<i--;)o+=r[Math.random()*r.length|0];t(Dg(o))})}checkAtHash(t){var r=this;return Ls(function*(){return r.tokenValidationHandler?r.tokenValidationHandler.validateAtHash(t):(r.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)})()}checkSignature(t){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(t="",r={}){return"code"===this.responseType?this.initCodeFlow(t,r):this.initImplicitFlow(t,r)}initCodeFlow(t="",r={}){""!==this.loginUrl?this.initCodeFlowInternal(t,r):this.events.pipe(hn(i=>"discovery_document_loaded"===i.type)).subscribe(i=>this.initCodeFlowInternal(t,r))}initCodeFlowInternal(t="",r={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let i={},o=null;"string"==typeof r?o=r:"object"==typeof r&&(i=r),this.createLoginUrl(t,o,null,!1,i).then(this.config.openUri).catch(a=>{console.error("Error in initAuthorizationCodeFlow"),console.error(a)})}createChallangeVerifierPairForPKCE(){var t=this;return Ls(function*(){if(!t.crypto)throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");const r=yield t.createNonce();return[Dg(yield t.crypto.calcHash(r,"sha-256")),r]})()}extractRecognizedCustomParameters(t){let r=new Map;return this.config.customTokenParameters&&this.config.customTokenParameters.forEach(i=>{t[i]&&r.set(i,JSON.stringify(t[i]))}),r}revokeTokenAndLogout(t={},r=!1){let i=this.revocationEndpoint,o=this.getAccessToken(),a=this.getRefreshToken();if(!o)return Promise.resolve();let c=new yr({encoder:new yu}),f=(new pn).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const y=btoa(`${this.clientId}:${this.dummyClientSecret}`);f=f.set("Authorization","Basic "+y)}if(this.useHttpBasicAuth||(c=c.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(c=c.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const y of Object.getOwnPropertyNames(this.customQueryParams))c=c.set(y,this.customQueryParams[y]);return new Promise((y,E)=>{let F,N;if(o){let L=c.set("token",o).set("token_type_hint","access_token");F=this.http.post(i,L,{headers:f})}else F=Ae(null);if(a){let L=c.set("token",a).set("token_type_hint","refresh_token");N=this.http.post(i,L,{headers:f})}else N=Ae(null);r&&(F=F.pipe(mr(L=>0===L.status?Ae(null):Qi(L))),N=N.pipe(mr(L=>0===L.status?Ae(null):Qi(L)))),Vp([F,N]).subscribe(L=>{this.logOut(t),y(L),this.logger.info("Token successfully revoked")},L=>{this.logger.error("Error revoking token",L),this.eventsSubject.next(new en("token_revoke_error",L)),E(L)})})}clearLocationHash(){""!=location.hash&&(location.hash="")}}return e.\u0275fac=function(t){return new(t||e)(ge(Wt),ge(ks),ge(bS,8),ge(ES,8),ge(Xc,8),ge(CS),ge(wS),ge(_S,8),ge(_n),ge(Eg))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class AS{}class mR{handleError(n){return Qi(n)}}let vR=(()=>{class e{constructor(t,r,i){this.oAuthService=t,this.errorHandler=r,this.moduleConfig=i}checkUrl(t){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(t):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(r=>t.toLowerCase().startsWith(r.toLowerCase()))}intercept(t,r){const i=t.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer&&this.checkUrl(i)?this.moduleConfig.resourceServer.sendAccessToken?Ju(Ae(this.oAuthService.getAccessToken()).pipe(hn(a=>!!a)),this.oAuthService.events.pipe(hn(a=>"token_received"===a.type),function nR(e,n){const{first:t,each:r,with:i=rR,scheduler:o=n??Jc,meta:a=null}=vS(e)?{first:e}:"number"==typeof e?{each:e}:e;if(null==t&&null==r)throw new TypeError("No timeout provided.");return Ue((c,f)=>{let y,E,F=null,N=0;const L=U=>{E=Sr(f,o,()=>{try{y.unsubscribe(),gn(i({meta:a,lastValue:F,seen:N})).subscribe(f)}catch(Z){f.error(Z)}},U)};y=c.subscribe(nt(f,U=>{E?.unsubscribe(),N++,f.next(F=U),r>0&&L(r)},void 0,void 0,()=>{E?.closed||E?.unsubscribe(),F=null})),!N&&L(null!=t?"number"==typeof t?t:+t-o.now():r)})}(this.oAuthService.waitForTokenInMsec||0),mr(a=>Ae(null)),Fe(a=>this.oAuthService.getAccessToken()))).pipe(es(1),Jt(a=>{if(a){const f=t.headers.set("Authorization","Bearer "+a);t=t.clone({headers:f})}return r.handle(t).pipe(mr(c=>this.errorHandler.handleError(c)))})):r.handle(t).pipe(mr(a=>this.errorHandler.handleError(a))):r.handle(t)}}return e.\u0275fac=function(t){return new(t||e)(ge(Zc),ge(AS),ge(xS,8))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();function yR(){return console}function xR(){return typeof sessionStorage<"u"?sessionStorage:new sR}function wR(e=null,n=yS){return Ym([Zc,CS,{provide:wS,useFactory:yR},{provide:bS,useFactory:xR},{provide:ES,useClass:n},{provide:_S,useClass:gR},{provide:AS,useClass:mR},{provide:xS,useValue:e},{provide:iS,useClass:vR,multi:!0},{provide:Eg,useClass:iR}])}let bR=(()=>{class e{static forRoot(t=null,r=yS){return{ngModule:e,providers:[wR(t,r)]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({imports:[lw]}),e})();new _e("AUTH_CONFIG");class ER extends oR{constructor(){super(...arguments),this.allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],this.gracePeriodInSec=600}validateSignature(n,t=!1){if(!n.idToken)throw new Error("Parameter idToken expected!");if(!n.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!n.jwks)throw new Error("Parameter jwks expected!");if(!n.jwks.keys||!Array.isArray(n.jwks.keys)||0===n.jwks.keys.length)throw new Error("Array keys in jwks missing!");let o,r=n.idTokenHeader.kid,i=n.jwks.keys,a=n.idTokenHeader.alg;if(r)o=i.find(E=>E.kid===r);else{let E=this.alg2kty(a),F=i.filter(N=>N.kty===E&&"sig"===N.use);if(F.length>1){let N="More than one matching key found. Please specify a kid in the id_token header.";return console.error(N),Promise.reject(N)}1===F.length&&(o=F[0])}if(!o&&!t&&n.loadKeys)return n.loadKeys().then(E=>n.jwks=E).then(E=>this.validateSignature(n,!0));if(!o&&t&&!r){let E="No matching key found.";return console.error(E),Promise.reject(E)}if(!o&&t&&r){let E="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+r;return console.error(E),Promise.reject(E)}let c=bg.KZ.getKey(o);return bg.fs.jws.JWS.verifyJWT(n.idToken,c,{alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec})?Promise.resolve():Promise.reject("Signature not valid")}alg2kty(n){switch(n.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+n)}}calcHash(n,t){let i=new bg.fs.crypto.MessageDigest({alg:t}).digestString(n),o=this.toByteArrayAsString(i);return Promise.resolve(o)}toByteArrayAsString(n){let t="";for(let r=0;r<n.length;r+=2){let i=n.charAt(r)+n.charAt(r+1),o=parseInt(i,16);t+=String.fromCharCode(o)}return t}}const CR={issuer:"https://accounts.google.com",redirectUri:"https://asbelov2.github.io/:4200/login",clientId:"846639198602-b3ik1rij0ogpe0p1mngn98ulgs2gseta.apps.googleusercontent.com",scope:"openid profile email",clearHashAfterLogin:!1,strictDiscoveryDocumentValidation:!1};let IS=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(se(Ci),se(hr))},e.\u0275dir=be({type:e}),e})(),Vs=(()=>{class e extends IS{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275dir=be({type:e,features:[Ct]}),e})();const fi=new _e("NgValueAccessor"),AR={provide:fi,useExisting:_t(()=>jo),multi:!0},FR=new _e("CompositionEventMode");let jo=(()=>{class e extends IS{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function IR(){const e=Ti()?Ti().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(se(Ci),se(hr),se(FR,8))},e.\u0275dir=be({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Pt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Bt([AR]),Ct]}),e})();const TR=!1;function os(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function TS(e){return null!=e&&"number"==typeof e.length}const Vn=new _e("NgValidators"),as=new _e("NgAsyncValidators");function PS(e){return os(e.value)?{required:!0}:null}function Qc(e){return null}function BS(e){return null!=e}function HS(e){const n=Oa(e)?Ht(e):e;if(TR&&!Eh(n)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof e&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new fe(-1101,t)}return n}function jS(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function US(e,n){return n.map(t=>t(e))}function $S(e){return e.map(n=>function MR(e){return!e.validate}(n)?n:t=>n.validate(t))}function Ig(e){return null!=e?function qS(e){if(!e)return null;const n=e.filter(BS);return 0==n.length?null:function(t){return jS(US(t,n))}}($S(e)):null}function Fg(e){return null!=e?function zS(e){if(!e)return null;const n=e.filter(BS);return 0==n.length?null:function(t){return function DR(...e){const n=qu(e),{args:t,keys:r}=Lw(e),i=new G(o=>{const{length:a}=t;if(!a)return void o.complete();const c=new Array(a);let f=a,y=a;for(let E=0;E<a;E++){let F=!1;gn(t[E]).subscribe(nt(o,N=>{F||(F=!0,y--),c[E]=N},()=>f--,void 0,()=>{(!f||!F)&&(y||o.next(r?Bw(r,c):c),o.complete())}))}});return n?i.pipe(Vw(n)):i}(US(t,n).map(HS)).pipe(Fe(jS))}}($S(e)):null}function KS(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function Tg(e){return e?Array.isArray(e)?e:[e]:[]}function ed(e,n){return Array.isArray(e)?e.includes(n):e===n}function JS(e,n){const t=Tg(n);return Tg(e).forEach(i=>{ed(t,i)||t.push(i)}),t}function XS(e,n){return Tg(n).filter(t=>!ed(e,t))}class YS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Ig(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Fg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Xn extends YS{get formDirective(){return null}get path(){return null}}class us extends YS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ZS{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let td=(()=>{class e extends ZS{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(se(us,2))},e.\u0275dir=be({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Hl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ct]}),e})(),nd=(()=>{class e extends ZS{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(se(Xn,10))},e.\u0275dir=be({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Hl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ct]}),e})();function QS(e,n){return e?`with name: '${n}'`:`at index: ${n}`}const Pg=!1,xu="VALID",id="INVALID",Uo="PENDING",wu="DISABLED";function Ng(e){return(sd(e)?e.validators:e)||null}function Og(e,n){return(sd(n)?n.asyncValidators:e)||null}function sd(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class nE{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===xu}get invalid(){return this.status===id}get pending(){return this.status==Uo}get disabled(){return this.status===wu}get enabled(){return this.status!==wu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(JS(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(JS(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(XS(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(XS(n,this._rawAsyncValidators))}hasValidator(n){return ed(this._rawValidators,n)}hasAsyncValidator(n){return ed(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Uo,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=wu,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=xu,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xu||this.status===Uo)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wu:xu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Uo,this._hasOwnPendingAsyncValidator=!0;const t=HS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Gt,this.statusChanges=new Gt}_calculateStatus(){return this._allControlsDisabled()?wu:this.errors?id:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uo)?Uo:this._anyControlsHaveStatus(id)?id:xu}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){sd(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function BR(e){return Array.isArray(e)?Ig(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function HR(e){return Array.isArray(e)?Fg(e):e||null}(this._rawAsyncValidators)}}class kg extends nE{constructor(n,t,r){super(Ng(t),Og(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){(function tE(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new fe(1002,Pg?function VR(e,n){return`Must supply a value for form control ${QS(e,n)}`}(n,i):"")})})(this,!0,n),Object.keys(n).forEach(r=>{(function eE(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new fe(1e3,Pg?function kR(e){return`\n    There are no form controls registered with this ${e?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!r[t])throw new fe(1001,Pg?function LR(e,n){return`Cannot find form control ${QS(e,n)}`}(n,t):"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const $o=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>od}),od="always";function bu(e,n,t=od){Lg(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function $R(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&rE(e,n)})}(e,n),function zR(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function qR(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&rE(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function UR(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function ld(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function Lg(e,n){const t=function GS(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(KS(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=function WS(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(KS(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();ld(n._rawValidators,i),ld(n._rawAsyncValidators,i)}function rE(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const XR={provide:Xn,useExisting:_t(()=>qo)},Su=(()=>Promise.resolve())();let qo=(()=>{class e extends Xn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Gt,this.form=new kg({},Ig(t),Fg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Su.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bu(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Su.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Su.then(()=>{const r=this._findContainer(t.path),i=new kg({});(function iE(e,n){Lg(e,n)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Su.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Su.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function sE(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(se(Vn,10),se(as,10),se($o,8))},e.\u0275dir=be({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Pt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bt([XR]),Ct]}),e})();function oE(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function aE(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const uE=class extends nE{constructor(n=null,t,r){super(Ng(t),Og(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=aE(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){oE(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){oE(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){aE(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},QR={provide:us,useExisting:_t(()=>Eu)},dE=(()=>Promise.resolve())();let Eu=(()=>{class e extends us{constructor(t,r,i,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new uE,this._registered=!1,this.update=new Gt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Hg(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===jo?t=o:function WR(e){return Object.getPrototypeOf(e.constructor)===Vs}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Bg(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){dE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&To(r);dE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ad(e,n){return[...n.path,e]}(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(se(Xn,9),se(Vn,10),se(as,10),se(fi,10),se(nc,8),se($o,8))},e.\u0275dir=be({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bt([QR]),Ct,Y]}),e})(),dd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=be({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),hE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({}),e})();function SE(e){return"number"==typeof e?e:parseInt(e,10)}let Bs=(()=>{class e{constructor(){this._validator=Qc}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Qc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=be({type:e,features:[Y]}),e})();const vM={provide:Vn,useExisting:_t(()=>Cu),multi:!0};let Cu=(()=>{class e extends Bs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=To,this.createValidator=t=>PS}enabled(t){return t}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275dir=be({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&si("required",r._enabled?"":null)},inputs:{required:"required"},features:[Bt([vM]),Ct]}),e})();const wM={provide:Vn,useExisting:_t(()=>fd),multi:!0};let fd=(()=>{class e extends Bs{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>SE(t),this.createValidator=t=>function kS(e){return n=>os(n.value)||!TS(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275dir=be({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&si("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[Bt([wM]),Ct]}),e})();const bM={provide:Vn,useExisting:_t(()=>hd),multi:!0};let hd=(()=>{class e extends Bs{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>SE(t),this.createValidator=t=>function LS(e){return n=>TS(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275dir=be({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&si("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Bt([bM]),Ct]}),e})();const SM={provide:Vn,useExisting:_t(()=>pd),multi:!0};let pd=(()=>{class e extends Bs{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function VS(e){if(!e)return Qc;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(os(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=bn(e)))(r||e)}}(),e.\u0275dir=be({type:e,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&si("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[Bt([SM]),Ct]}),e})(),EM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({imports:[hE]}),e})(),DM=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:$o,useValue:t.callSetDisabledState??od}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Un({type:e}),e.\u0275inj=Hn({imports:[EM]}),e})();class Du{constructor(n,t,r,i,o,a,c){this.http=n,this.cookieService=t,this.jwtTokenService=r,this.userService=i,this.router=o,this.oauthService=a,this.activatedRoute=c,this.handleLoginClick=()=>{this.userService.islogged.value||this.oauthService.initLoginFlow()},this.configure().then(()=>{this.activatedRoute.fragment.subscribe(f=>{f?.length&&(f?.split("&").map(E=>E.split("=")),this.http.get(`https://185.26.53.195:5058/api/user/CheckEmail?email=${this.oauthService.getIdentityClaims().email}`).subscribe(E=>{this.cookieService.set("token",this.oauthService.getIdToken()),this.jwtTokenService.setToken(this.oauthService.getIdToken()),this.userService.loadInfo(),this.userService.loggedByGoogle.next(!0),this.userService.avatar=this.oauthService.getIdentityClaims().picture,this.router.navigateByUrl("/profile")}))})})}ngOnInit(){}login(n){n.preventDefault(),this.http.get(`https://185.26.53.195:5058/login?email=${this.email}&password=${this.password}`,{responseType:"text"}).subscribe(r=>{this.token=r,this.cookieService.set("token",this.token),this.jwtTokenService.setToken(this.token),this.userService.loadInfo(),this.router.navigateByUrl("/profile")})}configure(){var n=this;return Ls(function*(){n.oauthService.configure(CR),n.oauthService.tokenValidationHandler=new ER,yield n.oauthService.loadDiscoveryDocumentAndTryLogin()})()}}Du.\u0275fac=function(n){return new(n||Du)(se(ks),se(mu),se(Ni),se(Kr),se(En),se(Zc),se(is))},Du.\u0275cmp=lr({type:Du,selectors:[["app-login"]],decls:24,vars:5,consts:[[1,"container"],["novalidate","",1,"form-signin","w-100","m-auto"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","name","email","placeholder","name@example.com","required","","pattern","^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$",1,"form-control",3,"ngModel","ngModelChange"],["emailV","ngModel"],["for","floatingInput"],[1,"alert","alert-danger",3,"hidden"],["type","password","name","password","placeholder","Password","minlength","6","maxlength","40","required","",1,"form-control",3,"ngModel","ngModelChange"],["passwordV","ngModel"],["for","floatingPassword"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled","click"],[1,"google-button-wrap",3,"click"],[1,"google-button"],["alt","Google login","src","https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png",1,"google-img"]],template:function(n,t){if(1&n&&(ke(0,"div",0)(1,"form",1)(2,"h1",2),lt(3,"Please sign in"),Le(),ke(4,"div",3)(5,"input",4,5),Pt("ngModelChange",function(i){return t.email=i}),Le(),ke(7,"label",6),lt(8,"Email address"),Le(),ke(9,"div",7),lt(10," Incorrect email "),Le()(),ke(11,"div",3)(12,"input",8,9),Pt("ngModelChange",function(i){return t.password=i}),Le(),ke(14,"label",10),lt(15,"Password"),Le(),ke(16,"div",7),lt(17," Incorrect password "),Le()(),ke(18,"button",11),Pt("click",function(i){return t.login(i)}),lt(19,"Sign in"),Le(),ke(20,"div",12),Pt("click",function(){return t.handleLoginClick()}),ke(21,"div",13),Is(22,"img",14),lt(23," Sign in with Google "),Le()()()()),2&n){const r=Na(6),i=Na(13);Et(5),Mt("ngModel",t.email),Et(4),Mt("hidden",r.valid||r.untouched),Et(3),Mt("ngModel",t.password),Et(4),Mt("hidden",i.valid||i.untouched),Et(2),Mt("disabled",r.invalid||i.invalid)}},dependencies:[dd,jo,td,nd,Cu,fd,hd,pd,Eu,qo],styles:[".form-signin[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:330px;padding:15px;justify-content:center;align-items:center}.form-floating[_ngcontent-%COMP%]{width:100%}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{width:100%;margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.google-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:100%;padding:5px;border:1px solid rgba(0,0,0,.4);box-shadow:1px 1px #0006;border-radius:5px}.google-button-wrap[_ngcontent-%COMP%]{width:100%;margin:15px}.google-img[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:5px}"]});class _u{}_u.\u0275fac=function(n){return new(n||_u)},_u.\u0275cmp=lr({type:_u,selectors:[["app-pagenotfound"]],decls:12,vars:0,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100"],[1,"text-center"],[1,"display-1","fw-bold"],[1,"fs-3"],[1,"text-danger"],[1,"lead"],["href","index.html",1,"btn","btn-primary"]],template:function(n,t){1&n&&(ke(0,"div",0)(1,"div",1)(2,"h1",2),lt(3,"404"),Le(),ke(4,"p",3)(5,"span",4),lt(6,"Opps!"),Le(),lt(7," Page not found."),Le(),ke(8,"p",5),lt(9," The page you\u2019re looking for doesn\u2019t exist. "),Le(),ke(10,"a",6),lt(11,"Go Home"),Le()()())}});class IE{constructor(n,t,r,i){this.id=n,this.userId=t,this.heading=r,this.text=i}}class Au{constructor(n,t,r,i){this.http=n,this.router=t,this.userService=r,this.activatedRoute=i,this.post=new IE(0,0,"",""),this.isNewPost=!0,i.params.subscribe(o=>{o?.id?(this.isNewPost=!1,this.http.get(`https://185.26.53.195:5058/api/Post/${o.id}`).subscribe(a=>{this.post=a})):(this.isNewPost=!0,this.post=new IE(0,0,"",""))})}createPost(n){n.preventDefault();const t={headers:new pn({"Access-Control-Allow-Origin":"*"})};this.http.get(`https://185.26.53.195:5058/api/user/CheckEmail?email=${this.userService.email}`).subscribe(r=>{this.post.userId=r.id,this.http.post("https://185.26.53.195:5058/api/Post/",this.post,t).subscribe(i=>{this.router.navigateByUrl("/profile")})})}updatePost(n){n.preventDefault();const t={headers:new pn({"Access-Control-Allow-Origin":"*"})};this.http.get(`https://185.26.53.195:5058/api/user/CheckEmail?email=${this.userService.email}`).subscribe(r=>{this.post.userId=r.id,this.http.put(`https://185.26.53.195:5058/api/Post/${this.post.id}`,this.post,t).subscribe(i=>{this.router.navigateByUrl("/profile")})})}}Au.\u0275fac=function(n){return new(n||Au)(se(ks),se(En),se(Kr),se(is))},Au.\u0275cmp=lr({type:Au,selectors:[["app-post-screen"]],decls:13,vars:2,consts:[[1,"d-flex","justify-content-center"],[1,"d-flex","border","border-primary","border-opacity-50","rounded","px-3","py-3","w-25"],["novalidate","",1,"w-100"],[1,"form-group","my-3"],["for","exampleFormControlTextarea1"],["name","heading","type","text",1,"form-control","my-2",3,"ngModel","ngModelChange"],[1,"form-group"],["name","text","id","exampleFormControlTextarea1","rows","3",1,"form-control","my-2",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-2",3,"click"]],template:function(n,t){1&n&&(ke(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"label",4),lt(5,"Heading"),Le(),ke(6,"input",5),Pt("ngModelChange",function(i){return t.post.heading=i}),Le()(),ke(7,"div",6)(8,"label",4),lt(9,"Text"),Le(),ke(10,"textarea",7),Pt("ngModelChange",function(i){return t.post.text=i}),Le()(),ke(11,"button",8),Pt("click",function(i){return t.isNewPost?t.createPost(i):t.updatePost(i)}),lt(12,"Submit"),Le()()()()),2&n&&(Et(6),Mt("ngModel",t.post.heading),Et(4),Mt("ngModel",t.post.text))},dependencies:[dd,jo,td,nd,Eu,qo]});class _M{constructor(n,t,r,i){this.id=n,this.email=t,this.username=r,this.passwordHash=i}}var FE=he(133);class Iu{constructor(n,t){this.http=n,this.router=t,this.user=new _M(0,"","",""),this.passwordValidation=!1}register(n){n.preventDefault();const t={headers:new pn({"Access-Control-Allow-Origin":"*"})};this.http.post("https://185.26.53.195:5058/api/User/",this.user,t).subscribe(r=>{r.email===this.user.email&&this.router.navigateByUrl("/login")})}set password(n){this._password=n,this._password&&this._password.length>=6&&this._password.length<=40&&this._passwordConfirm===this._password?(this.passwordValidation=!0,this.user.passwordHash=FE.hashSync(this._password,10)):this.passwordValidation=!1}get password(){return this._password}set passwordConfirm(n){this._passwordConfirm=n,this._password&&this._password.length>=6&&this._password.length<=40&&this._passwordConfirm===this._password?(this.passwordValidation=!0,this.user.passwordHash=FE.hashSync(this._password,10)):this.passwordValidation=!1}get passwordConfirm(){return this._passwordConfirm}}function AM(e,n){1&e&&Is(0,"img",14),2&e&&Vl("src","",ka().avatar," ",zf)}function IM(e,n){1&e&&Is(0,"div",15)}function FM(e,n){if(1&e){const t=Sh();ke(0,"div",17)(1,"div",18)(2,"div",19)(3,"b"),lt(4),Le()(),ke(5,"div",20),Pt("click",function(){const o=St(t).$implicit;return tr(ka(2).editPost(o))}),lt(6,"\u270f\ufe0f"),Le()(),ke(7,"div",2)(8,"div",21),lt(9),Le()()()}if(2&e){const t=n.$implicit;Et(4),Co(t.heading),Et(5),Co(t.text)}}function TM(e,n){if(1&e&&(kl(0),oi(1,FM,10,2,"div",16),Ll()),2&e){const t=ka();Et(1),Mt("ngForOf",t.posts)}}Iu.\u0275fac=function(n){return new(n||Iu)(se(ks),se(En))},Iu.\u0275cmp=lr({type:Iu,selectors:[["app-register"]],decls:31,vars:8,consts:[[1,"container"],["novalidate","",1,"form-signup","w-100","m-auto"],[1,"h3","mb-3","fw-normal"],[1,"inputs"],[1,"form-floating"],["type","email","name","email","placeholder","name@example.com","required","","pattern","^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$",1,"form-control",3,"ngModel","ngModelChange"],["emailV","ngModel"],["for","floatingInput"],[1,"alert","alert-danger",3,"hidden"],["type","text","name","name","placeholder","Username","minlength","2","maxlength","40","required","",1,"form-control",3,"ngModel","ngModelChange"],["nameV","ngModel"],["type","password","name","password","placeholder","Password","minlength","6","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],["type","password","name","paswordconfirm","minlength","6","maxlength","20","placeholder","Confirm Password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled","click"]],template:function(n,t){if(1&n&&(ke(0,"div",0)(1,"form",1)(2,"h1",2),lt(3,"Please sign up"),Le(),ke(4,"div",3)(5,"div",4)(6,"input",5,6),Pt("ngModelChange",function(i){return t.user.email=i}),Le(),ke(8,"label",7),lt(9,"Email address"),Le(),ke(10,"div",8),lt(11," Incorrect email "),Le()(),ke(12,"div",4)(13,"input",9,10),Pt("ngModelChange",function(i){return t.user.username=i}),Le(),ke(15,"label",7),lt(16,"Username"),Le()(),ke(17,"div",8),lt(18," Incorrect name "),Le(),ke(19,"div",4)(20,"input",11),Pt("ngModelChange",function(i){return t.password=i}),Le(),ke(21,"label",12),lt(22,"Password"),Le()(),ke(23,"div",4)(24,"input",13),Pt("ngModelChange",function(i){return t.passwordConfirm=i}),Le(),ke(25,"label",12),lt(26,"Confirm Password"),Le()(),ke(27,"div",8),lt(28," Incorrect password "),Le()(),ke(29,"button",14),Pt("click",function(i){return t.register(i)}),lt(30,"Sign in"),Le()()()),2&n){const r=Na(7),i=Na(14);Et(6),Mt("ngModel",t.user.email),Et(4),Mt("hidden",r.valid||r.untouched),Et(3),Mt("ngModel",t.user.username),Et(4),Mt("hidden",i.valid||i.untouched),Et(3),Mt("ngModel",t.password),Et(4),Mt("ngModel",t.passwordConfirm),Et(3),Mt("hidden",t.passwordValidation),Et(2),Mt("disabled",i.invalid||r.invalid||!t.passwordValidation)}},dependencies:[dd,jo,td,nd,Cu,fd,hd,pd,Eu,qo],styles:[".form-signup[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signup[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.inputs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child):not(:last-child)   input[_ngcontent-%COMP%]{border-radius:0;border-bottom:0}.inputs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   input[_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.inputs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child   input[_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]});class Fu{constructor(n,t,r){this.userService=n,this.http=t,this.router=r,this.username=n.username,this.email=n.email,this.avatar=n.avatar}ngOnInit(){this.http.get(`https://185.26.53.195:5058/api/Post/GetPostByUserEmail?email=${this.email}`).subscribe(n=>{this.posts=n})}editPost(n){this.router.navigate(["/post",{id:n.id}])}}Fu.\u0275fac=function(n){return new(n||Fu)(se(Kr),se(ks),se(En))},Fu.\u0275cmp=lr({type:Fu,selectors:[["app-user-page"]],decls:17,vars:5,consts:[[2,"background-color","#eee"],[1,"container","py-5"],[1,"row"],[1,"col-lg-4"],[1,"card","mb-4"],[1,"card-body","text-center"],[1,"avatar-wrap"],["alt","avatar","class","rounded-circle img-fluid","style","width: 150px;",3,"src",4,"ngIf"],["alt","avatar","class","rounded-circle img-fluid empty-avatar",4,"ngIf"],[1,"my-3"],[1,"text-muted","mb-1"],[1,"col-lg-8"],[1,"card-body"],[4,"ngIf"],["alt","avatar",1,"rounded-circle","img-fluid",2,"width","150px",3,"src"],["alt","avatar",1,"rounded-circle","img-fluid","empty-avatar"],["class","post",4,"ngFor","ngForOf"],[1,"post"],[1,"d-flex","flex-row"],[1,"heading"],[1,"post-edit",3,"click"],[1,"text"]],template:function(n,t){1&n&&(ke(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),oi(7,AM,1,1,"img",7),oi(8,IM,1,0,"div",8),Le(),ke(9,"h5",9),lt(10),Le(),ke(11,"p",10),lt(12),Le()()()(),ke(13,"div",11)(14,"div",4)(15,"div",12),oi(16,TM,2,1,"ng-container",13),Le()()()()()()),2&n&&(Et(7),Mt("ngIf",t.avatar),Et(1),Mt("ngIf",!t.avatar),Et(2),Co(t.username),Et(2),Co(t.email),Et(4),Mt("ngIf",t.posts&&t.posts.length))},dependencies:[iw,Ep],styles:[".avatar-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center}.empty-avatar[_ngcontent-%COMP%]{width:150px;height:150px;border:1px solid rgba(0,0,0,.5)}.post[_ngcontent-%COMP%]{border-bottom:2px solid rgba(0,0,0,.3);padding:5px}.post-edit[_ngcontent-%COMP%]{background-color:#9b9b9b33;border-radius:50%;margin-left:5px;cursor:pointer}"]});const RM=[{path:"login",component:Du,canActivate:[di]},{path:"register",component:Iu,canActivate:[di]},{path:"profile",component:Fu,canActivate:[di]},{path:"post",component:Au,canActivate:[di]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",component:_u}];class zo{}function MM(e,n){1&e&&(ke(0,"a",8),lt(1,"Profile"),Le())}function PM(e,n){1&e&&(ke(0,"a",9),lt(1,"Create post"),Le())}function NM(e,n){1&e&&(ke(0,"a",10),lt(1,"Login"),Le())}function OM(e,n){1&e&&(ke(0,"a",11),lt(1,"Sign-up"),Le())}function kM(e,n){if(1&e){const t=Sh();ke(0,"a",12),Pt("click",function(){return St(t),tr(ka().logout())}),lt(1,"Logout"),Le()}}zo.\u0275fac=function(n){return new(n||zo)},zo.\u0275mod=Un({type:zo}),zo.\u0275inj=Hn({providers:[di],imports:[Xb.forRoot(RM),Xb]});class Tu{constructor(n,t,r,i,o){this.userService=n,this.router=t,this.cookieService=r,this.jwtTokenService=i,this.oauthService=o,this.islogged=!1}ngOnInit(){this.isloggedSub=this.userService.islogged.subscribe(n=>{this.islogged=n})}logout(){this.userService.clear(),this.cookieService.delete("token"),this.jwtTokenService.clear(),this.oauthService.logOut(),this.router.navigateByUrl("/login")}ngOnDestroy(){this.isloggedSub?.unsubscribe()}}Tu.\u0275fac=function(n){return new(n||Tu)(se(Kr),se(En),se(mu),se(Ni),se(Zc))},Tu.\u0275cmp=lr({type:Tu,selectors:[["app-menu"]],decls:13,vars:5,consts:[[1,"d-flex","justify-content-center","py-3"],[1,"nav","nav-pills"],[1,"nav-item"],["routerLink","/profile","class","nav-link link-primary","aria-current","page",4,"ngIf"],["routerLink","/post","class","nav-link link-primary",4,"ngIf"],["routerLink","/login","class","nav-link link-primary",4,"ngIf"],["routerLink","/register","class","nav-link link-primary",4,"ngIf"],["class","nav-link link-primary pointer",3,"click",4,"ngIf"],["routerLink","/profile","aria-current","page",1,"nav-link","link-primary"],["routerLink","/post",1,"nav-link","link-primary"],["routerLink","/login",1,"nav-link","link-primary"],["routerLink","/register",1,"nav-link","link-primary"],[1,"nav-link","link-primary","pointer",3,"click"]],template:function(n,t){1&n&&(ke(0,"header",0)(1,"nav")(2,"ul",1)(3,"li",2),oi(4,MM,2,0,"a",3),Le(),ke(5,"li",2),oi(6,PM,2,0,"a",4),Le(),ke(7,"li",2),oi(8,NM,2,0,"a",5),Le(),ke(9,"li",2),oi(10,OM,2,0,"a",6),Le(),ke(11,"li",2),oi(12,kM,2,0,"a",7),Le()()()()),2&n&&(Et(4),Mt("ngIf",t.islogged),Et(2),Mt("ngIf",t.islogged),Et(2),Mt("ngIf",!t.islogged),Et(2),Mt("ngIf",!t.islogged),Et(2),Mt("ngIf",t.islogged))},dependencies:[Ep,$c],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]});class Ru{}Ru.\u0275fac=function(n){return new(n||Ru)},Ru.\u0275cmp=lr({type:Ru,selectors:[["app-footer"]],decls:0,vars:0,template:function(n,t){}});class Mu{constructor(n,t,r){this.cookieService=n,this.jwtTokenService=t,this.userService=r,n.check("token")&&(this.token=n.get("token"),this.jwtTokenService.setToken(this.token),this.userService.loadInfo())}}Mu.\u0275fac=function(n){return new(n||Mu)(se(mu),se(Ni),se(Kr))},Mu.\u0275cmp=lr({type:Mu,selectors:[["app-root"]],decls:3,vars:0,template:function(n,t){1&n&&Is(0,"app-menu")(1,"router-outlet")(2,"app-footer")},dependencies:[ng,Tu,Ru]});class Ko{}Ko.\u0275fac=function(n){return new(n||Ko)},Ko.\u0275mod=Un({type:Ko,bootstrap:[Mu]}),Ko.\u0275inj=Hn({providers:[mu],imports:[T3,zo,j6,bR.forRoot(),DM]}),F3().bootstrapModule(Ko).catch(e=>console.error(e))},133:function(Gr,ls,he){var at,me;Gr=he.nmd(Gr),void 0!==(me="function"==typeof(at=function(){"use strict";var mt={},kt=null;function Bn(ie){if(Gr&&Gr.exports)try{return he(995).randomBytes(ie)}catch{}try{var te;return(self.crypto||self.msCrypto).getRandomValues(te=new Uint32Array(ie)),Array.prototype.slice.call(te)}catch{}if(!kt)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return kt(ie)}try{Bn(1)}catch{}function ki(ie,te){for(var ee=0,G=0,W=0,ue=ie.length;W<ue;++W)ie.charCodeAt(W)===te.charCodeAt(W)?++ee:++G;return!(ee<0)&&0===G}kt=null,mt.setRandomFallback=function(ie){kt=ie},mt.genSaltSync=function(ie,te){if("number"!=typeof(ie=ie||Wr))throw Error("Illegal arguments: "+typeof ie+", "+typeof te);ie<4?ie=4:ie>31&&(ie=31);var ee=[];return ee.push("$2a$"),ie<10&&ee.push("0"),ee.push(ie.toString()),ee.push("$"),ee.push(Vi(Bn(Cn),Cn)),ee.join("")},mt.genSalt=function(ie,te,ee){if("function"==typeof te&&(ee=te,te=void 0),"function"==typeof ie&&(ee=ie,ie=void 0),typeof ie>"u")ie=Wr;else if("number"!=typeof ie)throw Error("illegal arguments: "+typeof ie);function G(W){Dt(function(){try{W(null,mt.genSaltSync(ie))}catch(ue){W(ue)}})}if(!ee)return new Promise(function(W,ue){G(function(pe,Ye){pe?ue(pe):W(Ye)})});if("function"!=typeof ee)throw Error("Illegal callback: "+typeof ee);G(ee)},mt.hashSync=function(ie,te){if(typeof te>"u"&&(te=Wr),"number"==typeof te&&(te=mt.genSaltSync(te)),"string"!=typeof ie||"string"!=typeof te)throw Error("Illegal arguments: "+typeof ie+", "+typeof te);return hi(ie,te)},mt.hash=function(ie,te,ee,G){function W(ue){"string"==typeof ie&&"number"==typeof te?mt.genSalt(te,function(pe,Ye){hi(ie,Ye,ue,G)}):"string"==typeof ie&&"string"==typeof te?hi(ie,te,ue,G):Dt(ue.bind(this,Error("Illegal arguments: "+typeof ie+", "+typeof te)))}if(!ee)return new Promise(function(ue,pe){W(function(Ye,we){Ye?pe(Ye):ue(we)})});if("function"!=typeof ee)throw Error("Illegal callback: "+typeof ee);W(ee)},mt.compareSync=function(ie,te){if("string"!=typeof ie||"string"!=typeof te)throw Error("Illegal arguments: "+typeof ie+", "+typeof te);return 60===te.length&&ki(mt.hashSync(ie,te.substr(0,te.length-31)),te)},mt.compare=function(ie,te,ee,G){function W(ue){"string"==typeof ie&&"string"==typeof te?60===te.length?mt.hash(ie,te.substr(0,29),function(pe,Ye){pe?ue(pe):ue(null,ki(Ye,te))},G):Dt(ue.bind(this,null,!1)):Dt(ue.bind(this,Error("Illegal arguments: "+typeof ie+", "+typeof te)))}if(!ee)return new Promise(function(ue,pe){W(function(Ye,we){Ye?pe(Ye):ue(we)})});if("function"!=typeof ee)throw Error("Illegal callback: "+typeof ee);W(ee)},mt.getRounds=function(ie){if("string"!=typeof ie)throw Error("Illegal arguments: "+typeof ie);return parseInt(ie.split("$")[2],10)},mt.getSalt=function(ie){if("string"!=typeof ie)throw Error("Illegal arguments: "+typeof ie);if(60!==ie.length)throw Error("Illegal hash length: "+ie.length+" != 60");return ie.substring(0,29)};var Dt=typeof process<"u"&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout;var wr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),K=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],We=String.fromCharCode;function Vi(ie,te){var W,ue,ee=0,G=[];if(te<=0||te>ie.length)throw Error("Illegal len: "+te);for(;ee<te;){if(W=255&ie[ee++],G.push(wr[W>>2&63]),W=(3&W)<<4,ee>=te){G.push(wr[63&W]);break}if(ue=255&ie[ee++],G.push(wr[63&(W|=ue>>4&15)]),W=(15&ue)<<2,ee>=te){G.push(wr[63&W]);break}ue=255&ie[ee++],G.push(wr[63&(W|=ue>>6&3)]),G.push(wr[63&ue])}return G.join("")}function Hs(ie,te){var pe,Ye,we,ft,Ue,ee=0,G=ie.length,W=0,ue=[];if(te<=0)throw Error("Illegal len: "+te);for(;ee<G-1&&W<te&&(pe=(Ue=ie.charCodeAt(ee++))<K.length?K[Ue]:-1,Ye=(Ue=ie.charCodeAt(ee++))<K.length?K[Ue]:-1,!(-1==pe||-1==Ye||(ft=pe<<2>>>0,ft|=(48&Ye)>>4,ue.push(We(ft)),++W>=te||ee>=G)||(Ue=ie.charCodeAt(ee++),we=Ue<K.length?K[Ue]:-1,-1==we)||(ft=(15&Ye)<<4>>>0,ft|=(60&we)>>2,ue.push(We(ft)),++W>=te||ee>=G)));)Ue=ie.charCodeAt(ee++),ft=(3&we)<<6>>>0,ue.push(We(ft|=Ue<K.length?K[Ue]:-1)),++W;var nt=[];for(ee=0;ee<W;ee++)nt.push(ue[ee].charCodeAt(0));return nt}var ie,cs=ie={MAX_CODEPOINT:1114111,encodeUTF8:function(te,ee){var G=null;for("number"==typeof te&&(G=te,te=function(){return null});null!==G||null!==(G=te());)G<128?ee(127&G):G<2048?(ee(G>>6&31|192),ee(63&G|128)):G<65536?(ee(G>>12&15|224),ee(G>>6&63|128),ee(63&G|128)):(ee(G>>18&7|240),ee(G>>12&63|128),ee(G>>6&63|128),ee(63&G|128)),G=null},decodeUTF8:function(te,ee){for(var G,W,ue,pe,Ye=function(we){we=we.slice(0,we.indexOf(null));var Qe=Error(we.toString());throw Qe.name="TruncatedError",Qe.bytes=we,Qe};null!==(G=te());)if(128&G)if(192==(224&G))null===(W=te())&&Ye([G,W]),ee((31&G)<<6|63&W);else if(224==(240&G))(null===(W=te())||null===(ue=te()))&&Ye([G,W,ue]),ee((15&G)<<12|(63&W)<<6|63&ue);else{if(240!=(248&G))throw RangeError("Illegal starting byte: "+G);(null===(W=te())||null===(ue=te())||null===(pe=te()))&&Ye([G,W,ue,pe]),ee((7&G)<<18|(63&W)<<12|(63&ue)<<6|63&pe)}else ee(G)},UTF16toUTF8:function(te,ee){for(var G,W=null;null!==(G=null!==W?W:te());)G>=55296&&G<=57343&&null!==(W=te())&&W>=56320&&W<=57343?(ee(1024*(G-55296)+W-56320+65536),W=null):ee(G);null!==W&&ee(W)},UTF8toUTF16:function(te,ee){var G=null;for("number"==typeof te&&(G=te,te=function(){return null});null!==G||null!==(G=te());)G<=65535?ee(G):(ee(55296+((G-=65536)>>10)),ee(G%1024+56320)),G=null},encodeUTF16toUTF8:function(te,ee){ie.UTF16toUTF8(te,function(G){ie.encodeUTF8(G,ee)})},decodeUTF8toUTF16:function(te,ee){ie.decodeUTF8(te,function(G){ie.UTF8toUTF16(G,ee)})},calculateCodePoint:function(te){return te<128?1:te<2048?2:te<65536?3:4},calculateUTF8:function(te){for(var ee,G=0;null!==(ee=te());)G+=ie.calculateCodePoint(ee);return G},calculateUTF16asUTF8:function(te){var ee=0,G=0;return ie.UTF16toUTF8(te,function(W){++ee,G+=ie.calculateCodePoint(W)}),[ee,G]}};Date.now=Date.now||function(){return+new Date};var Cn=16,Wr=10,Bi=16,br=100,Dn=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],In=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],ds=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function sr(ie,te,ee,G){var W,ue=ie[te],pe=ie[te+1];return W=G[(ue^=ee[0])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[1])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[2])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[3])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[4])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[5])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[6])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[7])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[8])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[9])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[10])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[11])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[12])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[13])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],W=G[(ue^=(W+=G[768|255&pe])^ee[14])>>>24],W+=G[256|ue>>16&255],W^=G[512|ue>>8&255],W=G[(pe^=(W+=G[768|255&ue])^ee[15])>>>24],W+=G[256|pe>>16&255],W^=G[512|pe>>8&255],ue^=(W+=G[768|255&pe])^ee[16],ie[te]=pe^ee[Bi+1],ie[te+1]=ue,ie}function or(ie,te){for(var ee=0,G=0;ee<4;++ee)G=G<<8|255&ie[te],te=(te+1)%ie.length;return{key:G,offp:te}}function ar(ie,te,ee){for(var Ye,G=0,W=[0,0],ue=te.length,pe=ee.length,we=0;we<ue;we++)G=(Ye=or(ie,G)).offp,te[we]=te[we]^Ye.key;for(we=0;we<ue;we+=2)W=sr(W,0,te,ee),te[we]=W[0],te[we+1]=W[1];for(we=0;we<pe;we+=2)W=sr(W,0,te,ee),ee[we]=W[0],ee[we+1]=W[1]}function js(ie,te,ee,G,W){var Ye,ue=ds.slice(),pe=ue.length;if(ee<4||ee>31){if(Ye=Error("Illegal number of rounds (4-31): "+ee),G)return void Dt(G.bind(this,Ye));throw Ye}if(te.length!==Cn){if(Ye=Error("Illegal salt length: "+te.length+" != "+Cn),G)return void Dt(G.bind(this,Ye));throw Ye}ee=1<<ee>>>0;var we,Qe,Ue,ft=0;function nt(){if(W&&W(ft/ee),!(ft<ee)){for(ft=0;ft<64;ft++)for(Ue=0;Ue<pe>>1;Ue++)sr(ue,Ue<<1,we,Qe);var Lt=[];for(ft=0;ft<pe;ft++)Lt.push((ue[ft]>>24&255)>>>0),Lt.push((ue[ft]>>16&255)>>>0),Lt.push((ue[ft]>>8&255)>>>0),Lt.push((255&ue[ft])>>>0);return G?void G(null,Lt):Lt}for(var Fe=Date.now();ft<ee&&(ft+=1,ar(ie,we,Qe),ar(te,we,Qe),!(Date.now()-Fe>br)););G&&Dt(nt)}if(Int32Array?(we=new Int32Array(Dn),Qe=new Int32Array(In)):(we=Dn.slice(),Qe=In.slice()),function fs(ie,te,ee,G){for(var we,W=0,ue=[0,0],pe=ee.length,Ye=G.length,Qe=0;Qe<pe;Qe++)W=(we=or(te,W)).offp,ee[Qe]=ee[Qe]^we.key;for(W=0,Qe=0;Qe<pe;Qe+=2)W=(we=or(ie,W)).offp,ue[0]^=we.key,W=(we=or(ie,W)).offp,ue[1]^=we.key,ue=sr(ue,0,ee,G),ee[Qe]=ue[0],ee[Qe+1]=ue[1];for(Qe=0;Qe<Ye;Qe+=2)W=(we=or(ie,W)).offp,ue[0]^=we.key,W=(we=or(ie,W)).offp,ue[1]^=we.key,ue=sr(ue,0,ee,G),G[Qe]=ue[0],G[Qe+1]=ue[1]}(te,ie,we,Qe),typeof G<"u")nt();else for(var pi;;)if(typeof(pi=nt())<"u")return pi||[]}function hi(ie,te,ee,G){var W,ue,pe;if("string"!=typeof ie||"string"!=typeof te){if(W=Error("Invalid string / salt: Not a string"),ee)return void Dt(ee.bind(this,W));throw W}if("$"!==te.charAt(0)||"2"!==te.charAt(1)){if(W=Error("Invalid salt version: "+te.substring(0,2)),ee)return void Dt(ee.bind(this,W));throw W}if("$"===te.charAt(2))ue=String.fromCharCode(0),pe=3;else{if("a"!==(ue=te.charAt(2))&&"b"!==ue&&"y"!==ue||"$"!==te.charAt(3)){if(W=Error("Invalid salt revision: "+te.substring(2,4)),ee)return void Dt(ee.bind(this,W));throw W}pe=4}if(te.charAt(pe+2)>"$"){if(W=Error("Missing salt rounds"),ee)return void Dt(ee.bind(this,W));throw W}var Qe=10*parseInt(te.substring(pe,pe+1),10)+parseInt(te.substring(pe+1,pe+2),10),ft=te.substring(pe+3,pe+25),Ue=function Li(ie){var te=[],ee=0;return cs.encodeUTF16toUTF8(function(){return ee>=ie.length?null:ie.charCodeAt(ee++)},function(G){te.push(G)}),te}(ie+=ue>="a"?"\0":""),nt=Hs(ft,Cn);function pi(Fe){var Lt=[];return Lt.push("$2"),ue>="a"&&Lt.push(ue),Lt.push("$"),Qe<10&&Lt.push("0"),Lt.push(Qe.toString()),Lt.push("$"),Lt.push(Vi(nt,nt.length)),Lt.push(Vi(Fe,4*ds.length-1)),Lt.join("")}if(typeof ee>"u")return pi(js(Ue,nt,Qe));js(Ue,nt,Qe,function(Fe,Lt){Fe?ee(Fe,null):ee(null,pi(Lt))},G)}return mt.encodeBase64=Vi,mt.decodeBase64=Hs,mt})?at.apply(ls,[]):at)&&(Gr.exports=me)},573:(Gr,ls)=>{var s,l,d,p,g,m,v,b,C,A,w,u,at={userAgent:!1},Yn={},me=me||(s=Math,d=(l={}).lib={},p=d.Base=function(){function x(){}return{extend:function(_){x.prototype=this;var S=new x;return _&&S.mixIn(_),S.hasOwnProperty("init")||(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var _=this.extend();return _.init.apply(_,arguments),_},init:function(){},mixIn:function(_){for(var S in _)_.hasOwnProperty(S)&&(this[S]=_[S]);_.hasOwnProperty("toString")&&(this.toString=_.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),g=d.WordArray=p.extend({init:function(x,_){x=this.words=x||[],this.sigBytes=null!=_?_:4*x.length},toString:function(x){return(x||v).stringify(this)},concat:function(x){var _=this.words,S=x.words,T=this.sigBytes,D=x.sigBytes;if(this.clamp(),T%4)for(var M=0;M<D;M++)_[T+M>>>2]|=(S[M>>>2]>>>24-M%4*8&255)<<24-(T+M)%4*8;else for(M=0;M<D;M+=4)_[T+M>>>2]=S[M>>>2];return this.sigBytes+=D,this},clamp:function(){var x=this.words,_=this.sigBytes;x[_>>>2]&=4294967295<<32-_%4*8,x.length=s.ceil(_/4)},clone:function(){var x=p.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var _=[],S=0;S<x;S+=4)_.push(4294967296*s.random()|0);return new g.init(_,x)}}),m=l.enc={},v=m.Hex={stringify:function(x){for(var _=x.words,S=x.sigBytes,T=[],D=0;D<S;D++){var M=_[D>>>2]>>>24-D%4*8&255;T.push((M>>>4).toString(16)),T.push((15&M).toString(16))}return T.join("")},parse:function(x){for(var _=x.length,S=[],T=0;T<_;T+=2)S[T>>>3]|=parseInt(x.substr(T,2),16)<<24-T%8*4;return new g.init(S,_/2)}},b=m.Latin1={stringify:function(x){for(var _=x.words,S=x.sigBytes,T=[],D=0;D<S;D++)T.push(String.fromCharCode(_[D>>>2]>>>24-D%4*8&255));return T.join("")},parse:function(x){for(var _=x.length,S=[],T=0;T<_;T++)S[T>>>2]|=(255&x.charCodeAt(T))<<24-T%4*8;return new g.init(S,_)}},C=m.Utf8={stringify:function(x){try{return decodeURIComponent(escape(b.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return b.parse(unescape(encodeURIComponent(x)))}},A=d.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(x){"string"==typeof x&&(x=C.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var _=this._data,S=_.words,T=_.sigBytes,D=this.blockSize,O=T/(4*D),V=(O=x?s.ceil(O):s.max((0|O)-this._minBufferSize,0))*D,k=s.min(4*V,T);if(V){for(var X=0;X<V;X+=D)this._doProcessBlock(S,X);var Y=S.splice(0,V);_.sigBytes-=k}return new g.init(Y,k)},clone:function(){var x=p.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0}),d.Hasher=A.extend({cfg:p.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){return x&&this._append(x),this._doFinalize()},blockSize:16,_createHelper:function(x){return function(_,S){return new x.init(S).finalize(_)}},_createHmacHelper:function(x){return function(_,S){return new w.HMAC.init(x,S).finalize(_)}}}),w=l.algo={},l);(function(s){var p,u=(p=me).lib,l=u.Base,d=u.WordArray;(p=p.x64={}).Word=l.extend({init:function(g,m){this.high=g,this.low=m}}),p.WordArray=l.extend({init:function(g,m){g=this.words=g||[],this.sigBytes=null!=m?m:8*g.length},toX32:function(){for(var g=this.words,m=g.length,v=[],b=0;b<m;b++){var C=g[b];v.push(C.high),v.push(C.low)}return d.create(v,this.sigBytes)},clone:function(){for(var g=l.clone.call(this),m=g.words=this.words.slice(0),v=m.length,b=0;b<v;b++)m[b]=m[b].clone();return g}})})(),me.lib.Cipher||function(s){var u=(x=me).lib,l=u.Base,d=u.WordArray,p=u.BufferedBlockAlgorithm,g=x.enc.Base64,m=x.algo.EvpKDF,v=u.Cipher=p.extend({cfg:l.extend(),createEncryptor:function(S,T){return this.create(this._ENC_XFORM_MODE,S,T)},createDecryptor:function(S,T){return this.create(this._DEC_XFORM_MODE,S,T)},init:function(S,T,D){this.cfg=this.cfg.extend(D),this._xformMode=S,this._key=T,this.reset()},reset:function(){p.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){return S&&this._append(S),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(S){return{encrypt:function(T,D,M){return("string"==typeof D?_:w).encrypt(S,T,D,M)},decrypt:function(T,D,M){return("string"==typeof D?_:w).decrypt(S,T,D,M)}}}});u.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var I=x.mode={},b=function(S,T,D){var M=this._iv;M?this._iv=void 0:M=this._prevBlock;for(var O=0;O<D;O++)S[T+O]^=M[O]},C=(u.BlockCipherMode=l.extend({createEncryptor:function(S,T){return this.Encryptor.create(S,T)},createDecryptor:function(S,T){return this.Decryptor.create(S,T)},init:function(S,T){this._cipher=S,this._iv=T}})).extend();C.Encryptor=C.extend({processBlock:function(S,T){var D=this._cipher,M=D.blockSize;b.call(this,S,T,M),D.encryptBlock(S,T),this._prevBlock=S.slice(T,T+M)}}),C.Decryptor=C.extend({processBlock:function(S,T){var D=this._cipher,M=D.blockSize,O=S.slice(T,T+M);D.decryptBlock(S,T),b.call(this,S,T,M),this._prevBlock=O}}),I=I.CBC=C,C=(x.pad={}).Pkcs7={pad:function(S,T){for(var D,M=(D=(D=4*T)-S.sigBytes%D)<<24|D<<16|D<<8|D,O=[],V=0;V<D;V+=4)O.push(M);D=d.create(O,D),S.concat(D)},unpad:function(S){S.sigBytes-=255&S.words[S.sigBytes-1>>>2]}},u.BlockCipher=v.extend({cfg:v.cfg.extend({mode:I,padding:C}),reset:function(){v.reset.call(this);var S=(T=this.cfg).iv,T=T.mode;if(this._xformMode==this._ENC_XFORM_MODE)var D=T.createEncryptor;else D=T.createDecryptor,this._minBufferSize=1;this._mode=D.call(T,this,S&&S.words)},_doProcessBlock:function(S,T){this._mode.processBlock(S,T)},_doFinalize:function(){var S=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){S.pad(this._data,this.blockSize);var T=this._process(!0)}else T=this._process(!0),S.unpad(T);return T},blockSize:4});var A=u.CipherParams=l.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),w=(I=(x.format={}).OpenSSL={stringify:function(S){var T=S.ciphertext;return((S=S.salt)?d.create([1398893684,1701076831]).concat(S).concat(T):T).toString(g)},parse:function(S){var T=(S=g.parse(S)).words;if(1398893684==T[0]&&1701076831==T[1]){var D=d.create(T.slice(2,4));T.splice(0,4),S.sigBytes-=16}return A.create({ciphertext:S,salt:D})}},u.SerializableCipher=l.extend({cfg:l.extend({format:I}),encrypt:function(S,T,D,M){M=this.cfg.extend(M);var O=S.createEncryptor(D,M);return T=O.finalize(T),A.create({ciphertext:T,key:D,iv:(O=O.cfg).iv,algorithm:S,mode:O.mode,padding:O.padding,blockSize:S.blockSize,formatter:M.format})},decrypt:function(S,T,D,M){return M=this.cfg.extend(M),T=this._parse(T,M.format),S.createDecryptor(D,M).finalize(T.ciphertext)},_parse:function(S,T){return"string"==typeof S?T.parse(S,this):S}})),x=(x.kdf={}).OpenSSL={execute:function(S,T,D,M){return M||(M=d.random(8)),S=m.create({keySize:T+D}).compute(S,M),D=d.create(S.words.slice(T),4*D),S.sigBytes=4*T,A.create({key:S,iv:D,salt:M})}},_=u.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:x}),encrypt:function(S,T,D,M){return D=(M=this.cfg.extend(M)).kdf.execute(D,S.keySize,S.ivSize),M.iv=D.iv,(S=w.encrypt.call(this,S,T,D.key,M)).mixIn(D),S},decrypt:function(S,T,D,M){return M=this.cfg.extend(M),T=this._parse(T,M.format),D=M.kdf.execute(D,S.keySize,S.ivSize,T.salt),M.iv=D.iv,w.decrypt.call(this,S,T,D.key,M)}})}(),function(){for(var s=me,u=s.lib.BlockCipher,X=s.algo,l=[],d=[],p=[],g=[],m=[],v=[],b=[],C=[],A=[],I=[],w=[],x=0;256>x;x++)w[x]=128>x?x<<1:x<<1^283;var _=0,S=0;for(x=0;256>x;x++){var T;l[_]=T=(T=S^S<<1^S<<2^S<<3^S<<4)>>>8^255&T^99,d[T]=_;var D=w[_],M=w[D],O=w[M],V=257*w[T]^16843008*T;p[_]=V<<24|V>>>8,g[_]=V<<16|V>>>16,m[_]=V<<8|V>>>24,v[_]=V,b[T]=(V=16843009*O^65537*M^257*D^16843008*_)<<24|V>>>8,C[T]=V<<16|V>>>16,A[T]=V<<8|V>>>24,I[T]=V,_?(_=D^w[w[w[O^D]]],S^=w[w[S]]):_=S=1}var k=[0,1,2,4,8,16,32,64,128,27,54];X=X.AES=u.extend({_doReset:function(){for(var Y=(P=this._key).words,R=P.sigBytes/4,P=4*((this._nRounds=R+6)+1),B=this._keySchedule=[],H=0;H<P;H++)if(H<R)B[H]=Y[H];else{var $=B[H-1];H%R?6<R&&H%R==4&&($=l[$>>>24]<<24|l[$>>>16&255]<<16|l[$>>>8&255]<<8|l[255&$]):($=l[($=$<<8|$>>>24)>>>24]<<24|l[$>>>16&255]<<16|l[$>>>8&255]<<8|l[255&$],$^=k[H/R|0]<<24),B[H]=B[H-R]^$}for(Y=this._invKeySchedule=[],R=0;R<P;R++)H=P-R,$=R%4?B[H]:B[H-4],Y[R]=4>R||4>=H?$:b[l[$>>>24]]^C[l[$>>>16&255]]^A[l[$>>>8&255]]^I[l[255&$]]},encryptBlock:function(Y,R){this._doCryptBlock(Y,R,this._keySchedule,p,g,m,v,l)},decryptBlock:function(Y,R){var P=Y[R+1];Y[R+1]=Y[R+3],Y[R+3]=P,this._doCryptBlock(Y,R,this._invKeySchedule,b,C,A,I,d),P=Y[R+1],Y[R+1]=Y[R+3],Y[R+3]=P},_doCryptBlock:function(Y,R,P,B,H,$,J,j){for(var z=this._nRounds,Me=Y[R]^P[0],yt=Y[R+1]^P[1],dt=Y[R+2]^P[2],$e=Y[R+3]^P[3],q=4,Q=1;Q<z;Q++){var Ce=B[Me>>>24]^H[yt>>>16&255]^$[dt>>>8&255]^J[255&$e]^P[q++],ve=B[yt>>>24]^H[dt>>>16&255]^$[$e>>>8&255]^J[255&Me]^P[q++],Ie=B[dt>>>24]^H[$e>>>16&255]^$[Me>>>8&255]^J[255&yt]^P[q++];$e=B[$e>>>24]^H[Me>>>16&255]^$[yt>>>8&255]^J[255&dt]^P[q++],Me=Ce,yt=ve,dt=Ie}Ce=(j[Me>>>24]<<24|j[yt>>>16&255]<<16|j[dt>>>8&255]<<8|j[255&$e])^P[q++],ve=(j[yt>>>24]<<24|j[dt>>>16&255]<<16|j[$e>>>8&255]<<8|j[255&Me])^P[q++],Ie=(j[dt>>>24]<<24|j[$e>>>16&255]<<16|j[Me>>>8&255]<<8|j[255&yt])^P[q++],$e=(j[$e>>>24]<<24|j[Me>>>16&255]<<16|j[yt>>>8&255]<<8|j[255&dt])^P[q++],Y[R]=Ce,Y[R+1]=ve,Y[R+2]=Ie,Y[R+3]=$e},keySize:8}),s.AES=u._createHelper(X)}(),function(){function s(w,x){var _=(this._lBlock>>>w^this._rBlock)&x;this._rBlock^=_,this._lBlock^=_<<w}function u(w,x){var _=(this._rBlock>>>w^this._lBlock)&x;this._lBlock^=_,this._rBlock^=_<<w}var p,l=me,d=(p=l.lib).WordArray,g=l.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],v=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],b=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],C=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],A=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],I=g.DES=(p=p.BlockCipher).extend({_doReset:function(){for(var w=this._key.words,x=[],_=0;56>_;_++){var S=m[_]-1;x[_]=w[S>>>5]>>>31-S%32&1}for(w=this._subKeys=[],S=0;16>S;S++){var T=w[S]=[],D=b[S];for(_=0;24>_;_++)T[_/6|0]|=x[(v[_]-1+D)%28]<<31-_%6,T[4+(_/6|0)]|=x[28+(v[_+24]-1+D)%28]<<31-_%6;for(T[0]=T[0]<<1|T[0]>>>31,_=1;7>_;_++)T[_]>>>=4*(_-1)+3;T[7]=T[7]<<5|T[7]>>>27}for(x=this._invSubKeys=[],_=0;16>_;_++)x[_]=w[15-_]},encryptBlock:function(w,x){this._doCryptBlock(w,x,this._subKeys)},decryptBlock:function(w,x){this._doCryptBlock(w,x,this._invSubKeys)},_doCryptBlock:function(w,x,_){this._lBlock=w[x],this._rBlock=w[x+1],s.call(this,4,252645135),s.call(this,16,65535),u.call(this,2,858993459),u.call(this,8,16711935),s.call(this,1,1431655765);for(var S=0;16>S;S++){for(var T=_[S],D=this._lBlock,M=this._rBlock,O=0,V=0;8>V;V++)O|=C[V][((M^T[V])&A[V])>>>0];this._lBlock=M,this._rBlock=D^O}_=this._lBlock,this._lBlock=this._rBlock,this._rBlock=_,s.call(this,1,1431655765),u.call(this,8,16711935),u.call(this,2,858993459),s.call(this,16,65535),s.call(this,4,252645135),w[x]=this._lBlock,w[x+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});l.DES=p._createHelper(I),g=g.TripleDES=p.extend({_doReset:function(){var w=this._key.words;this._des1=I.createEncryptor(d.create(w.slice(0,2))),this._des2=I.createEncryptor(d.create(w.slice(2,4))),this._des3=I.createEncryptor(d.create(w.slice(4,6)))},encryptBlock:function(w,x){this._des1.encryptBlock(w,x),this._des2.decryptBlock(w,x),this._des3.encryptBlock(w,x)},decryptBlock:function(w,x){this._des3.decryptBlock(w,x),this._des2.encryptBlock(w,x),this._des1.decryptBlock(w,x)},keySize:6,ivSize:2,blockSize:2}),l.TripleDES=p._createHelper(g)}(),u=me.lib.WordArray,me.enc.Base64={stringify:function(l){var d=l.words,p=l.sigBytes,g=this._map;l.clamp(),l=[];for(var m=0;m<p;m+=3)for(var v=(d[m>>>2]>>>24-m%4*8&255)<<16|(d[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|d[m+2>>>2]>>>24-(m+2)%4*8&255,b=0;4>b&&m+.75*b<p;b++)l.push(g.charAt(v>>>6*(3-b)&63));if(d=g.charAt(64))for(;l.length%4;)l.push(d);return l.join("")},parse:function(l){var d=l.length,p=this._map;(g=p.charAt(64))&&-1!=(g=l.indexOf(g))&&(d=g);for(var g=[],m=0,v=0;v<d;v++)if(v%4){var b=p.indexOf(l.charAt(v-1))<<v%4*2,C=p.indexOf(l.charAt(v))>>>6-v%4*2;g[m>>>2]|=(b|C)<<24-m%4*8,m++}return u.create(g,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(s){function u(I,w,x,_,S,T,D){return((I=I+(w&x|~w&_)+S+D)<<T|I>>>32-T)+w}function l(I,w,x,_,S,T,D){return((I=I+(w&_|x&~_)+S+D)<<T|I>>>32-T)+w}function d(I,w,x,_,S,T,D){return((I=I+(w^x^_)+S+D)<<T|I>>>32-T)+w}function p(I,w,x,_,S,T,D){return((I=I+(x^(w|~_))+S+D)<<T|I>>>32-T)+w}for(var g=me,m=(b=g.lib).WordArray,v=b.Hasher,b=g.algo,C=[],A=0;64>A;A++)C[A]=4294967296*s.abs(s.sin(A+1))|0;b=b.MD5=v.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(I,w){for(var x=0;16>x;x++)I[_=w+x]=16711935&((S=I[_])<<8|S>>>24)|4278255360&(S<<24|S>>>8);var _,S=I[w+1],T=I[w+2],D=I[w+3],M=I[w+4],O=I[w+5],V=I[w+6],k=I[w+7],X=I[w+8],Y=I[w+9],R=I[w+10],P=I[w+11],B=I[w+12],H=I[w+13],$=I[w+14],J=I[w+15],j=u(j=(x=this._hash.words)[0],Q=x[1],q=x[2],z=x[3],_=I[w+0],7,C[0]),z=u(z,j,Q,q,S,12,C[1]),q=u(q,z,j,Q,T,17,C[2]),Q=u(Q,q,z,j,D,22,C[3]);j=u(j,Q,q,z,M,7,C[4]),z=u(z,j,Q,q,O,12,C[5]),q=u(q,z,j,Q,V,17,C[6]),Q=u(Q,q,z,j,k,22,C[7]),j=u(j,Q,q,z,X,7,C[8]),z=u(z,j,Q,q,Y,12,C[9]),q=u(q,z,j,Q,R,17,C[10]),Q=u(Q,q,z,j,P,22,C[11]),j=u(j,Q,q,z,B,7,C[12]),z=u(z,j,Q,q,H,12,C[13]),q=u(q,z,j,Q,$,17,C[14]),j=l(j,Q=u(Q,q,z,j,J,22,C[15]),q,z,S,5,C[16]),z=l(z,j,Q,q,V,9,C[17]),q=l(q,z,j,Q,P,14,C[18]),Q=l(Q,q,z,j,_,20,C[19]),j=l(j,Q,q,z,O,5,C[20]),z=l(z,j,Q,q,R,9,C[21]),q=l(q,z,j,Q,J,14,C[22]),Q=l(Q,q,z,j,M,20,C[23]),j=l(j,Q,q,z,Y,5,C[24]),z=l(z,j,Q,q,$,9,C[25]),q=l(q,z,j,Q,D,14,C[26]),Q=l(Q,q,z,j,X,20,C[27]),j=l(j,Q,q,z,H,5,C[28]),z=l(z,j,Q,q,T,9,C[29]),q=l(q,z,j,Q,k,14,C[30]),j=d(j,Q=l(Q,q,z,j,B,20,C[31]),q,z,O,4,C[32]),z=d(z,j,Q,q,X,11,C[33]),q=d(q,z,j,Q,P,16,C[34]),Q=d(Q,q,z,j,$,23,C[35]),j=d(j,Q,q,z,S,4,C[36]),z=d(z,j,Q,q,M,11,C[37]),q=d(q,z,j,Q,k,16,C[38]),Q=d(Q,q,z,j,R,23,C[39]),j=d(j,Q,q,z,H,4,C[40]),z=d(z,j,Q,q,_,11,C[41]),q=d(q,z,j,Q,D,16,C[42]),Q=d(Q,q,z,j,V,23,C[43]),j=d(j,Q,q,z,Y,4,C[44]),z=d(z,j,Q,q,B,11,C[45]),q=d(q,z,j,Q,J,16,C[46]),j=p(j,Q=d(Q,q,z,j,T,23,C[47]),q,z,_,6,C[48]),z=p(z,j,Q,q,k,10,C[49]),q=p(q,z,j,Q,$,15,C[50]),Q=p(Q,q,z,j,O,21,C[51]),j=p(j,Q,q,z,B,6,C[52]),z=p(z,j,Q,q,D,10,C[53]),q=p(q,z,j,Q,R,15,C[54]),Q=p(Q,q,z,j,S,21,C[55]),j=p(j,Q,q,z,X,6,C[56]),z=p(z,j,Q,q,J,10,C[57]),q=p(q,z,j,Q,V,15,C[58]),Q=p(Q,q,z,j,H,21,C[59]),j=p(j,Q,q,z,M,6,C[60]),z=p(z,j,Q,q,P,10,C[61]),q=p(q,z,j,Q,T,15,C[62]),Q=p(Q,q,z,j,Y,21,C[63]),x[0]=x[0]+j|0,x[1]=x[1]+Q|0,x[2]=x[2]+q|0,x[3]=x[3]+z|0},_doFinalize:function(){var I=this._data,w=I.words,x=8*this._nDataBytes,_=8*I.sigBytes;w[_>>>5]|=128<<24-_%32;var S=s.floor(x/4294967296);for(w[15+(_+64>>>9<<4)]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),w[14+(_+64>>>9<<4)]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),I.sigBytes=4*(w.length+1),this._process(),w=(I=this._hash).words,x=0;4>x;x++)w[x]=16711935&((_=w[x])<<8|_>>>24)|4278255360&(_<<24|_>>>8);return I},clone:function(){var I=v.clone.call(this);return I._hash=this._hash.clone(),I}}),g.MD5=v._createHelper(b),g.HmacMD5=v._createHmacHelper(b)}(Math),function(){var s=me,u=(p=s.lib).WordArray,l=p.Hasher,d=[],p=s.algo.SHA1=l.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,m){for(var v=this._hash.words,b=v[0],C=v[1],A=v[2],I=v[3],w=v[4],x=0;80>x;x++){if(16>x)d[x]=0|g[m+x];else{var _=d[x-3]^d[x-8]^d[x-14]^d[x-16];d[x]=_<<1|_>>>31}_=(b<<5|b>>>27)+w+d[x],_=20>x?_+(1518500249+(C&A|~C&I)):40>x?_+(1859775393+(C^A^I)):60>x?_+((C&A|C&I|A&I)-1894007588):_+((C^A^I)-899497514),w=I,I=A,A=C<<30|C>>>2,C=b,b=_}v[0]=v[0]+b|0,v[1]=v[1]+C|0,v[2]=v[2]+A|0,v[3]=v[3]+I|0,v[4]=v[4]+w|0},_doFinalize:function(){var g=this._data,m=g.words,v=8*this._nDataBytes,b=8*g.sigBytes;return m[b>>>5]|=128<<24-b%32,m[14+(b+64>>>9<<4)]=Math.floor(v/4294967296),m[15+(b+64>>>9<<4)]=v,g.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var g=l.clone.call(this);return g._hash=this._hash.clone(),g}});s.SHA1=l._createHelper(p),s.HmacSHA1=l._createHmacHelper(p)}(),function(s){for(var u=me,l=(x=u.lib).WordArray,d=x.Hasher,x=u.algo,p=[],g=[],m=function(S){return 4294967296*(S-(0|S))|0},v=2,b=0;64>b;){var C;e:{for(var A=s.sqrt(C=v),I=2;I<=A;I++)if(!(C%I)){C=!1;break e}C=!0}C&&(8>b&&(p[b]=m(s.pow(v,.5))),g[b]=m(s.pow(v,1/3)),b++),v++}var w=[];x=x.SHA256=d.extend({_doReset:function(){this._hash=new l.init(p.slice(0))},_doProcessBlock:function(_,S){for(var T=this._hash.words,D=T[0],M=T[1],O=T[2],V=T[3],k=T[4],X=T[5],Y=T[6],R=T[7],P=0;64>P;P++){if(16>P)w[P]=0|_[S+P];else{var B=w[P-15],H=w[P-2];w[P]=((B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3)+w[P-7]+((H<<15|H>>>17)^(H<<13|H>>>19)^H>>>10)+w[P-16]}B=R+((k<<26|k>>>6)^(k<<21|k>>>11)^(k<<7|k>>>25))+(k&X^~k&Y)+g[P]+w[P],H=((D<<30|D>>>2)^(D<<19|D>>>13)^(D<<10|D>>>22))+(D&M^D&O^M&O),R=Y,Y=X,X=k,k=V+B|0,V=O,O=M,M=D,D=B+H|0}T[0]=T[0]+D|0,T[1]=T[1]+M|0,T[2]=T[2]+O|0,T[3]=T[3]+V|0,T[4]=T[4]+k|0,T[5]=T[5]+X|0,T[6]=T[6]+Y|0,T[7]=T[7]+R|0},_doFinalize:function(){var _=this._data,S=_.words,T=8*this._nDataBytes,D=8*_.sigBytes;return S[D>>>5]|=128<<24-D%32,S[14+(D+64>>>9<<4)]=s.floor(T/4294967296),S[15+(D+64>>>9<<4)]=T,_.sigBytes=4*S.length,this._process(),this._hash},clone:function(){var _=d.clone.call(this);return _._hash=this._hash.clone(),_}}),u.SHA256=d._createHelper(x),u.HmacSHA256=d._createHmacHelper(x)}(Math),function(){var s=me,u=s.lib.WordArray,l=(d=s.algo).SHA256,d=d.SHA224=l.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var p=l._doFinalize.call(this);return p.sigBytes-=4,p}});s.SHA224=l._createHelper(d),s.HmacSHA224=l._createHmacHelper(d)}(),function(){function s(){return d.create.apply(d,arguments)}for(var u=me,l=u.lib.Hasher,d=(g=u.x64).Word,p=g.WordArray,g=u.algo,m=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],v=[],b=0;80>b;b++)v[b]=s();g=g.SHA512=l.extend({_doReset:function(){this._hash=new p.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(C,A){for(var M,I=(M=this._hash.words)[0],w=M[1],x=M[2],_=M[3],S=M[4],T=M[5],D=M[6],O=I.high,V=I.low,k=w.high,X=w.low,Y=x.high,R=x.low,P=_.high,B=_.low,H=S.high,$=S.low,J=T.high,j=T.low,z=D.high,q=D.low,Q=(M=M[7]).high,Ce=M.low,ve=O,Ie=V,$e=k,Me=X,yt=Y,dt=R,jt=P,Tt=B,xn=H,tn=$,Nn=J,Ze=j,Ut=z,It=q,Se=Q,wn=Ce,bt=0;80>bt;bt++){var Or=v[bt];if(16>bt)var On=Or.high=0|C[A+2*bt],Be=Or.low=0|C[A+2*bt+1];else{On=((Be=(On=v[bt-15]).high)>>>1|(_r=On.low)<<31)^(Be>>>8|_r<<24)^Be>>>7;var _r=(_r>>>1|Be<<31)^(_r>>>8|Be<<24)^(_r>>>7|Be<<25),wi=((Be=(wi=v[bt-2]).high)>>>19|(St=wi.low)<<13)^(Be<<3|St>>>29)^Be>>>6,St=(St>>>19|Be<<13)^(St<<3|Be>>>29)^(St>>>6|Be<<26);Or.high=On=(On=(On=On+(bs=(Be=v[bt-7]).high)+((Be=_r+Be.low)>>>0<_r>>>0?1:0))+wi+((Be+=St)>>>0<St>>>0?1:0))+(tr=(Qr=v[bt-16]).high)+((Be+=Qr=Qr.low)>>>0<Qr>>>0?1:0),Or.low=Be}var bs=xn&Nn^~xn&Ut,Qr=tn&Ze^~tn&It,il=(Or=ve&$e^ve&yt^$e&yt,Ie&Me^Ie&dt^Me&dt),le=(St=m[bt]).high,st=St.low,tr=Se+((xn>>>14|tn<<18)^(xn>>>18|tn<<14)^(xn<<23|tn>>>9))+((St=wn+((tn>>>14|xn<<18)^(tn>>>18|xn<<14)^(tn<<23|xn>>>9)))>>>0<wn>>>0?1:0);Se=Ut,wn=It,Ut=Nn,It=Ze,Nn=xn,Ze=tn,xn=jt+(tr=(tr=(tr=tr+bs+((St+=Qr)>>>0<Qr>>>0?1:0))+le+((St+=st)>>>0<st>>>0?1:0))+On+((St+=Be)>>>0<Be>>>0?1:0))+((tn=Tt+St|0)>>>0<Tt>>>0?1:0)|0,jt=yt,Tt=dt,yt=$e,dt=Me,$e=ve,Me=Ie,ve=tr+(Or=(_r=(ve>>>28|Ie<<4)^(ve<<30|Ie>>>2)^(ve<<25|Ie>>>7))+Or+((Be=(wi=(Ie>>>28|ve<<4)^(Ie<<30|ve>>>2)^(Ie<<25|ve>>>7))+il)>>>0<wi>>>0?1:0))+((Ie=St+Be|0)>>>0<St>>>0?1:0)|0}V=I.low=V+Ie,I.high=O+ve+(V>>>0<Ie>>>0?1:0),X=w.low=X+Me,w.high=k+$e+(X>>>0<Me>>>0?1:0),R=x.low=R+dt,x.high=Y+yt+(R>>>0<dt>>>0?1:0),B=_.low=B+Tt,_.high=P+jt+(B>>>0<Tt>>>0?1:0),$=S.low=$+tn,S.high=H+xn+($>>>0<tn>>>0?1:0),j=T.low=j+Ze,T.high=J+Nn+(j>>>0<Ze>>>0?1:0),q=D.low=q+It,D.high=z+Ut+(q>>>0<It>>>0?1:0),Ce=M.low=Ce+wn,M.high=Q+Se+(Ce>>>0<wn>>>0?1:0)},_doFinalize:function(){var C=this._data,A=C.words,I=8*this._nDataBytes,w=8*C.sigBytes;return A[w>>>5]|=128<<24-w%32,A[30+(w+128>>>10<<5)]=Math.floor(I/4294967296),A[31+(w+128>>>10<<5)]=I,C.sigBytes=4*A.length,this._process(),this._hash.toX32()},clone:function(){var C=l.clone.call(this);return C._hash=this._hash.clone(),C},blockSize:32}),u.SHA512=l._createHelper(g),u.HmacSHA512=l._createHmacHelper(g)}(),function(){var s=me,u=(p=s.x64).Word,l=p.WordArray,d=(p=s.algo).SHA512,p=p.SHA384=d.extend({_doReset:function(){this._hash=new l.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var g=d._doFinalize.call(this);return g.sigBytes-=16,g}});s.SHA384=d._createHelper(p),s.HmacSHA384=d._createHmacHelper(p)}(),function(){var s=me,u=(C=s.lib).WordArray,l=C.Hasher,C=s.algo,d=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),g=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),v=u.create([0,1518500249,1859775393,2400959708,2840853838]),b=u.create([1352829926,1548603684,1836072691,2053994217,0]);C=C.RIPEMD160=l.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,I){for(var w=0;16>w;w++)A[x=I+w]=16711935&((_=A[x])<<8|_>>>24)|4278255360&(_<<24|_>>>8);var x,V,k,X,Y,R,P,B,H,$,J,j,_=v.words,S=b.words,T=d.words,D=p.words,M=g.words,O=m.words;for(P=V=(x=this._hash.words)[0],B=k=x[1],H=X=x[2],$=Y=x[3],J=R=x[4],w=0;80>w;w+=1)j=V+A[I+T[w]]|0,j=16>w?j+((k^X^Y)+_[0]):32>w?j+((k&X|~k&Y)+_[1]):48>w?j+(((k|~X)^Y)+_[2]):64>w?j+((k&Y|X&~Y)+_[3]):j+((k^(X|~Y))+_[4]),j=(j=(j|=0)<<M[w]|j>>>32-M[w])+R|0,V=R,R=Y,Y=X<<10|X>>>22,X=k,k=j,j=P+A[I+D[w]]|0,j=16>w?j+((B^(H|~$))+S[0]):32>w?j+((B&$|H&~$)+S[1]):48>w?j+(((B|~H)^$)+S[2]):64>w?j+((B&H|~B&$)+S[3]):j+((B^H^$)+S[4]),j=(j=(j|=0)<<O[w]|j>>>32-O[w])+J|0,P=J,J=$,$=H<<10|H>>>22,H=B,B=j;j=x[1]+X+$|0,x[1]=x[2]+Y+J|0,x[2]=x[3]+R+P|0,x[3]=x[4]+V+B|0,x[4]=x[0]+k+H|0,x[0]=j},_doFinalize:function(){var A=this._data,I=A.words,w=8*this._nDataBytes,x=8*A.sigBytes;for(I[x>>>5]|=128<<24-x%32,I[14+(x+64>>>9<<4)]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),A.sigBytes=4*(I.length+1),this._process(),I=(A=this._hash).words,w=0;5>w;w++)I[w]=16711935&((x=I[w])<<8|x>>>24)|4278255360&(x<<24|x>>>8);return A},clone:function(){var A=l.clone.call(this);return A._hash=this._hash.clone(),A}}),s.RIPEMD160=l._createHelper(C),s.HmacRIPEMD160=l._createHmacHelper(C)}(Math),function(){var u=me.enc.Utf8;me.algo.HMAC=me.lib.Base.extend({init:function(l,d){l=this._hasher=new l.init,"string"==typeof d&&(d=u.parse(d));var p=l.blockSize,g=4*p;d.sigBytes>g&&(d=l.finalize(d)),d.clamp();for(var m=this._oKey=d.clone(),v=this._iKey=d.clone(),b=m.words,C=v.words,A=0;A<p;A++)b[A]^=1549556828,C[A]^=909522486;m.sigBytes=v.sigBytes=g,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var d=this._hasher;return l=d.finalize(l),d.reset(),d.finalize(this._oKey.clone().concat(l))}})}(),function(){var d,s=me,u=(d=s.lib).Base,l=d.WordArray,p=(d=s.algo).HMAC,g=d.PBKDF2=u.extend({cfg:u.extend({keySize:4,hasher:d.SHA1,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,v){for(var b=p.create((_=this.cfg).hasher,m),C=l.create(),A=l.create([1]),I=C.words,w=A.words,x=_.keySize,_=_.iterations;I.length<x;){var S=b.update(v).finalize(A);b.reset();for(var T=S.words,D=T.length,M=S,O=1;O<_;O++){M=b.finalize(M),b.reset();for(var V=M.words,k=0;k<D;k++)T[k]^=V[k]}C.concat(S),w[0]++}return C.sigBytes=4*x,C}});s.PBKDF2=function(m,v,b){return g.create(b).compute(m,v)}}();var Dt,mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kt="=";function Bn(s){var u,l,d="";for(u=0;u+3<=s.length;u+=3)l=parseInt(s.substring(u,u+3),16),d+=mt.charAt(l>>6)+mt.charAt(63&l);if(u+1==s.length?(l=parseInt(s.substring(u,u+1),16),d+=mt.charAt(l<<2)):u+2==s.length&&(l=parseInt(s.substring(u,u+2),16),d+=mt.charAt(l>>2)+mt.charAt((3&l)<<4)),kt)for(;(3&d.length)>0;)d+=kt;return d}function Mr(s){var l,p,g,u="",d=0;for(l=0;l<s.length&&s.charAt(l)!=kt;++l)!((g=mt.indexOf(s.charAt(l)))<0)&&(0==d?(u+=In(g>>2),p=3&g,d=1):1==d?(u+=In(p<<2|g>>4),p=15&g,d=2):2==d?(u+=In(p),u+=In(g>>2),p=3&g,d=3):(u+=In(p<<2|g>>4),u+=In(15&g),d=0));return 1==d&&(u+=In(p<<2)),u}function K(s,u,l){null!=s&&("number"==typeof s?this.fromNumber(s,u,l):this.fromString(s,null==u&&"string"!=typeof s?256:u))}function We(){return new K(null)}"Microsoft Internet Explorer"==at.appName?(K.prototype.am=function Hs(s,u,l,d,p,g){for(var m=32767&u,v=u>>15;--g>=0;){var b=32767&this[s],C=this[s++]>>15,A=v*b+C*m;p=((b=m*b+((32767&A)<<15)+l[d]+(1073741823&p))>>>30)+(A>>>15)+v*C+(p>>>30),l[d++]=1073741823&b}return p},Dt=30):"Netscape"!=at.appName?(K.prototype.am=function Vi(s,u,l,d,p,g){for(;--g>=0;){var m=u*this[s++]+l[d]+p;p=Math.floor(m/67108864),l[d++]=67108863&m}return p},Dt=26):(K.prototype.am=function cs(s,u,l,d,p,g){for(var m=16383&u,v=u>>14;--g>=0;){var b=16383&this[s],C=this[s++]>>14,A=v*b+C*m;p=((b=m*b+((16383&A)<<14)+l[d]+p)>>28)+(A>>14)+v*C,l[d++]=268435455&b}return p},Dt=28),K.prototype.DB=Dt,K.prototype.DM=(1<<Dt)-1,K.prototype.DV=1<<Dt,K.prototype.FV=Math.pow(2,52),K.prototype.F1=52-Dt,K.prototype.F2=2*Dt-52;var br,Dn,Wr="0123456789abcdefghijklmnopqrstuvwxyz",Bi=new Array;for(br="0".charCodeAt(0),Dn=0;Dn<=9;++Dn)Bi[br++]=Dn;for(br="a".charCodeAt(0),Dn=10;Dn<36;++Dn)Bi[br++]=Dn;for(br="A".charCodeAt(0),Dn=10;Dn<36;++Dn)Bi[br++]=Dn;function In(s){return Wr.charAt(s)}function ds(s,u){return Bi[s.charCodeAt(u)]??-1}function ar(s){var u=We();return u.fromInt(s),u}function G(s){var l,u=1;return 0!=(l=s>>>16)&&(s=l,u+=16),0!=(l=s>>8)&&(s=l,u+=8),0!=(l=s>>4)&&(s=l,u+=4),0!=(l=s>>2)&&(s=l,u+=2),0!=(l=s>>1)&&(s=l,u+=1),u}function Fe(s){this.m=s}function Hi(s){this.m=s,this.mp=s.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<s.DB-15)-1,this.mt2=2*s.t}function f0(s,u){return s&u}function Us(s,u){return s|u}function Go(s,u){return s^u}function Wo(s,u){return s&~u}function ju(s){if(0==s)return-1;var u=0;return 65535&s||(s>>=16,u+=16),255&s||(s>>=8,u+=8),15&s||(s>>=4,u+=4),3&s||(s>>=2,u+=2),1&s||++u,u}function bd(s){for(var u=0;0!=s;)s&=s-1,++u;return u}function Pr(){}function zu(s){return s}function Ui(s){this.r2=We(),this.q3=We(),K.ONE.dlShiftTo(2*s.t,this.r2),this.mu=this.r2.divide(s),this.m=s}Fe.prototype.convert=function Lt(s){return s.s<0||s.compareTo(this.m)>=0?s.mod(this.m):s},Fe.prototype.revert=function Gg(s){return s},Fe.prototype.reduce=function Pu(s){s.divRemTo(this.m,null,s)},Fe.prototype.mulTo=function Wg(s,u,l){s.multiplyTo(u,l),this.reduce(l)},Fe.prototype.sqrTo=function Jg(s,u){s.squareTo(u),this.reduce(u)},Hi.prototype.convert=function Yg(s){var u=We();return s.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),s.s<0&&u.compareTo(K.ZERO)>0&&this.m.subTo(u,u),u},Hi.prototype.revert=function Zg(s){var u=We();return s.copyTo(u),this.reduce(u),u},Hi.prototype.reduce=function Qg(s){for(;s.t<=this.mt2;)s[s.t++]=0;for(var u=0;u<this.m.t;++u){var l=32767&s[u],d=l*this.mpl+((l*this.mph+(s[u]>>15)*this.mpl&this.um)<<15)&s.DM;for(s[l=u+this.m.t]+=this.m.am(0,d,s,u,0,this.m.t);s[l]>=s.DV;)s[l]-=s.DV,s[++l]++}s.clamp(),s.drShiftTo(this.m.t,s),s.compareTo(this.m)>=0&&s.subTo(this.m,s)},Hi.prototype.mulTo=function gd(s,u,l){s.multiplyTo(u,l),this.reduce(l)},Hi.prototype.sqrTo=function e0(s,u){s.squareTo(u),this.reduce(u)},K.prototype.copyTo=function sr(s){for(var u=this.t-1;u>=0;--u)s[u]=this[u];s.t=this.t,s.s=this.s},K.prototype.fromInt=function or(s){this.t=1,this.s=s<0?-1:0,s>0?this[0]=s:s<-1?this[0]=s+this.DV:this.t=0},K.prototype.fromString=function fs(s,u){var l;if(16==u)l=4;else if(8==u)l=3;else if(256==u)l=8;else if(2==u)l=1;else if(32==u)l=5;else{if(4!=u)return void this.fromRadix(s,u);l=2}this.t=0,this.s=0;for(var d=s.length,p=!1,g=0;--d>=0;){var m=8==l?255&s[d]:ds(s,d);m<0?"-"==s.charAt(d)&&(p=!0):(p=!1,0==g?this[this.t++]=m:g+l>this.DB?(this[this.t-1]|=(m&(1<<this.DB-g)-1)<<g,this[this.t++]=m>>this.DB-g):this[this.t-1]|=m<<g,(g+=l)>=this.DB&&(g-=this.DB))}8==l&&128&s[0]&&(this.s=-1,g>0&&(this[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),p&&K.ZERO.subTo(this,this)},K.prototype.clamp=function js(){for(var s=this.s&this.DM;this.t>0&&this[this.t-1]==s;)--this.t},K.prototype.dlShiftTo=function ue(s,u){var l;for(l=this.t-1;l>=0;--l)u[l+s]=this[l];for(l=s-1;l>=0;--l)u[l]=0;u.t=this.t+s,u.s=this.s},K.prototype.drShiftTo=function pe(s,u){for(var l=s;l<this.t;++l)u[l-s]=this[l];u.t=Math.max(this.t-s,0),u.s=this.s},K.prototype.lShiftTo=function Ye(s,u){var v,l=s%this.DB,d=this.DB-l,p=(1<<d)-1,g=Math.floor(s/this.DB),m=this.s<<l&this.DM;for(v=this.t-1;v>=0;--v)u[v+g+1]=this[v]>>d|m,m=(this[v]&p)<<l;for(v=g-1;v>=0;--v)u[v]=0;u[g]=m,u.t=this.t+g+1,u.s=this.s,u.clamp()},K.prototype.rShiftTo=function we(s,u){u.s=this.s;var l=Math.floor(s/this.DB);if(l>=this.t)u.t=0;else{var d=s%this.DB,p=this.DB-d,g=(1<<d)-1;u[0]=this[l]>>d;for(var m=l+1;m<this.t;++m)u[m-l-1]|=(this[m]&g)<<p,u[m-l]=this[m]>>d;d>0&&(u[this.t-l-1]|=(this.s&g)<<p),u.t=this.t-l,u.clamp()}},K.prototype.subTo=function Qe(s,u){for(var l=0,d=0,p=Math.min(s.t,this.t);l<p;)d+=this[l]-s[l],u[l++]=d&this.DM,d>>=this.DB;if(s.t<this.t){for(d-=s.s;l<this.t;)d+=this[l],u[l++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;l<s.t;)d-=s[l],u[l++]=d&this.DM,d>>=this.DB;d-=s.s}u.s=d<0?-1:0,d<-1?u[l++]=this.DV+d:d>0&&(u[l++]=d),u.t=l,u.clamp()},K.prototype.multiplyTo=function ft(s,u){var l=this.abs(),d=s.abs(),p=l.t;for(u.t=p+d.t;--p>=0;)u[p]=0;for(p=0;p<d.t;++p)u[p+l.t]=l.am(0,d[p],u,p,0,l.t);u.s=0,u.clamp(),this.s!=s.s&&K.ZERO.subTo(u,u)},K.prototype.squareTo=function Ue(s){for(var u=this.abs(),l=s.t=2*u.t;--l>=0;)s[l]=0;for(l=0;l<u.t-1;++l){var d=u.am(l,u[l],s,2*l,0,1);(s[l+u.t]+=u.am(l+1,2*u[l],s,2*l+1,d,u.t-l-1))>=u.DV&&(s[l+u.t]-=u.DV,s[l+u.t+1]=1)}s.t>0&&(s[s.t-1]+=u.am(l,u[l],s,2*l,0,1)),s.s=0,s.clamp()},K.prototype.divRemTo=function nt(s,u,l){var d=s.abs();if(!(d.t<=0)){var p=this.abs();if(p.t<d.t)return u?.fromInt(0),void(null!=l&&this.copyTo(l));null==l&&(l=We());var g=We(),m=this.s,v=s.s,b=this.DB-G(d[d.t-1]);b>0?(d.lShiftTo(b,g),p.lShiftTo(b,l)):(d.copyTo(g),p.copyTo(l));var C=g.t,A=g[C-1];if(0!=A){var I=A*(1<<this.F1)+(C>1?g[C-2]>>this.F2:0),w=this.FV/I,x=(1<<this.F1)/I,_=1<<this.F2,S=l.t,T=S-C,D=u??We();for(g.dlShiftTo(T,D),l.compareTo(D)>=0&&(l[l.t++]=1,l.subTo(D,l)),K.ONE.dlShiftTo(C,D),D.subTo(g,g);g.t<C;)g[g.t++]=0;for(;--T>=0;){var M=l[--S]==A?this.DM:Math.floor(l[S]*w+(l[S-1]+_)*x);if((l[S]+=g.am(0,M,l,T,0,C))<M)for(g.dlShiftTo(T,D),l.subTo(D,l);l[S]<--M;)l.subTo(D,l)}null!=u&&(l.drShiftTo(C,u),m!=v&&K.ZERO.subTo(u,u)),l.t=C,l.clamp(),b>0&&l.rShiftTo(b,l),m<0&&K.ZERO.subTo(l,l)}}},K.prototype.invDigit=function Xg(){if(this.t<1)return 0;var s=this[0];if(!(1&s))return 0;var u=3&s;return(u=(u=(u=(u=u*(2-(15&s)*u)&15)*(2-(255&s)*u)&255)*(2-((65535&s)*u&65535))&65535)*(2-s*u%this.DV)%this.DV)>0?this.DV-u:-u},K.prototype.isEven=function t0(){return 0==(this.t>0?1&this[0]:this.s)},K.prototype.exp=function Nu(s,u){if(s>4294967295||s<1)return K.ONE;var l=We(),d=We(),p=u.convert(this),g=G(s)-1;for(p.copyTo(l);--g>=0;)if(u.sqrTo(l,d),(s&1<<g)>0)u.mulTo(d,p,l);else{var m=l;l=d,d=m}return u.revert(l)},K.prototype.toString=function hi(s){if(this.s<0)return"-"+this.negate().toString(s);var u;if(16==s)u=4;else if(8==s)u=3;else if(2==s)u=1;else if(32==s)u=5;else{if(4!=s)return this.toRadix(s);u=2}var d,l=(1<<u)-1,p=!1,g="",m=this.t,v=this.DB-m*this.DB%u;if(m-- >0)for(v<this.DB&&(d=this[m]>>v)>0&&(p=!0,g=In(d));m>=0;)v<u?(d=(this[m]&(1<<v)-1)<<u-v,d|=this[--m]>>(v+=this.DB-u)):(d=this[m]>>(v-=u)&l,v<=0&&(v+=this.DB,--m)),d>0&&(p=!0),p&&(g+=In(d));return p?g:"0"},K.prototype.negate=function ie(){var s=We();return K.ZERO.subTo(this,s),s},K.prototype.abs=function te(){return this.s<0?this.negate():this},K.prototype.compareTo=function ee(s){var u=this.s-s.s;if(0!=u)return u;var l=this.t;if(0!=(u=l-s.t))return this.s<0?-u:u;for(;--l>=0;)if(0!=(u=this[l]-s[l]))return u;return 0},K.prototype.bitLength=function W(){return this.t<=0?0:this.DB*(this.t-1)+G(this[this.t-1]^this.s&this.DM)},K.prototype.mod=function pi(s){var u=We();return this.abs().divRemTo(s,null,u),this.s<0&&u.compareTo(K.ZERO)>0&&s.subTo(u,u),u},K.prototype.modPowInt=function n0(s,u){var l;return l=s<256||u.isEven()?new Fe(u):new Hi(u),this.exp(s,l)},K.ZERO=ar(0),K.ONE=ar(1),Pr.prototype.convert=zu,Pr.prototype.revert=zu,Pr.prototype.mulTo=function Ku(s,u,l){s.multiplyTo(u,l)},Pr.prototype.sqrTo=function Gu(s,u){s.squareTo(u)},Ui.prototype.convert=function Wu(s){if(s.s<0||s.t>2*this.m.t)return s.mod(this.m);if(s.compareTo(this.m)<0)return s;var u=We();return s.copyTo(u),this.reduce(u),u},Ui.prototype.revert=function Md(s){return s},Ui.prototype.reduce=function Pd(s){for(s.drShiftTo(this.m.t-1,this.r2),s.t>this.m.t+1&&(s.t=this.m.t+1,s.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);s.compareTo(this.r2)<0;)s.dAddOffset(1,this.m.t+1);for(s.subTo(this.r2,s);s.compareTo(this.m)>=0;)s.subTo(this.m,s)},Ui.prototype.mulTo=function Ju(s,u,l){s.multiplyTo(u,l),this.reduce(l)},Ui.prototype.sqrTo=function Ht(s,u){s.squareTo(u),this.reduce(u)};var Ke=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Zo=(1<<26)/Ke[Ke.length-1];function Re(){this.i=0,this.j=0,this.S=new Array}K.prototype.chunkSize=function o0(s){return Math.floor(Math.LN2*this.DB/Math.log(s))},K.prototype.toRadix=function vd(s){if(null==s&&(s=10),0==this.signum()||s<2||s>36)return"0";var u=this.chunkSize(s),l=Math.pow(s,u),d=ar(l),p=We(),g=We(),m="";for(this.divRemTo(d,p,g);p.signum()>0;)m=(l+g.intValue()).toString(s).substr(1)+m,p.divRemTo(d,p,g);return g.intValue().toString(s)+m},K.prototype.fromRadix=function a0(s,u){this.fromInt(0),null==u&&(u=10);for(var l=this.chunkSize(u),d=Math.pow(u,l),p=!1,g=0,m=0,v=0;v<s.length;++v){var b=ds(s,v);b<0?"-"==s.charAt(v)&&0==this.signum()&&(p=!0):(m=u*m+b,++g>=l&&(this.dMultiply(d),this.dAddOffset(m,0),g=0,m=0))}g>0&&(this.dMultiply(Math.pow(u,g)),this.dAddOffset(m,0)),p&&K.ZERO.subTo(this,this)},K.prototype.fromNumber=function yd(s,u,l){if("number"==typeof u)if(s<2)this.fromInt(1);else for(this.fromNumber(s,l),this.testBit(s-1)||this.bitwiseTo(K.ONE.shiftLeft(s-1),Us,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>s&&this.subTo(K.ONE.shiftLeft(s-1),this);else{var d=new Array,p=7&s;d.length=1+(s>>3),u.nextBytes(d),p>0?d[0]&=(1<<p)-1:d[0]=0,this.fromString(d,256)}},K.prototype.bitwiseTo=function d0(s,u,l){var d,p,g=Math.min(s.t,this.t);for(d=0;d<g;++d)l[d]=u(this[d],s[d]);if(s.t<this.t){for(p=s.s&this.DM,d=g;d<this.t;++d)l[d]=u(this[d],p);l.t=this.t}else{for(p=this.s&this.DM,d=g;d<s.t;++d)l[d]=u(p,s[d]);l.t=s.t}l.s=u(this.s,s.s),l.clamp()},K.prototype.changeBit=function Cd(s,u){var l=K.ONE.shiftLeft(s);return this.bitwiseTo(l,u,l),l},K.prototype.addTo=function Sr(s,u){for(var l=0,d=0,p=Math.min(s.t,this.t);l<p;)d+=this[l]+s[l],u[l++]=d&this.DM,d>>=this.DB;if(s.t<this.t){for(d+=s.s;l<this.t;)d+=this[l],u[l++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;l<s.t;)d+=s[l],u[l++]=d&this.DM,d>>=this.DB;d+=s.s}u.s=d<0?-1:0,d>0?u[l++]=d:d<-1&&(u[l++]=this.DV+d),u.t=l,u.clamp()},K.prototype.dMultiply=function Jo(s){this[this.t]=this.am(0,s-1,this,0,0,this.t),++this.t,this.clamp()},K.prototype.dAddOffset=function qu(s,u){if(0!=s){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=s;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}},K.prototype.multiplyLowerTo=function Td(s,u,l){var p,d=Math.min(this.t+s.t,u);for(l.s=0,l.t=d;d>0;)l[--d]=0;for(p=l.t-this.t;d<p;++d)l[d+this.t]=this.am(0,s[d],l,d,0,this.t);for(p=Math.min(s.t,u);d<p;++d)this.am(0,s[d],l,d,0,u-d);l.clamp()},K.prototype.multiplyUpperTo=function Rd(s,u,l){--u;var d=l.t=this.t+s.t-u;for(l.s=0;--d>=0;)l[d]=0;for(d=Math.max(u-this.t,0);d<s.t;++d)l[this.t+d-u]=this.am(u-d,s[d],l,0,0,this.t+d-u);l.clamp(),l.drShiftTo(1,l)},K.prototype.modInt=function wt(s){if(s<=0)return 0;var u=this.DV%s,l=this.s<0?s-1:0;if(this.t>0)if(0==u)l=this[0]%s;else for(var d=this.t-1;d>=0;--d)l=(u*l+this[d])%s;return l},K.prototype.millerRabin=function _t(s){var u=this.subtract(K.ONE),l=u.getLowestSetBit();if(l<=0)return!1;var d=u.shiftRight(l);(s=s+1>>1)>Ke.length&&(s=Ke.length);for(var p=We(),g=0;g<s;++g){p.fromInt(Ke[Math.floor(Math.random()*Ke.length)]);var m=p.modPow(d,this);if(0!=m.compareTo(K.ONE)&&0!=m.compareTo(u)){for(var v=1;v++<l&&0!=m.compareTo(u);)if(0==(m=m.modPowInt(2,this)).compareTo(K.ONE))return!1;if(0!=m.compareTo(u))return!1}}return!0},K.prototype.clone=function Ou(){var s=We();return this.copyTo(s),s},K.prototype.intValue=function md(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},K.prototype.byteValue=function r0(){return 0==this.t?this.s:this[0]<<24>>24},K.prototype.shortValue=function s0(){return 0==this.t?this.s:this[0]<<16>>16},K.prototype.signum=function gi(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},K.prototype.toByteArray=function u0(){var s=this.t,u=new Array;u[0]=this.s;var d,l=this.DB-s*this.DB%8,p=0;if(s-- >0)for(l<this.DB&&(d=this[s]>>l)!=(this.s&this.DM)>>l&&(u[p++]=d|this.s<<this.DB-l);s>=0;)l<8?(d=(this[s]&(1<<l)-1)<<8-l,d|=this[--s]>>(l+=this.DB-8)):(d=this[s]>>(l-=8)&255,l<=0&&(l+=this.DB,--s)),128&d&&(d|=-256),0==p&&(128&this.s)!=(128&d)&&++p,(p>0||d!=this.s)&&(u[p++]=d);return u},K.prototype.equals=function xd(s){return 0==this.compareTo(s)},K.prototype.min=function l0(s){return this.compareTo(s)<0?this:s},K.prototype.max=function c0(s){return this.compareTo(s)>0?this:s},K.prototype.and=function h0(s){var u=We();return this.bitwiseTo(s,f0,u),u},K.prototype.or=function ku(s){var u=We();return this.bitwiseTo(s,Us,u),u},K.prototype.xor=function Lu(s){var u=We();return this.bitwiseTo(s,Go,u),u},K.prototype.andNot=function wd(s){var u=We();return this.bitwiseTo(s,Wo,u),u},K.prototype.not=function Vu(){for(var s=We(),u=0;u<this.t;++u)s[u]=this.DM&~this[u];return s.t=this.t,s.s=~this.s,s},K.prototype.shiftLeft=function Bu(s){var u=We();return s<0?this.rShiftTo(-s,u):this.lShiftTo(s,u),u},K.prototype.shiftRight=function Hu(s){var u=We();return s<0?this.lShiftTo(-s,u):this.rShiftTo(s,u),u},K.prototype.getLowestSetBit=function gn(){for(var s=0;s<this.t;++s)if(0!=this[s])return s*this.DB+ju(this[s]);return this.s<0?this.t*this.DB:-1},K.prototype.bitCount=function Sd(){for(var s=0,u=this.s&this.DM,l=0;l<this.t;++l)s+=bd(this[l]^u);return s},K.prototype.testBit=function Ed(s){var u=Math.floor(s/this.DB);return u>=this.t?0!=this.s:0!=(this[u]&1<<s%this.DB)},K.prototype.setBit=function Uu(s){return this.changeBit(s,Us)},K.prototype.clearBit=function Dd(s){return this.changeBit(s,Wo)},K.prototype.flipBit=function _d(s){return this.changeBit(s,Go)},K.prototype.add=function Ad(s){var u=We();return this.addTo(s,u),u},K.prototype.subtract=function Jt(s){var u=We();return this.subTo(s,u),u},K.prototype.multiply=function ji(s){var u=We();return this.multiplyTo(s,u),u},K.prototype.divide=function p0(s){var u=We();return this.divRemTo(s,u,null),u},K.prototype.remainder=function Id(s){var u=We();return this.divRemTo(s,null,u),u},K.prototype.divideAndRemainder=function $u(s){var u=We(),l=We();return this.divRemTo(s,u,l),new Array(u,l)},K.prototype.modPow=function Nd(s,u){var d,g,l=s.bitLength(),p=ar(1);if(l<=0)return p;d=l<18?1:l<48?3:l<144?4:l<768?5:6,g=l<8?new Fe(u):u.isEven()?new Ui(u):new Hi(u);var m=new Array,v=3,b=d-1,C=(1<<d)-1;if(m[1]=g.convert(this),d>1){var A=We();for(g.sqrTo(m[1],A);v<=C;)m[v]=We(),g.mulTo(A,m[v-2],m[v]),v+=2}var w,S,I=s.t-1,x=!0,_=We();for(l=G(s[I])-1;I>=0;){for(l>=b?w=s[I]>>l-b&C:(w=(s[I]&(1<<l+1)-1)<<b-l,I>0&&(w|=s[I-1]>>this.DB+l-b)),v=d;!(1&w);)w>>=1,--v;if((l-=v)<0&&(l+=this.DB,--I),x)m[w].copyTo(p),x=!1;else{for(;v>1;)g.sqrTo(p,_),g.sqrTo(_,p),v-=2;v>0?g.sqrTo(p,_):(S=p,p=_,_=S),g.mulTo(_,m[w],p)}for(;I>=0&&!(s[I]&1<<l);)g.sqrTo(p,_),S=p,p=_,_=S,--l<0&&(l=this.DB-1,--I)}return g.revert(p)},K.prototype.modInverse=function Yo(s){var u=s.isEven();if(this.isEven()&&u||0==s.signum())return K.ZERO;for(var l=s.clone(),d=this.clone(),p=ar(1),g=ar(0),m=ar(0),v=ar(1);0!=l.signum();){for(;l.isEven();)l.rShiftTo(1,l),u?((!p.isEven()||!g.isEven())&&(p.addTo(this,p),g.subTo(s,g)),p.rShiftTo(1,p)):g.isEven()||g.subTo(s,g),g.rShiftTo(1,g);for(;d.isEven();)d.rShiftTo(1,d),u?((!m.isEven()||!v.isEven())&&(m.addTo(this,m),v.subTo(s,v)),m.rShiftTo(1,m)):v.isEven()||v.subTo(s,v),v.rShiftTo(1,v);l.compareTo(d)>=0?(l.subTo(d,l),u&&p.subTo(m,p),g.subTo(v,g)):(d.subTo(l,d),u&&m.subTo(p,m),v.subTo(g,v))}return 0!=d.compareTo(K.ONE)?K.ZERO:v.compareTo(s)>=0?v.subtract(s):v.signum()<0?(v.addTo(s,v),v.signum()<0?v.add(s):v):v},K.prototype.pow=function Fd(s){return this.exp(s,new Pr)},K.prototype.gcd=function Xo(s){var u=this.s<0?this.negate():this.clone(),l=s.s<0?s.negate():s.clone();if(u.compareTo(l)<0){var d=u;u=l,l=d}var p=u.getLowestSetBit(),g=l.getLowestSetBit();if(g<0)return u;for(p<g&&(g=p),g>0&&(u.rShiftTo(g,u),l.rShiftTo(g,l));u.signum()>0;)(p=u.getLowestSetBit())>0&&u.rShiftTo(p,u),(p=l.getLowestSetBit())>0&&l.rShiftTo(p,l),u.compareTo(l)>=0?(u.subTo(l,u),u.rShiftTo(1,u)):(l.subTo(u,l),l.rShiftTo(1,l));return g>0&&l.lShiftTo(g,l),l},K.prototype.isProbablePrime=function Od(s){var u,l=this.abs();if(1==l.t&&l[0]<=Ke[Ke.length-1]){for(u=0;u<Ke.length;++u)if(l[0]==Ke[u])return!0;return!1}if(l.isEven())return!1;for(u=1;u<Ke.length;){for(var d=Ke[u],p=u+1;p<Ke.length&&d<Zo;)d*=Ke[p++];for(d=l.modInt(d);u<p;)if(d%Ke[u++]==0)return!1}return l.millerRabin(s)},K.prototype.square=function Er(){var s=We();return this.squareTo(s),s},Re.prototype.init=function Qo(s){var u,l,d;for(u=0;u<256;++u)this.S[u]=u;for(l=0,u=0;u<256;++u)d=this.S[u],this.S[u]=this.S[l=l+this.S[u]+s[u%s.length]&255],this.S[l]=d;this.i=0,this.j=0},Re.prototype.next=function ea(){var s;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,s=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=s,this.S[s+this.S[this.i]&255]};var fe,mn,De,$s=256;function ta(){!function ht(s){mn[De++]^=255&s,mn[De++]^=s>>8&255,mn[De++]^=s>>16&255,mn[De++]^=s>>24&255,De>=$s&&(De-=$s)}((new Date).getTime())}if(null==mn){var Cr;if(mn=new Array,De=0,void 0!==Yn&&(void 0!==Yn.crypto||void 0!==Yn.msCrypto)){var Xu=Yn.crypto||Yn.msCrypto;if(Xu.getRandomValues){var hs=new Uint8Array(32);for(Xu.getRandomValues(hs),Cr=0;Cr<32;++Cr)mn[De++]=hs[Cr]}else if("Netscape"==at.appName&&at.appVersion<"5"){var Fn=Yn.crypto.random(32);for(Cr=0;Cr<Fn.length;++Cr)mn[De++]=255&Fn.charCodeAt(Cr)}}for(;De<$s;)Cr=Math.floor(65536*Math.random()),mn[De++]=Cr>>>8,mn[De++]=255&Cr;De=0,ta()}function m0(){if(null==fe){for(ta(),(fe=function g0(){return new Re}()).init(mn),De=0;De<mn.length;++De)mn[De]=0;De=0}return fe.next()}function mi(){}function Ot(s,u){return new K(s,u)}function Ld(s,u,l){for(var d="",p=0;d.length<u;)d+=l(String.fromCharCode.apply(String,s.concat([(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p]))),p+=1;return d}function Te(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Hd(s,u,l){for(var d="",p=0;d.length<u;)d+=l(s+String.fromCharCode.apply(String,[(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p])),p+=1;return d}function Xt(s,u){this.x=u,this.q=s}function ct(s,u,l,d){this.curve=s,this.x=u,this.y=l,this.z=null==d?K.ONE:d,this.zinv=null}function er(s,u,l){this.q=s,this.a=this.fromBigInteger(u),this.b=this.fromBigInteger(l),this.infinity=new ct(this,null,null)}mi.prototype.nextBytes=function kd(s){var u;for(u=0;u<s.length;++u)s[u]=m0()},Te.prototype.doPublic=function y0(s){return s.modPowInt(this.e,this.n)},Te.prototype.setPublic=function Bd(s,u){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof s)this.n=s,this.e=u;else{if(!(null!=s&&null!=u&&s.length>0&&u.length>0))throw"Invalid RSA public key";this.n=Ot(s,16),this.e=parseInt(u,16)}},Te.prototype.encrypt=function Zn(s){var u=function v0(s,u){if(u<s.length+11)throw"Message too long for RSA";for(var l=new Array,d=s.length-1;d>=0&&u>0;){var p=s.charCodeAt(d--);p<128?l[--u]=p:p>127&&p<2048?(l[--u]=63&p|128,l[--u]=p>>6|192):(l[--u]=63&p|128,l[--u]=p>>6&63|128,l[--u]=p>>12|224)}l[--u]=0;for(var g=new mi,m=new Array;u>2;){for(m[0]=0;0==m[0];)g.nextBytes(m);l[--u]=m[0]}return l[--u]=2,l[--u]=0,new K(l)}(s,this.n.bitLength()+7>>3);if(null==u)return null;var l=this.doPublic(u);if(null==l)return null;var d=l.toString(16);return 1&d.length?"0"+d:d},Te.prototype.encryptOAEP=function pt(s,u,l){var d=function Vd(s,u,l,d){var p=h.crypto.MessageDigest,g=h.crypto.Util,m=null;if(l||(l="sha1"),"string"==typeof l&&(m=p.getCanonicalAlgName(l),d=p.getHashLength(m),l=function(S){return an(g.hashHex(jn(S),m))}),s.length+2*d+2>u)throw"Message too long for RSA";var b,v="";for(b=0;b<u-s.length-2*d-2;b+=1)v+="\0";var C=l("")+v+"\x01"+s,A=new Array(d);(new mi).nextBytes(A);var I=Ld(A,C.length,l),w=[];for(b=0;b<C.length;b+=1)w[b]=C.charCodeAt(b)^I.charCodeAt(b);var x=Ld(w,A.length,l),_=[0];for(b=0;b<A.length;b+=1)_[b+1]=A[b]^x.charCodeAt(b);return new K(_.concat(w))}(s,this.n.bitLength()+7>>3,u,l);if(null==d)return null;var p=this.doPublic(d);if(null==p)return null;var g=p.toString(16);return 1&g.length?"0"+g:g},Te.prototype.type="RSA",Te.prototype.doPrivate=function qs(s){if(null==this.p||null==this.q)return s.modPow(this.d,this.n);for(var u=s.mod(this.p).modPow(this.dmp1,this.p),l=s.mod(this.q).modPow(this.dmq1,this.q);u.compareTo(l)<0;)u=u.add(this.p);return u.subtract(l).multiply(this.coeff).mod(this.p).multiply(this.q).add(l)},Te.prototype.setPrivate=function Ee(s,u,l){if(this.isPrivate=!0,"string"!=typeof s)this.n=s,this.e=u,this.d=l;else{if(!(null!=s&&null!=u&&s.length>0&&u.length>0))throw"Invalid RSA private key";this.n=Ot(s,16),this.e=parseInt(u,16),this.d=Ot(l,16)}},Te.prototype.setPrivateEx=function b0(s,u,l,d,p,g,m,v){if(this.isPrivate=!0,this.isPublic=!1,null==s)throw"RSASetPrivateEx N == null";if(null==u)throw"RSASetPrivateEx E == null";if(0==s.length)throw"RSASetPrivateEx N.length == 0";if(0==u.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=s&&null!=u&&s.length>0&&u.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=Ot(s,16),this.e=parseInt(u,16),this.d=Ot(l,16),this.p=Ot(d,16),this.q=Ot(p,16),this.dmp1=Ot(g,16),this.dmq1=Ot(m,16),this.coeff=Ot(v,16)},Te.prototype.generate=function Hn(s,u){var l=new mi,d=s>>1;this.e=parseInt(u,16);for(var p=new K(u,16),g=s/2-100,m=K.ONE.shiftLeft(g);;){for(;this.p=new K(s-d,1,l),0!=this.p.subtract(K.ONE).gcd(p).compareTo(K.ONE)||!this.p.isProbablePrime(10););for(;this.q=new K(d,1,l),0!=this.q.subtract(K.ONE).gcd(p).compareTo(K.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var v=this.p;this.p=this.q,this.q=v}var b=this.q.subtract(this.p).abs();if(!(b.bitLength()<g||b.compareTo(m)<=0)){var C=this.p.subtract(K.ONE),A=this.q.subtract(K.ONE),I=C.multiply(A);if(0==I.gcd(p).compareTo(K.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==s)){this.d=p.modInverse(I),this.dmp1=this.d.mod(C),this.dmq1=this.d.mod(A),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},Te.prototype.decrypt=function jd(s){if(s.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var u=Ot(s,16),l=this.doPrivate(u);return null==l?null:function x0(s,u){for(var l=s.toByteArray(),d=0;d<l.length&&0==l[d];)++d;if(l.length-d!=u-1||2!=l[d])return null;for(++d;0!=l[d];)if(++d>=l.length)return null;for(var p="";++d<l.length;){var g=255&l[d];g<128?p+=String.fromCharCode(g):g>191&&g<224?(p+=String.fromCharCode((31&g)<<6|63&l[d+1]),++d):(p+=String.fromCharCode((15&g)<<12|(63&l[d+1])<<6|63&l[d+2]),d+=2)}return p}(l,this.n.bitLength()+7>>3)},Te.prototype.decryptOAEP=function Yu(s,u,l){if(s.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var d=Ot(s,16),p=this.doPrivate(d);return null==p?null:function w0(s,u,l,d){var p=h.crypto.MessageDigest,g=h.crypto.Util,m=null;for(l||(l="sha1"),"string"==typeof l&&(m=p.getCanonicalAlgName(l),d=p.getHashLength(m),l=function(T){return an(g.hashHex(jn(T),m))}),s=s.toByteArray(),I=0;I<s.length;I+=1)s[I]&=255;for(;s.length<u;)s.unshift(0);if((s=String.fromCharCode.apply(String,s)).length<2*d+2)throw"Cipher too short";var I,v=s.substr(1,d),b=s.substr(d+1),C=Hd(b,d,l),A=[];for(I=0;I<v.length;I+=1)A[I]=v.charCodeAt(I)^C.charCodeAt(I);var w=Hd(String.fromCharCode.apply(String,A),s.length-d,l),x=[];for(I=0;I<b.length;I+=1)x[I]=b.charCodeAt(I)^w.charCodeAt(I);if((x=String.fromCharCode.apply(String,x)).substr(0,d)!==l(""))throw"Hash mismatch";var _=(x=x.substr(d)).indexOf("\x01");if((-1!=_?x.substr(0,_).lastIndexOf("\0"):-1)+1!=_)throw"Malformed data";return x.substr(_+1)}(p,this.n.bitLength()+7>>3,u,l)},Xt.prototype.equals=function Ud(s){return s==this||this.q.equals(s.q)&&this.x.equals(s.x)},Xt.prototype.toBigInteger=function Zu(){return this.x},Xt.prototype.negate=function zs(){return new Xt(this.q,this.x.negate().mod(this.q))},Xt.prototype.add=function na(s){return new Xt(this.q,this.x.add(s.toBigInteger()).mod(this.q))},Xt.prototype.subtract=function Qu(s){return new Xt(this.q,this.x.subtract(s.toBigInteger()).mod(this.q))},Xt.prototype.multiply=function $d(s){return new Xt(this.q,this.x.multiply(s.toBigInteger()).mod(this.q))},Xt.prototype.square=function Oe(){return new Xt(this.q,this.x.square().mod(this.q))},Xt.prototype.divide=function ra(s){return new Xt(this.q,this.x.multiply(s.toBigInteger().modInverse(this.q)).mod(this.q))},Xt.prototype.sqrt=function(){return new Xt(this.q,this.x.sqrt().mod(this.q))},ct.prototype.getX=function Qn(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ct.prototype.getY=function el(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ct.prototype.equals=function S0(s){return s==this||(this.isInfinity()?s.isInfinity():s.isInfinity()?this.isInfinity():!!s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(K.ZERO)&&s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(K.ZERO))},ct.prototype.isInfinity=function Ft(){return null==this.x&&null==this.y||this.z.equals(K.ZERO)&&!this.y.toBigInteger().equals(K.ZERO)},ct.prototype.negate=function E0(){return new ct(this.curve,this.x,this.y.negate(),this.z)},ct.prototype.add=function C0(s){if(this.isInfinity())return s;if(s.isInfinity())return this;var u=s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q),l=s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q);if(K.ZERO.equals(l))return K.ZERO.equals(u)?this.twice():this.curve.getInfinity();var d=new K("3"),p=this.x.toBigInteger(),g=this.y.toBigInteger(),b=(s.x.toBigInteger(),s.y.toBigInteger(),l.square()),C=b.multiply(l),A=p.multiply(b),I=u.square().multiply(this.z),w=I.subtract(A.shiftLeft(1)).multiply(s.z).subtract(C).multiply(l).mod(this.curve.q),x=A.multiply(d).multiply(u).subtract(g.multiply(C)).subtract(I.multiply(u)).multiply(s.z).add(u.multiply(C)).mod(this.curve.q),_=C.multiply(this.z).multiply(s.z).mod(this.curve.q);return new ct(this.curve,this.curve.fromBigInteger(w),this.curve.fromBigInteger(x),_)},ct.prototype.twice=function D0(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var s=new K("3"),u=this.x.toBigInteger(),l=this.y.toBigInteger(),d=l.multiply(this.z),p=d.multiply(l).mod(this.curve.q),g=this.curve.a.toBigInteger(),m=u.square().multiply(s);K.ZERO.equals(g)||(m=m.add(this.z.square().multiply(g)));var v=(m=m.mod(this.curve.q)).square().subtract(u.shiftLeft(3).multiply(p)).shiftLeft(1).multiply(d).mod(this.curve.q),b=m.multiply(s).multiply(u).subtract(p.shiftLeft(1)).shiftLeft(2).multiply(p).subtract(m.square().multiply(m)).mod(this.curve.q),C=d.square().multiply(d).shiftLeft(3).mod(this.curve.q);return new ct(this.curve,this.curve.fromBigInteger(v),this.curve.fromBigInteger(b),C)},ct.prototype.multiply=function ps(s){if(this.isInfinity())return this;if(0==s.signum())return this.curve.getInfinity();var C,u=s,l=u.multiply(new K("3")),d=this.negate(),p=this,g=this.curve.q.subtract(s),m=g.multiply(new K("3")),v=new ct(this.curve,this.x,this.y),b=v.negate();for(C=l.bitLength()-2;C>0;--C){p=p.twice();var A=l.testBit(C);A!=u.testBit(C)&&(p=p.add(A?this:d))}for(C=m.bitLength()-2;C>0;--C){v=v.twice();var w=m.testBit(C);w!=g.testBit(C)&&(v=v.add(w?v:b))}return p},ct.prototype.multiplyTwo=function ia(s,u,l){var d;d=s.bitLength()>l.bitLength()?s.bitLength()-1:l.bitLength()-1;for(var p=this.curve.getInfinity(),g=this.add(u);d>=0;)p=p.twice(),s.testBit(d)?p=l.testBit(d)?p.add(g):p.add(this):l.testBit(d)&&(p=p.add(u)),--d;return p},er.prototype.getQ=function qd(){return this.q},er.prototype.getA=function zd(){return this.a},er.prototype.getB=function Kd(){return this.b},er.prototype.equals=function tl(s){return s==this||this.q.equals(s.q)&&this.a.equals(s.a)&&this.b.equals(s.b)},er.prototype.getInfinity=function gs(){return this.infinity},er.prototype.fromBigInteger=function $i(s){return new Xt(this.q,s)},er.prototype.decodePointHex=function Gd(s){switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var u=s.substr(0,2),d=(s.substr(2),this.fromBigInteger(new K(C,16))),p=this.getA(),g=this.getB(),v=d.square().add(p).multiply(d).add(g).sqrt();return"03"==u&&(v=v.negate()),new ct(this,d,v);case 4:case 6:case 7:var b=(s.length-2)/2,C=s.substr(2,b),A=s.substr(b+2,b);return new ct(this,this.fromBigInteger(new K(C,16)),this.fromBigInteger(new K(A,16)));default:return null}},Xt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ct.prototype.getEncoded=function(s){var u=function(g,m){var v=g.toByteArrayUnsigned();if(m<v.length)v=v.slice(v.length-m);else for(;m>v.length;)v.unshift(0);return v},l=this.getX().toBigInteger(),d=this.getY().toBigInteger(),p=u(l,32);return s?d.isEven()?p.unshift(2):p.unshift(3):(p.unshift(4),p=p.concat(u(d,32))),p},ct.decodeFrom=function(s,u){var d=u.length-1,p=u.slice(1,1+d/2),g=u.slice(1+d/2,1+d);p.unshift(0),g.unshift(0);var m=new K(p),v=new K(g);return new ct(s,s.fromBigInteger(m),s.fromBigInteger(v))},ct.decodeFromHex=function(s,u){u.substr(0,2);var d=u.length-2,p=u.substr(2,d/2),g=u.substr(2+d/2,d/2),m=new K(p,16),v=new K(g,16);return new ct(s,s.fromBigInteger(m),s.fromBigInteger(v))},ct.prototype.add2D=function(s){if(this.isInfinity())return s;if(s.isInfinity())return this;if(this.x.equals(s.x))return this.y.equals(s.y)?this.twice():this.curve.getInfinity();var u=s.x.subtract(this.x),d=s.y.subtract(this.y).divide(u),p=d.square().subtract(this.x).subtract(s.x),g=d.multiply(this.x.subtract(p)).subtract(this.y);return new ct(this.curve,p,g)},ct.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var s=this.curve.fromBigInteger(K.valueOf(2)),u=this.curve.fromBigInteger(K.valueOf(3)),l=this.x.square().multiply(u).add(this.curve.a).divide(this.y.multiply(s)),d=l.square().subtract(this.x.multiply(s)),p=l.multiply(this.x.subtract(d)).subtract(this.y);return new ct(this.curve,d,p)},ct.prototype.multiply2D=function(s){if(this.isInfinity())return this;if(0==s.signum())return this.curve.getInfinity();var g,u=s,l=u.multiply(new K("3")),d=this.negate(),p=this;for(g=l.bitLength()-2;g>0;--g){p=p.twice();var m=l.testBit(g);m!=u.testBit(g)&&(p=p.add2D(m?this:d))}return p},ct.prototype.isOnCurve=function(){var s=this.getX().toBigInteger(),u=this.getY().toBigInteger(),l=this.curve.getA().toBigInteger(),d=this.curve.getB().toBigInteger(),p=this.curve.getQ(),g=u.multiply(u).mod(p),m=s.multiply(s).multiply(s).add(l.multiply(s)).add(d).mod(p);return g.equals(m)},ct.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ct.prototype.validate=function(){var s=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var u=this.getX().toBigInteger(),l=this.getY().toBigInteger();if(u.compareTo(K.ONE)<0||u.compareTo(s.subtract(K.ONE))>0)throw new Error("x coordinate out of bounds");if(l.compareTo(K.ONE)<0||l.compareTo(s.subtract(K.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(s).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ge=function(){var d=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),p=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),g={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function m(I,w,x){return w?g[w]:String.fromCharCode(parseInt(x,16))}var v=new String(""),A=Object.hasOwnProperty;return function(I,w){var _,x=I.match(d),S=x[0],T=!1;"{"===S?_={}:"["===S?_=[]:(_=[],T=!0);for(var D,M=[_],O=1-T,V=x.length;O<V;++O){var k;switch((S=x[O]).charCodeAt(0)){default:(k=M[0])[D||k.length]=+S,D=void 0;break;case 34:if(-1!==(S=S.substring(1,S.length-1)).indexOf("\\")&&(S=S.replace(p,m)),k=M[0],!D){if(!(k instanceof Array)){D=S||v;break}D=k.length}k[D]=S,D=void 0;break;case 91:M.unshift((k=M[0])[D||k.length]=[]),D=void 0;break;case 93:case 125:M.shift();break;case 102:(k=M[0])[D||k.length]=!1,D=void 0;break;case 110:(k=M[0])[D||k.length]=null,D=void 0;break;case 116:(k=M[0])[D||k.length]=!0,D=void 0;break;case 123:M.unshift((k=M[0])[D||k.length]={}),D=void 0}}if(T){if(1!==M.length)throw new Error;_=_[0]}else if(M.length)throw new Error;if(w){var X=function(Y,R){var P=Y[R];if(P&&"object"==typeof P){var B=null;for(var H in P)if(A.call(P,H)&&P!==Y){var $=X(P,H);void 0!==$?P[H]=$:(B||(B=[]),B.push(H))}if(B)for(var J=B.length;--J>=0;)delete P[B[J]]}return w.call(Y,R,P)};_=X({"":_},"")}return _}}();(typeof h>"u"||!h)&&(h={}),(typeof h.asn1>"u"||!h.asn1)&&(h.asn1={}),h.asn1.ASN1Util=new function(){this.integerToByteHex=function(s){var u=s.toString(16);return u.length%2==1&&(u="0"+u),u},this.bigIntToMinTwosComplementsHex=function(s){var u=s.toString(16);if("-"!=u.substr(0,1))u.length%2==1?u="0"+u:u.match(/^[0-7]/)||(u="00"+u);else{var d=u.substr(1).length;d%2==1?d+=1:u.match(/^[0-7]/)||(d+=2);for(var p="",g=0;g<d;g++)p+="f";u=new K(p,16).xor(s).add(K.ONE).toString(16).replace(/^-/,"")}return u},this.getPEMStringFromHex=function(s,u){return be(s,u)},this.newObject=function(s){var l=h.asn1,d=l.ASN1Object,p=l.DERBoolean,g=l.DERInteger,m=l.DERBitString,v=l.DEROctetString,b=l.DERNull,C=l.DERObjectIdentifier,A=l.DEREnumerated,I=l.DERUTF8String,w=l.DERNumericString,x=l.DERPrintableString,_=l.DERTeletexString,S=l.DERIA5String,T=l.DERUTCTime,D=l.DERGeneralizedTime,M=l.DERVisibleString,O=l.DERBMPString,V=l.DERSequence,k=l.DERSet,X=l.DERTaggedObject,Y=l.ASN1Util.newObject;if(s instanceof l.ASN1Object)return s;var R=Object.keys(s);if(1!=R.length)throw new Error("key of param shall be only one.");var P=R[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+P+":"))throw new Error("undefined key: "+P);if("bool"==P)return new p(s[P]);if("int"==P)return new g(s[P]);if("bitstr"==P)return new m(s[P]);if("octstr"==P)return new v(s[P]);if("null"==P)return new b(s[P]);if("oid"==P)return new C(s[P]);if("enum"==P)return new A(s[P]);if("utf8str"==P)return new I(s[P]);if("numstr"==P)return new w(s[P]);if("prnstr"==P)return new x(s[P]);if("telstr"==P)return new _(s[P]);if("ia5str"==P)return new S(s[P]);if("utctime"==P)return new T(s[P]);if("gentime"==P)return new D(s[P]);if("visstr"==P)return new M(s[P]);if("bmpstr"==P)return new O(s[P]);if("asn1"==P)return new d(s[P]);if("seq"==P){for(var B=s[P],H=[],$=0;$<B.length;$++){var J=Y(B[$]);H.push(J)}return new V({array:H})}if("set"==P){for(B=s[P],H=[],$=0;$<B.length;$++)J=Y(B[$]),H.push(J);return new k({array:H})}if("tag"==P){var j=s[P];if("[object Array]"===Object.prototype.toString.call(j)&&3==j.length){var z=Y(j[2]);return new X({tag:j[0],explicit:j[1],obj:z})}return new X(j)}},this.jsonToASN1HEX=function(s){return this.newObject(s).tohex()}},h.asn1.ASN1Util.oidHexToInt=function(s){for(var p="",u=parseInt(s.substr(0,2),16),g=(p=Math.floor(u/40)+"."+u%40,""),m=2;m<s.length;m+=2){var b=("00000000"+parseInt(s.substr(m,2),16).toString(2)).slice(-8);g+=b.substr(1,7),"0"==b.substr(0,1)&&(p=p+"."+new K(g,2).toString(10),g="")}return p},h.asn1.ASN1Util.oidIntToHex=function(s){var u=function(v){var b=v.toString(16);return 1==b.length&&(b="0"+b),b},l=function(v){var b="",A=new K(v,10).toString(2),I=7-A.length%7;7==I&&(I=0);for(var w="",x=0;x<I;x++)w+="0";for(A=w+A,x=0;x<A.length-1;x+=7){var _=A.substr(x,7);x!=A.length-7&&(_="1"+_),b+=u(parseInt(_,2))}return b};if(!s.match(/^[0-9.]+$/))throw"malformed oid string: "+s;var d="",p=s.split("."),g=40*parseInt(p[0])+parseInt(p[1]);d+=u(g),p.splice(0,2);for(var m=0;m<p.length;m++)d+=l(p[m]);return d},h.asn1.ASN1Object=function(s){this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var m=this.hV.length/2,v=m.toString(16);if(v.length%2==1&&(v="0"+v),m<128)return v;var b=v.length/2;if(b>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+m.toString(16));return(128+b).toString(16)+v},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(m){this.params=m},null!=s&&null!=s.tlv&&(this.hTLV=s.tlv,this.isModified=!1)},h.asn1.DERAbstractString=function(s){h.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(d){this.hTLV=null,this.isModified=!0,this.s=d,this.hV=zi(this.s).toLowerCase()},this.setStringHex=function(d){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=d},this.getFreshValueHex=function(){return this.hV},typeof s<"u"&&("string"==typeof s?this.setString(s):typeof s.str<"u"?this.setString(s.str):typeof s.hex<"u"&&this.setStringHex(s.hex))},ne(h.asn1.DERAbstractString,h.asn1.ASN1Object),h.asn1.DERAbstractTime=function(s){h.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(d){var p=d.getTime()+6e4*d.getTimezoneOffset();return new Date(p)},this.formatDate=function(d,p,g){var m=this.zeroPadding,v=this.localDateToUTC(d),b=String(v.getFullYear());"utc"==p&&(b=b.substr(2,2));var _=b+m(String(v.getMonth()+1),2)+m(String(v.getDate()),2)+m(String(v.getHours()),2)+m(String(v.getMinutes()),2)+m(String(v.getSeconds()),2);if(!0===g){var S=v.getMilliseconds();if(0!=S){var T=m(String(S),3);_=_+"."+(T=T.replace(/[0]+$/,""))}}return _+"Z"},this.zeroPadding=function(d,p){return d.length>=p?d:new Array(p-d.length+1).join("0")+d},this.setByParam=function(d){this.hV=null,this.hTLV=null,this.params=d},this.getString=function(){},this.setString=function(d){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=d},this.setByDate=function(d){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=d},this.setByDateValue=function(d,p,g,m,v,b){var C=new Date(Date.UTC(d,p-1,g,m,v,b,0));this.setByDate(C)},this.getFreshValueHex=function(){return this.hV}},ne(h.asn1.DERAbstractTime,h.asn1.ASN1Object),h.asn1.DERAbstractStructured=function(s){h.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(l){this.hTLV=null,this.isModified=!0,this.asn1Array=l},this.appendASN1Object=function(l){this.hTLV=null,this.isModified=!0,this.asn1Array.push(l)},this.asn1Array=new Array,typeof s<"u"&&typeof s.array<"u"&&(this.asn1Array=s.array)},ne(h.asn1.DERAbstractStructured,h.asn1.ASN1Object),h.asn1.DERBoolean=function(s){h.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==s?"010100":"0101ff"},ne(h.asn1.DERBoolean,h.asn1.ASN1Object),h.asn1.DERInteger=function(s){h.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(u){this.hTLV=null,this.isModified=!0,this.hV=h.asn1.ASN1Util.bigIntToMinTwosComplementsHex(u)},this.setByInteger=function(u){var l=new K(String(u),10);this.setByBigInteger(l)},this.setValueHex=function(u){this.hV=u},this.getFreshValueHex=function(){return this.hV},typeof s<"u"&&(typeof s.bigint<"u"?this.setByBigInteger(s.bigint):typeof s.int<"u"?this.setByInteger(s.int):"number"==typeof s?this.setByInteger(s):typeof s.hex<"u"&&this.setValueHex(s.hex))},ne(h.asn1.DERInteger,h.asn1.ASN1Object),h.asn1.DERBitString=function(s){if(void 0!==s&&typeof s.obj<"u"){var u=h.asn1.ASN1Util.newObject(s.obj);s.hex="00"+u.tohex()}h.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(l){this.hTLV=null,this.isModified=!0,this.hV=l},this.setUnusedBitsAndHexValue=function(l,d){if(l<0||7<l)throw"unused bits shall be from 0 to 7: u = "+l;var p="0"+l;this.hTLV=null,this.isModified=!0,this.hV=p+d},this.setByBinaryString=function(l){var d=8-(l=l.replace(/0+$/,"")).length%8;8==d&&(d=0),l+="0000000".substr(0,d);for(var p="",g=0;g<l.length-1;g+=8){var m=l.substr(g,8),v=parseInt(m,2).toString(16);1==v.length&&(v="0"+v),p+=v}this.hTLV=null,this.isModified=!0,this.hV="0"+d+p},this.setByBooleanArray=function(l){for(var d="",p=0;p<l.length;p++)d+=1==l[p]?"1":"0";this.setByBinaryString(d)},this.newFalseArray=function(l){for(var d=new Array(l),p=0;p<l;p++)d[p]=!1;return d},this.getFreshValueHex=function(){return this.hV},typeof s<"u"&&("string"==typeof s&&s.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(s):typeof s.hex<"u"?this.setHexValueIncludingUnusedBits(s.hex):typeof s.bin<"u"?this.setByBinaryString(s.bin):typeof s.array<"u"&&this.setByBooleanArray(s.array))},ne(h.asn1.DERBitString,h.asn1.ASN1Object),h.asn1.DEROctetString=function(s){if(void 0!==s&&typeof s.obj<"u"){var u=h.asn1.ASN1Util.newObject(s.obj);s.hex=u.tohex()}h.asn1.DEROctetString.superclass.constructor.call(this,s),this.hT="04"},ne(h.asn1.DEROctetString,h.asn1.DERAbstractString),h.asn1.DERNull=function(){h.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ne(h.asn1.DERNull,h.asn1.ASN1Object),h.asn1.DERObjectIdentifier=function(s){h.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=u},this.setValueOidString=function(u){var l=function xi(s){var u=function(v){var b=v.toString(16);return 1==b.length&&(b="0"+b),b},l=function(v){var b="",A=parseInt(v,10).toString(2),I=7-A.length%7;7==I&&(I=0);for(var w="",x=0;x<I;x++)w+="0";for(A=w+A,x=0;x<A.length-1;x+=7){var _=A.substr(x,7);x!=A.length-7&&(_="1"+_),b+=u(parseInt(_,2))}return b};try{if(!s.match(/^[0-9.]+$/))return null;var d="",p=s.split("."),g=40*parseInt(p[0],10)+parseInt(p[1],10);d+=u(g),p.splice(0,2);for(var m=0;m<p.length;m++)d+=l(p[m]);return d}catch{return null}}(u);if(null==l)throw new Error("malformed oid string: "+u);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=l},this.setValueName=function(u){var l=h.asn1.x509.OID.name2oid(u);if(""===l)throw new Error("DERObjectIdentifier oidName undefined: "+u);this.setValueOidString(l)},this.setValueNameOrOid=function(u){u.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(u):this.setValueName(u)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(u){"string"==typeof u?this.setValueNameOrOid(u):void 0!==u.oid?this.setValueNameOrOid(u.oid):void 0!==u.name?this.setValueNameOrOid(u.name):void 0!==u.hex&&this.setValueHex(u.hex)},void 0!==s&&this.setByParam(s)},ne(h.asn1.DERObjectIdentifier,h.asn1.ASN1Object),h.asn1.DEREnumerated=function(s){h.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(u){this.hTLV=null,this.isModified=!0,this.hV=h.asn1.ASN1Util.bigIntToMinTwosComplementsHex(u)},this.setByInteger=function(u){var l=new K(String(u),10);this.setByBigInteger(l)},this.setValueHex=function(u){this.hV=u},this.getFreshValueHex=function(){return this.hV},typeof s<"u"&&(typeof s.int<"u"?this.setByInteger(s.int):"number"==typeof s?this.setByInteger(s):typeof s.hex<"u"&&this.setValueHex(s.hex))},ne(h.asn1.DEREnumerated,h.asn1.ASN1Object),h.asn1.DERUTF8String=function(s){h.asn1.DERUTF8String.superclass.constructor.call(this,s),this.hT="0c"},ne(h.asn1.DERUTF8String,h.asn1.DERAbstractString),h.asn1.DERNumericString=function(s){h.asn1.DERNumericString.superclass.constructor.call(this,s),this.hT="12"},ne(h.asn1.DERNumericString,h.asn1.DERAbstractString),h.asn1.DERPrintableString=function(s){h.asn1.DERPrintableString.superclass.constructor.call(this,s),this.hT="13"},ne(h.asn1.DERPrintableString,h.asn1.DERAbstractString),h.asn1.DERTeletexString=function(s){h.asn1.DERTeletexString.superclass.constructor.call(this,s),this.hT="14"},ne(h.asn1.DERTeletexString,h.asn1.DERAbstractString),h.asn1.DERIA5String=function(s){h.asn1.DERIA5String.superclass.constructor.call(this,s),this.hT="16"},ne(h.asn1.DERIA5String,h.asn1.DERAbstractString),h.asn1.DERVisibleString=function(s){h.asn1.DERIA5String.superclass.constructor.call(this,s),this.hT="1a"},ne(h.asn1.DERVisibleString,h.asn1.DERAbstractString),h.asn1.DERBMPString=function(s){h.asn1.DERBMPString.superclass.constructor.call(this,s),this.hT="1e"},ne(h.asn1.DERBMPString,h.asn1.DERAbstractString),h.asn1.DERUTCTime=function(s){h.asn1.DERUTCTime.superclass.constructor.call(this,s),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var u=this.params;if(null==this.params&&(u={date:new Date}),"string"==typeof u){if(!u.match(/^[0-9]{12}Z$/)&&!u.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+u);this.hV=Tn(u)}else null!=u.str?this.hV=Tn(u.str):null==u.date&&1==u.millis?this.hV=Tn(this.formatDate(new Date,"utc",!0)):null!=u.date&&u.date instanceof Date?this.hV=Tn(this.formatDate(u.date,"utc",!0===u.millis)):u instanceof Date&&(this.hV=Tn(this.formatDate(u,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=s&&this.setByParam(s)},ne(h.asn1.DERUTCTime,h.asn1.DERAbstractTime),h.asn1.DERGeneralizedTime=function(s){h.asn1.DERGeneralizedTime.superclass.constructor.call(this,s),this.hT="18",this.params=s,this.getFreshValueHex=function(){var u=this.params;if(null==this.params&&(u={date:new Date}),"string"==typeof u){if(!u.match(/^[0-9]{14}Z$/)&&!u.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+u);this.hV=Tn(u)}else null!=u.str?this.hV=Tn(u.str):null==u.date&&1==u.millis?this.hV=Tn(this.formatDate(new Date,"gen",!0)):null!=u.date&&u.date instanceof Date?this.hV=Tn(this.formatDate(u.date,"gen",!0===u.millis)):u instanceof Date&&(this.hV=Tn(this.formatDate(u,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=s&&this.setByParam(s)},ne(h.asn1.DERGeneralizedTime,h.asn1.DERAbstractTime),h.asn1.DERSequence=function(s){h.asn1.DERSequence.superclass.constructor.call(this,s),this.hT="30",this.getFreshValueHex=function(){for(var u="",l=0;l<this.asn1Array.length;l++)u+=this.asn1Array[l].tohex();return this.hV=u,this.hV}},ne(h.asn1.DERSequence,h.asn1.DERAbstractStructured),h.asn1.DERSet=function(s){h.asn1.DERSet.superclass.constructor.call(this,s),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var u=new Array,l=0;l<this.asn1Array.length;l++)u.push(this.asn1Array[l].tohex());return 1==this.sortFlag&&u.sort(),this.hV=u.join(""),this.hV},typeof s<"u"&&typeof s.sortflag<"u"&&0==s.sortflag&&(this.sortFlag=!1)},ne(h.asn1.DERSet,h.asn1.DERAbstractStructured),h.asn1.DERTaggedObject=function(s){h.asn1.DERTaggedObject.superclass.constructor.call(this);var u=h.asn1,d=de.getV,g=u.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(m,v,b){this.params={tag:v,explicit:m,obj:b}},this.getFreshValueHex=function(){var m=this.params;if(null==m.explicit&&(m.explicit=!0),null!=m.tage&&(m.tag=m.tage,m.explicit=!0),null!=m.tagi&&(m.tag=m.tagi,m.explicit=!1),null!=m.str)this.hV=zi(m.str);else if(null!=m.hex)this.hV=m.hex;else{if(null==m.obj)throw new Error("str, hex nor obj not specified");var v;m.obj instanceof u.ASN1Object?v=m.obj.tohex():"object"==typeof m.obj&&(v=g(m.obj).tohex()),this.hV=m.explicit?v:d(v,0)}return null==m.tag&&(m.tag="a0"),this.hT=m.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(m){this.params=m},void 0!==s&&this.setByParam(s)},ne(h.asn1.DERTaggedObject,h.asn1.ASN1Object);var h,rt,Rn,de=new function(){};function Gs(s){for(var u="",l=0;l<s.length;l++){var d=s[l].toString(16);1==d.length&&(d="0"+d),u+=d}return u}function Tn(s){return Gs(function Ks(s){for(var u=new Array,l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return u}(s))}function ms(s){return(s=(s=s.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ws(s){return s.length%4==2?s+="==":s.length%4==3&&(s+="="),(s=s.replace(/-/g,"+")).replace(/_/g,"/")}function vt(s){return s.length%2==1&&(s="0"+s),ms(Bn(s))}function ut(s){return Mr(Ws(s))}function zi(s){return ye(yi(s)).toLowerCase()}function Xe(s){try{return decodeURIComponent(je(s))}catch{return null}}function vs(s){return Xe(function lr(s){for(var u=s.match(/.{1,2}/g),l=[],d=0;d<u.length;d++){var p=parseInt(u[d],16);161<=p&&p<=191?(l.push("c2"),l.push(u[d])):192<=p&&p<=255?(l.push("c3"),l.push((p-64).toString(16))):l.push(u[d])}return l.join("")}(s))}function an(s){for(var u="",l=0;l<s.length-1;l+=2)u+=String.fromCharCode(parseInt(s.substr(l,2),16));return u}function jn(s){for(var u="",l=0;l<s.length;l++)u+=("0"+s.charCodeAt(l).toString(16)).slice(-2);return u}function nl(s){var l=function Un(s){return Bn(s)}(s).replace(/(.{64})/g,"$1\r\n");return l.replace(/\r\n$/,"")}function be(s,u){return"-----BEGIN "+u+"-----\r\n"+nl(s)+"\r\n-----END "+u+"-----\r\n"}function it(s,u){if(-1==s.indexOf("-----BEGIN "))throw"can't find PEM header: "+u;return function ua(s){return Mr(s.replace(/[^0-9A-Za-z\/+=]*/g,""))}(s=void 0!==u?(s=s.replace(new RegExp("^[^]*-----BEGIN "+u+"-----"),"")).replace(new RegExp("-----END "+u+"-----[^]*$"),""):(s=s.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function vi(s){return Math.round(function un(s){var u,l,d,p,g,m,v,C,A,I,w;if(w=s.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return C=w[1],u=parseInt(C),2===C.length&&(50<=u&&u<100?u=1900+u:0<=u&&u<50&&(u=2e3+u)),l=parseInt(w[2])-1,d=parseInt(w[3]),p=parseInt(w[4]),g=parseInt(w[5]),m=parseInt(w[6]),v=0,""!==(A=w[7])&&(I=(A.substr(1)+"00").substr(0,3),v=parseInt(I)),Date.UTC(u,l,d,p,g,m,v);throw new Error("unsupported zulu format: "+s)}(s)/1e3)}function ye(s){return s.replace(/%/g,"")}function je(s){return s.replace(/(..)/g,"%$1")}function Rt(s){var u="malformed IPv6 address";if(!s.match(/^[0-9A-Fa-f:]+$/))throw u;var l=(s=s.toLowerCase()).split(":").length-1;if(l<2)throw u;var d=":".repeat(7-l+2),p=(s=s.replace("::",d)).split(":");if(8!=p.length)throw u;for(var g=0;g<8;g++)p[g]=("0000"+p[g]).slice(-4);return p.join("")}function qn(s){if(!s.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+s);var u=(s=s.toLowerCase()).match(/.{1,4}/g);u=u.map(function(p){return p.replace(/^0+/,"")}),u=u.map(function(p){return""==p?"0":p});var l=(s=":"+u.join(":")+":").match(/:(0:){2,}/g);if(null==l)return s.slice(1,-1);var d=l.sort().slice(-1)[0];return"::"!=(s=s.replace(d.substr(0,d.length-1),":")).substr(0,2)&&(s=s.substr(1)),"::"!=s.substr(-2,2)&&(s=s.substr(0,s.length-1)),s}function Dr(s){var u=new Error("malformed hex value");if(!s.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw u;if(8==s.length)try{return parseInt(s.substr(0,2),16)+"."+parseInt(s.substr(2,2),16)+"."+parseInt(s.substr(4,2),16)+"."+parseInt(s.substr(6,2),16)}catch{throw u}else{if(16!=s.length){if(32==s.length)return qn(s);if(64==s.length){try{return qn(s.substr(0,32))+"/"+ln(s.substr(32))}catch{throw u}return}return s}try{return Dr(s.substr(0,8))+"/"+ln(s.substr(8))}catch{throw u}}}function ln(s){var l,u=new Error("malformed mask");try{l=new K(s,16).toString(2)}catch{throw u}if(!l.match(/^1*0*$/))throw u;return l.replace(/0+$/,"").length}function Xr(s){var u=new Error("malformed IP address");if(!(s=s.toLowerCase(s)).match(/^[0-9a-f.:/]+$/))throw u;if(!s.match(/^[0-9.]+$/)){var m;if(s.match(/^[0-9.]+\/[0-9]+$/))return Xr((m=s.split("/"))[0])+Vt(parseInt(m[1]),32);if(s.match(/^[0-9a-f:]+$/)&&-1!==s.indexOf(":"))return Rt(s);if(s.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==s.indexOf(":"))return Rt((m=s.split("/"))[0])+Vt(parseInt(m[1]),128);throw u}var l=s.split(".");if(4!==l.length)throw u;var d="";try{for(var p=0;p<4;p++)d+=("0"+parseInt(l[p]).toString(16)).slice(-2);return d}catch{throw u}}function Vt(s,u){return 32==u&&0==s?"00000000":128==u&&0==s?"00000000000000000000000000000000":new K(Array(s+1).join("1")+Array(u-s+1).join("0"),2).toString(16)}function Ki(s){var d=s.match(/.{4}/g).map(function u(p){var g=parseInt(p.substr(0,2),16),m=parseInt(p.substr(2),16);if(0==g&m<128)return String.fromCharCode(m);if(g<8){var b=128|63&m;return Xe((192|(7&g)<<3|(192&m)>>6).toString(16)+b.toString(16))}b=128|(15&g)<<2|(192&m)>>6;var C=128|63&m;return Xe((224|(240&g)>>4).toString(16)+b.toString(16)+C.toString(16))});return d.join("")}function yi(s){for(var u=encodeURIComponent(s),l="",d=0;d<u.length;d++)"%"==u[d]?(l+=u.substr(d,3),d+=2):l=l+"%"+Tn(u[d]);return l}function Gi(s){return!(s.length%2!=0||!s.match(/^[0-9a-f]+$/)&&!s.match(/^[0-9A-F]+$/))}function Js(s){return!!s.match(/^[0-9A-Za-z-_.]+$/)}function Yr(s){return s.length%2==1?"0"+s:s.substr(0,1)>"7"?"00"+s:s}function zn(s){if(!Gi(s))return null;try{var u=[],l=s.substr(0,2),d=parseInt(l,16);u[0]=new String(Math.floor(d/40)),u[1]=new String(d%40);for(var p=s.substr(2),g=[],m=0;m<p.length/2;m++)g.push(parseInt(p.substr(2*m,2),16));var v=[],b="";for(m=0;m<g.length;m++)128&g[m]?b+=Zr((127&g[m]).toString(2),7):(b+=Zr((127&g[m]).toString(2),7),v.push(new String(parseInt(b,2))),b="");var C=u.join(".");return v.length>0&&(C=C+"."+v.join(".")),C}catch{return null}}de.getLblen=function(s,u){if("8"!=s.substr(u+2,1))return 1;var l=parseInt(s.substr(u+3,1));return 0==l?-1:0<l&&l<10?l+1:-2},de.getL=function(s,u){var l=de.getLblen(s,u);return l<1?"":s.substr(u+2,2*l)},de.getVblen=function(s,u){var l;return""==(l=de.getL(s,u))?-1:("8"===l.substr(0,1)?new K(l.substr(2),16):new K(l,16)).intValue()},de.getVidx=function(s,u){var l=de.getLblen(s,u);return l<0?l:u+2*(l+1)},de.getV=function(s,u){var l=de.getVidx(s,u),d=de.getVblen(s,u);return s.substr(l,2*d)},de.getTLV=function(s,u){return s.substr(u,2)+de.getL(s,u)+de.getV(s,u)},de.getTLVblen=function(s,u){return 2+2*de.getLblen(s,u)+2*de.getVblen(s,u)},de.getNextSiblingIdx=function(s,u){return de.getVidx(s,u)+2*de.getVblen(s,u)},de.getChildIdx=function(s,u){var p,g,m,l=de,d=[];p=l.getVidx(s,u),g=2*l.getVblen(s,u),"03"==s.substr(u,2)&&(p+=2,g-=2),m=0;for(var v=p;m<=g;){var b=l.getTLVblen(s,v);if((m+=b)<=g&&d.push(v),v+=b,m>=g)break}return d},de.getNthChildIdx=function(s,u,l){return de.getChildIdx(s,u)[l]},de.getIdxbyList=function(s,u,l,d){var g,m,p=de;return 0==l.length?void 0!==d&&s.substr(u,2)!==d?-1:u:(g=l.shift())>=(m=p.getChildIdx(s,u)).length?-1:p.getIdxbyList(s,m[g],l,d)},de.getIdxbyListEx=function(s,u,l,d){var g,m,p=de;if(0==l.length)return void 0!==d&&s.substr(u,2)!==d?-1:u;g=l.shift(),m=p.getChildIdx(s,u);for(var v=0,b=0;b<m.length;b++){var C=s.substr(m[b],2);if("number"==typeof g&&!p.isContextTag(C)&&v==g||"string"==typeof g&&p.isContextTag(C,g))return p.getIdxbyListEx(s,m[b],l,d);p.isContextTag(C)||v++}return-1},de.getTLVbyList=function(s,u,l,d){var p=de,g=p.getIdxbyList(s,u,l,d);return-1==g||g>=s.length?null:p.getTLV(s,g)},de.getTLVbyListEx=function(s,u,l,d){var p=de,g=p.getIdxbyListEx(s,u,l,d);return-1==g?null:p.getTLV(s,g)},de.getVbyList=function(s,u,l,d,p){var m,v,g=de;return-1==(m=g.getIdxbyList(s,u,l,d))||m>=s.length?null:(v=g.getV(s,m),!0===p&&(v=v.substr(2)),v)},de.getVbyListEx=function(s,u,l,d,p){var m,b,g=de;return-1==(m=g.getIdxbyListEx(s,u,l,d))?null:(b=g.getV(s,m),"03"==s.substr(m,2)&&!1!==p&&(b=b.substr(2)),b)},de.getInt=function(s,u,l){null==l&&(l=-1);try{var d=s.substr(u,2);if("02"!=d&&"03"!=d)return l;var p=de.getV(s,u);return"02"==d?parseInt(p,16):function ca(s){if(s.length%2!=0||null==(s=s.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var u=s.substr(0,2);if("00"==u)return parseInt(s.substr(2),16);var l=parseInt(u,16);if(l>7)return-1;var d=s.substr(2),p=parseInt(d,16).toString(2);"0"==p&&(p="00000000"),p=p.slice(0,0-l);var g=parseInt(p,2);return NaN==g?-1:g}catch{return-1}}(p)}catch{return l}},de.getOID=function(s,u,l){null==l&&(l=null);try{return"06"!=s.substr(u,2)?l:zn(de.getV(s,u))}catch{return l}},de.getOIDName=function(s,u,l){null==l&&(l=null);try{var d=de.getOID(s,u,l);if(d==l)return l;var p=h.asn1.x509.OID.oid2name(d);return""==p?d:p}catch{return l}},de.getString=function(s,u,l){null==l&&(l=null);try{return an(de.getV(s,u))}catch{return l}},de.hextooidstr=function(s){var u=function(I,w){return I.length>=w?I:new Array(w-I.length+1).join("0")+I},l=[],d=s.substr(0,2),p=parseInt(d,16);l[0]=new String(Math.floor(p/40)),l[1]=new String(p%40);for(var g=s.substr(2),m=[],v=0;v<g.length/2;v++)m.push(parseInt(g.substr(2*v,2),16));var b=[],C="";for(v=0;v<m.length;v++)128&m[v]?C+=u((127&m[v]).toString(2),7):(C+=u((127&m[v]).toString(2),7),b.push(new String(parseInt(C,2))),C="");var A=l.join(".");return b.length>0&&(A=A+"."+b.join(".")),A},de.dump=function(s,u,l,d){var p=de,g=p.getV,m=p.dump,v=p.getChildIdx,b=s;s instanceof h.asn1.ASN1Object&&(b=s.tohex());var C=function(Y,R){return Y.length<=2*R?Y:Y.substr(0,R)+"..(total "+Y.length/2+"bytes).."+Y.substr(Y.length-R,R)};void 0===u&&(u={ommit_long_octet:32}),void 0===l&&(l=0),void 0===d&&(d="");var k,A=u.ommit_long_octet;if("01"==(k=b.substr(l,2)))return"00"==(I=g(b,l))?d+"BOOLEAN FALSE\n":d+"BOOLEAN TRUE\n";if("02"==k)return d+"INTEGER "+C(I=g(b,l),A)+"\n";if("03"==k){var I=g(b,l);return p.isASN1HEX(I.substr(2))?(w=d+"BITSTRING, encapsulates\n")+m(I.substr(2),u,0,d+"  "):d+"BITSTRING "+C(I,A)+"\n"}if("04"==k)return I=g(b,l),p.isASN1HEX(I)?(w=d+"OCTETSTRING, encapsulates\n")+m(I,u,0,d+"  "):d+"OCTETSTRING "+C(I,A)+"\n";if("05"==k)return d+"NULL\n";if("06"==k){var x=g(b,l),_=h.asn1.ASN1Util.oidHexToInt(x),S=h.asn1.x509.OID.oid2name(_),T=_.replace(/\./g," ");return""!=S?d+"ObjectIdentifier "+S+" ("+T+")\n":d+"ObjectIdentifier ("+T+")\n"}if("0a"==k)return d+"ENUMERATED "+parseInt(g(b,l))+"\n";if("0c"==k)return d+"UTF8String '"+Xe(g(b,l))+"'\n";if("13"==k)return d+"PrintableString '"+Xe(g(b,l))+"'\n";if("14"==k)return d+"TeletexString '"+Xe(g(b,l))+"'\n";if("16"==k)return d+"IA5String '"+Xe(g(b,l))+"'\n";if("17"==k)return d+"UTCTime "+Xe(g(b,l))+"\n";if("18"==k)return d+"GeneralizedTime "+Xe(g(b,l))+"\n";if("1a"==k)return d+"VisualString '"+Xe(g(b,l))+"'\n";if("1e"==k)return d+"BMPString '"+Ki(g(b,l))+"'\n";if("30"==k){if("3000"==b.substr(l,4))return d+"SEQUENCE {}\n";w=d+"SEQUENCE\n";var M=u;if((2==(D=v(b,l)).length||3==D.length)&&"06"==b.substr(D[0],2)&&"04"==b.substr(D[D.length-1],2)){S=p.oidname(g(b,D[0]));var O=JSON.parse(JSON.stringify(u));O.x509ExtName=S,M=O}for(var V=0;V<D.length;V++)w+=m(b,M,D[V],d+"  ");return w}if("31"==k){w=d+"SET\n";var D=v(b,l);for(V=0;V<D.length;V++)w+=m(b,u,D[V],d+"  ");return w}if(128&(k=parseInt(k,16))){var w,X=31&k;if(32&k){for(w=d+"["+X+"]\n",D=v(b,l),V=0;V<D.length;V++)w+=m(b,u,D[V],d+"  ");return w}return I=g(b,l),de.isASN1HEX(I)?(w=d+"["+X+"]\n")+m(I,u,0,d+"  "):(("68747470"==I.substr(0,8)||"subjectAltName"===u.x509ExtName&&2==X)&&(I=Xe(I)),d+"["+X+"] "+I+"\n")}return d+"UNKNOWN("+k+") "+g(b,l)+"\n"},de.parse=function(s){var l=de.parse,d=de.isASN1HEX,p=de.getV,g=de.getTLV,m=de.getChildIdx,v=h.asn1,b=v.ASN1Util.oidHexToInt,C=v.x509.OID.oid2name,A=Xe,I=Ki,w=vs,x={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},S=s.substr(0,2),T={},D=p(s,0);if("01"==S)return"0101ff"==s?{bool:!0}:{bool:!1};if("02"==S)return{int:{hex:D}};if("03"==S)try{if("00"!=D.substr(0,2))throw"not encap";var M=D.substr(2);if(!d(M))throw"not encap";return{bitstr:{obj:l(M)}}}catch{var O=null;return D.length<=10&&(O=function Xd(s){if("string"!=typeof s||s.length%2!=0||!s.match(/^[0-9a-f]+$/))return null;try{var u=parseInt(s.substr(0,2),16);if(u<0||7<u)return null;for(var l=s.substr(2),d="",p=0;p<l.length;p+=2){var g=l.substr(p,2),m=parseInt(g,16).toString(2);d+=m=("0000000"+m).slice(-8)}return d.substr(0,d.length-u)}catch{return null}}(D)),null==O?{bitstr:{hex:D}}:{bitstr:{bin:O}}}else if("04"==S)try{if(!d(D))throw"not encap";return{octstr:{obj:l(D)}}}catch{return{octstr:{hex:D}}}else{if("05"==S)return{null:""};if("06"==S){var V=b(D),k=C(V);return""==k?{oid:V}:{oid:k}}if("0a"==S)return D.length>4?{enum:{hex:D}}:{enum:parseInt(D,16)};if("30"==S||"31"==S)return T[x[S]]=function(P){for(var B=[],H=m(P,0),$=0;$<H.length;$++){var j=g(P,H[$]),z=l(j);B.push(z)}return B}(s),T;if("14"==S){var X=w(D);return T[x[S]]={str:X},T}if("1e"==S)return X=I(D),T[x[S]]={str:X},T;if(-1!=":0c:12:13:16:17:18:1a:".indexOf(S))return X=A(D),T[x[S]]={str:X},T;if(S.match(/^8[0-9]$/))return null==(X=A(D))|""==X||null!=X.match(/[\x00-\x1F\x7F-\x9F]/)||null!=X.match(/[\u0000-\u001F\u0080\u2013\u009F]/)?{tag:{tag:S,explicit:!1,hex:D}}:{tag:{tag:S,explicit:!1,str:X}};if(!S.match(/^a[0-9]$/)){var Y=new h.asn1.ASN1Object;return Y.hV=D,{asn1:{tlv:S+Y.getLengthHexFromValue()+D}}}try{if(!d(D))throw new Error("not encap");return{tag:{tag:S,explicit:!0,obj:l(D)}}}catch{return{tag:{tag:S,explicit:!0,hex:D}}}}},de.isContextTag=function(s,u){var l,d;s=s.toLowerCase();try{l=parseInt(s,16)}catch{return-1}if(void 0===u)return 128==(192&l);try{return!(null==u.match(/^\[[0-9]+\]$/)||(d=parseInt(u.substr(1,u.length-1),10),d>31))&&128==(192&l)&&(31&l)==d}catch{return!1}},de.isASN1HEX=function(s){var u=de;if(s.length%2==1)return!1;var l=u.getVblen(s,0),d=s.substr(0,2),p=u.getL(s,0);return s.length-d.length-p.length==2*l},de.checkStrictDER=function(s,u,l,d,p){var g=de;if(void 0===l){if("string"!=typeof s)throw new Error("not hex string");if(s=s.toLowerCase(),!h.lang.String.isHex(s))throw new Error("not hex string");l=s.length,p=(d=s.length/2)<128?1:Math.ceil(d.toString(16))+1}if(g.getL(s,u).length>2*p)throw new Error("L of TLV too long: idx="+u);var v=g.getVblen(s,u);if(v>d)throw new Error("value of L too long than hex: idx="+u);var b=g.getTLV(s,u),C=b.length-2-g.getL(s,u).length;if(C!==2*v)throw new Error("V string length and L's value not the same:"+C+"/"+2*v);if(0===u&&s.length!=b.length)throw new Error("total length and TLV length unmatch:"+s.length+"!="+b.length);var A=s.substr(u,2);if("02"===A){var I=g.getVidx(s,u);if("00"==s.substr(I,2)&&s.charCodeAt(I+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(A,16)){for(var w=g.getVblen(s,u),x=0,_=g.getChildIdx(s,u),S=0;S<_.length;S++)x+=g.getTLV(s,_[S]).length,g.checkStrictDER(s,_[S],l,d,p);if(2*w!=x)throw new Error("sum of children's TLV length and L unmatch: "+2*w+"!="+x)}},de.oidname=function(s){var u=h.asn1;h.lang.String.isHex(s)&&(s=u.ASN1Util.oidHexToInt(s));var l=u.x509.OID.oid2name(s);return""===l&&(l=s),l},(typeof h>"u"||!h)&&(h={}),(typeof h.asn1>"u"||!h.asn1)&&(h.asn1={}),(typeof h.asn1.x509>"u"||!h.asn1.x509)&&(h.asn1.x509={}),h.asn1.x509.Certificate=function(s){h.asn1.x509.Certificate.superclass.constructor.call(this);var l=h.asn1,d=l.DERBitString,p=l.DERSequence,g=l.x509,m=g.TBSCertificate,v=g.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(b){this.params=b},this.sign=function(){var b=this.params,C=b.sigalg;null!=b.sigalg.name&&(C=b.sigalg.name);var A=b.tbsobj.tohex(),I=new h.crypto.Signature({alg:C});I.init(b.cakey),I.updateHex(A),b.sighex=I.sign()},this.getPEM=function(){return be(this.tohex(),"CERTIFICATE")},this.tohex=function(){var b=this.params;if((null==b.tbsobj||null==b.tbsobj)&&(b.tbsobj=new m(b)),null==b.sighex&&null!=b.cakey&&this.sign(),null==b.sighex)throw new Error("sighex or cakey parameter not defined");var C=[];return C.push(b.tbsobj),C.push(new v({name:b.sigalg})),C.push(new d({hex:"00"+b.sighex})),new p({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&(this.params=s)},ne(h.asn1.x509.Certificate,h.asn1.ASN1Object),h.asn1.x509.TBSCertificate=function(s){h.asn1.x509.TBSCertificate.superclass.constructor.call(this);var l=h.asn1,d=l.x509,p=l.DERTaggedObject,g=l.DERInteger,m=l.DERSequence,v=d.AlgorithmIdentifier,b=d.Time,C=d.X500Name,A=d.Extensions,I=d.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(w){this.params=w},this.tohex=function(){var w=[],x=this.params;if(null!=x.version||1!=x.version){var _=2;null!=x.version&&(_=x.version-1);var S=new p({obj:new g({int:_})});w.push(S)}return w.push(new g(x.serial)),w.push(new v({name:x.sigalg})),w.push(new C(x.issuer)),w.push(new m({array:[new b(x.notbefore),new b(x.notafter)]})),w.push(new C(x.subject)),w.push(new I(et.getKey(x.sbjpubkey))),void 0!==x.ext&&x.ext.length>0&&w.push(new p({tag:"a3",obj:new A(x.ext)})),new h.asn1.DERSequence({array:w}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.TBSCertificate,h.asn1.ASN1Object),h.asn1.x509.Extensions=function(s){h.asn1.x509.Extensions.superclass.constructor.call(this);var l=h.asn1,d=l.DERSequence,p=l.x509;this.aParam=[],this.setByParam=function(g){this.aParam=g},this.tohex=function(){for(var g=[],m=0;m<this.aParam.length;m++){var v=this.aParam[m],b=v.extname,C=null;if(null!=v.extn)C=new p.PrivateExtension(v);else if("subjectKeyIdentifier"==b)C=new p.SubjectKeyIdentifier(v);else if("keyUsage"==b)C=new p.KeyUsage(v);else if("subjectAltName"==b)C=new p.SubjectAltName(v);else if("issuerAltName"==b)C=new p.IssuerAltName(v);else if("basicConstraints"==b)C=new p.BasicConstraints(v);else if("nameConstraints"==b)C=new p.NameConstraints(v);else if("cRLDistributionPoints"==b)C=new p.CRLDistributionPoints(v);else if("certificatePolicies"==b)C=new p.CertificatePolicies(v);else if("policyMappings"==b)C=new p.PolicyMappings(v);else if("policyConstraints"==b)C=new p.PolicyConstraints(v);else if("inhibitAnyPolicy"==b)C=new p.InhibitAnyPolicy(v);else if("authorityKeyIdentifier"==b)C=new p.AuthorityKeyIdentifier(v);else if("extKeyUsage"==b)C=new p.ExtKeyUsage(v);else if("authorityInfoAccess"==b)C=new p.AuthorityInfoAccess(v);else if("cRLNumber"==b)C=new p.CRLNumber(v);else if("cRLReason"==b)C=new p.CRLReason(v);else if("ocspNonce"==b)C=new p.OCSPNonce(v);else if("ocspNoCheck"==b)C=new p.OCSPNoCheck(v);else if("adobeTimeStamp"==b)C=new p.AdobeTimeStamp(v);else{if("subjectDirectoryAttributes"!=b)throw new Error("extension not supported:"+JSON.stringify(v));C=new p.SubjectDirectoryAttributes(v)}null!=C&&g.push(C)}return new d({array:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.x509.Extensions,h.asn1.ASN1Object),h.asn1.x509.Extension=function(s){h.asn1.x509.Extension.superclass.constructor.call(this);var d=h.asn1,p=d.DERObjectIdentifier,g=d.DEROctetString,v=d.DERBoolean,b=d.DERSequence;this.tohex=function(){var C=new p({oid:this.oid}),A=new g({hex:this.getExtnValueHex()}),I=new Array;return I.push(C),this.critical&&I.push(new v),I.push(A),new b({array:I}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==s&&void 0!==s.critical&&(this.critical=s.critical)},ne(h.asn1.x509.Extension,h.asn1.ASN1Object),h.asn1.x509.KeyUsage=function(s){h.asn1.x509.KeyUsage.superclass.constructor.call(this,s);var u=Error,l={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var d=this.getBinValue();return this.asn1ExtnValue=new h.asn1.DERBitString({bin:d}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var d=this.params;if("object"!=typeof d||"object"!=typeof d.names&&"string"!=typeof d.bin)throw new u("parameter not yet set");if(null!=d.names)return xs(d.names,l);if(null!=d.bin)return d.bin;throw new u("parameter not set properly")},this.oid="2.5.29.15",void 0!==s&&(this.params=s)},ne(h.asn1.x509.KeyUsage,h.asn1.x509.Extension),h.asn1.x509.BasicConstraints=function(s){h.asn1.x509.BasicConstraints.superclass.constructor.call(this,s);var u=h.asn1,l=u.DERBoolean,d=u.DERInteger,p=u.DERSequence;this.getExtnValueHex=function(){var v=new Array;this.cA&&v.push(new l),this.pathLen>-1&&v.push(new d({int:this.pathLen}));var b=new p({array:v});return this.asn1ExtnValue=b,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==s&&(void 0!==s.cA&&(this.cA=s.cA),void 0!==s.pathLen&&(this.pathLen=s.pathLen))},ne(h.asn1.x509.BasicConstraints,h.asn1.x509.Extension),h.asn1.x509.CRLDistributionPoints=function(s){h.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,s);var l=h.asn1,d=l.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(p){for(var g=[],m=0;m<p.length;m++)if(p[m]instanceof h.asn1.ASN1Object)g.push(p[m]);else{var v=new d.DistributionPoint(p[m]);g.push(v)}this.asn1ExtnValue=new l.DERSequence({array:g})},this.setByOneURI=function(p){var g=new d.DistributionPoint({fulluri:p});this.setByDPArray([g])},this.oid="2.5.29.31",void 0!==s&&(void 0!==s.array?this.setByDPArray(s.array):void 0!==s.uri&&this.setByOneURI(s.uri))},ne(h.asn1.x509.CRLDistributionPoints,h.asn1.x509.Extension),h.asn1.x509.DistributionPoint=function(s){h.asn1.x509.DistributionPoint.superclass.constructor.call(this);var d=h.asn1,p=d.x509.DistributionPointName;this.tohex=function(){var g=new d.DERSequence;if(null!=this.asn1DP){var m=new d.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});g.appendASN1Object(m)}return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(void 0!==s.dpobj?this.asn1DP=s.dpobj:void 0!==s.dpname?this.asn1DP=new p(s.dpname):void 0!==s.fulluri&&(this.asn1DP=new p({full:[{uri:s.fulluri}]})))},ne(h.asn1.x509.DistributionPoint,h.asn1.ASN1Object),h.asn1.x509.DistributionPointName=function(s){h.asn1.x509.DistributionPointName.superclass.constructor.call(this);var m=h.asn1,v=m.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new v({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s)if(m.x509.GeneralNames.prototype.isPrototypeOf(s))this.type="full",this.tag="a0",this.asn1V=s;else{if(void 0===s.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new m.x509.GeneralNames(s.full)}},ne(h.asn1.x509.DistributionPointName,h.asn1.ASN1Object),h.asn1.x509.CertificatePolicies=function(s){h.asn1.x509.CertificatePolicies.superclass.constructor.call(this,s);var l=h.asn1,p=l.DERSequence,g=l.x509.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var m=[],v=0;v<this.params.array.length;v++)m.push(new g(this.params.array[v]));var b=new p({array:m});return this.asn1ExtnValue=b,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==s&&(this.params=s)},ne(h.asn1.x509.CertificatePolicies,h.asn1.x509.Extension),h.asn1.x509.PolicyInformation=function(s){h.asn1.x509.PolicyInformation.superclass.constructor.call(this,s);var u=h.asn1,l=u.DERSequence,d=u.DERObjectIdentifier,p=u.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var g=[new d(this.params.policyoid)];if(void 0!==this.params.array){for(var m=[],v=0;v<this.params.array.length;v++)m.push(new p(this.params.array[v]));m.length>0&&g.push(new l({array:m}))}return new l({array:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(this.params=s)},ne(h.asn1.x509.PolicyInformation,h.asn1.ASN1Object),h.asn1.x509.PolicyQualifierInfo=function(s){h.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,s);var u=h.asn1,l=u.DERSequence,d=u.DERIA5String,p=u.DERObjectIdentifier,g=u.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new l({array:[new p({oid:"1.3.6.1.5.5.7.2.1"}),new d({str:this.params.cps})]}).tohex():null!=this.params.unotice?new l({array:[new p({oid:"1.3.6.1.5.5.7.2.2"}),new g(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(this.params=s)},ne(h.asn1.x509.PolicyQualifierInfo,h.asn1.ASN1Object),h.asn1.x509.UserNotice=function(s){h.asn1.x509.UserNotice.superclass.constructor.call(this,s);var u=h.asn1.DERSequence,d=h.asn1.x509.DisplayText,p=h.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var g=[];return void 0!==this.params.noticeref&&g.push(new p(this.params.noticeref)),void 0!==this.params.exptext&&g.push(new d(this.params.exptext)),new u({array:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(this.params=s)},ne(h.asn1.x509.UserNotice,h.asn1.ASN1Object),h.asn1.x509.NoticeReference=function(s){h.asn1.x509.NoticeReference.superclass.constructor.call(this,s);var u=h.asn1.DERSequence,l=h.asn1.DERInteger,d=h.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var p=[];if(void 0!==this.params.org&&p.push(new d(this.params.org)),void 0!==this.params.noticenum){for(var g=[],m=this.params.noticenum,v=0;v<m.length;v++)g.push(new l(m[v]));p.push(new u({array:g}))}if(0==p.length)throw new Error("parameter is empty");return new u({array:p}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(this.params=s)},ne(h.asn1.x509.NoticeReference,h.asn1.ASN1Object),h.asn1.x509.DisplayText=function(s){h.asn1.x509.DisplayText.superclass.constructor.call(this,s),this.hT="0c",void 0!==s&&("ia5"===s.type?this.hT="16":"vis"===s.type?this.hT="1a":"bmp"===s.type&&(this.hT="1e"))},ne(h.asn1.x509.DisplayText,h.asn1.DERAbstractString),h.asn1.x509.PolicyMappings=function(s){h.asn1.x509.PolicyMappings.superclass.constructor.call(this,s);var p=h.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var g=this.params,m=[],v=0;v<g.array.length;v++){var b=g.array[v];m.push({seq:[{oid:b[0]},{oid:b[1]}]})}return this.asn1ExtnValue=p({seq:m}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",void 0!==s&&(this.params=s)},ne(h.asn1.x509.PolicyMappings,h.asn1.x509.Extension),h.asn1.x509.PolicyConstraints=function(s){h.asn1.x509.PolicyConstraints.superclass.constructor.call(this,s);var p=h.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var g=this.params,m=[];return null!=g.reqexp&&m.push({tag:{tagi:"80",obj:{int:g.reqexp}}}),null!=g.inhibit&&m.push({tag:{tagi:"81",obj:{int:g.inhibit}}}),this.asn1ExtnValue=p({seq:m}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",void 0!==s&&(this.params=s)},ne(h.asn1.x509.PolicyConstraints,h.asn1.x509.Extension),h.asn1.x509.InhibitAnyPolicy=function(s){h.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,s);var p=h.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=p({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",void 0!==s&&(this.params=s)},ne(h.asn1.x509.InhibitAnyPolicy,h.asn1.x509.Extension),h.asn1.x509.NameConstraints=function(s){h.asn1.x509.NameConstraints.superclass.constructor.call(this,s);var l=h.asn1,p=l.ASN1Util.newObject,g=l.x509.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var m=this.params,v=[];if(null!=m.permit&&null!=m.permit.length){for(var b=[],C=0;C<m.permit.length;C++)b.push(new g(m.permit[C]));v.push({tag:{tagi:"a0",obj:{seq:b}}})}if(null!=m.exclude&&null!=m.exclude.length){var A=[];for(C=0;C<m.exclude.length;C++)A.push(new g(m.exclude[C]));v.push({tag:{tagi:"a1",obj:{seq:A}}})}return this.asn1ExtnValue=p({seq:v}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==s&&(this.params=s)},ne(h.asn1.x509.NameConstraints,h.asn1.x509.Extension),h.asn1.x509.GeneralSubtree=function(s){h.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var u=h.asn1,d=u.x509.GeneralName,p=u.ASN1Util.newObject;this.params=null,this.setByParam=function(g){this.params=g},this.tohex=function(){var g=this.params,m=[new d(g)];return null!=g.min&&m.push({tag:{tagi:"80",obj:{int:g.min}}}),null!=g.max&&m.push({tag:{tagi:"81",obj:{int:g.max}}}),p({seq:m}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.GeneralSubtree,h.asn1.ASN1Object),h.asn1.x509.ExtKeyUsage=function(s){h.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,s);var l=h.asn1;this.setPurposeArray=function(d){this.asn1ExtnValue=new l.DERSequence;for(var p=0;p<d.length;p++){var g=new l.DERObjectIdentifier(d[p]);this.asn1ExtnValue.appendASN1Object(g)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==s&&void 0!==s.array&&this.setPurposeArray(s.array)},ne(h.asn1.x509.ExtKeyUsage,h.asn1.x509.Extension),h.asn1.x509.AuthorityKeyIdentifier=function(s){h.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,s);var l=h.asn1,d=l.DERTaggedObject,p=l.x509.GeneralNames;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var m=new Array;this.asn1KID&&m.push(new d({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&m.push(new d({explicit:!1,tag:"a1",obj:new p([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&m.push(new d({explicit:!1,tag:"82",obj:this.asn1CertSN}));var v=new l.DERSequence({array:m});return this.asn1ExtnValue=v,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(m){if(void 0!==m.str||void 0!==m.hex)this.asn1KID=new h.asn1.DEROctetString(m);else if("object"==typeof m&&h.crypto.Util.isKey(m)||"string"==typeof m&&-1!=m.indexOf("BEGIN ")){var v=m;"string"==typeof m&&(v=et.getKey(m));var b=et.getKeyID(v);this.asn1KID=new h.asn1.DEROctetString({hex:b})}},this.setCertIssuerByParam=function(m){void 0!==m.str||void 0!==m.ldapstr||void 0!==m.hex||void 0!==m.certsubject||void 0!==m.certissuer?this.asn1CertIssuer=new h.asn1.x509.X500Name(m):"string"==typeof m&&-1!=m.indexOf("BEGIN ")&&-1!=m.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new h.asn1.x509.X500Name({certissuer:m}))},this.setCertSNByParam=function(m){if(void 0!==m.str||void 0!==m.bigint||void 0!==m.hex)this.asn1CertSN=new h.asn1.DERInteger(m);else if("string"==typeof m&&-1!=m.indexOf("BEGIN ")&&m.indexOf("CERTIFICATE")){var v=new Pe;v.readCertPEM(m);var b=v.getSerialNumberHex();this.asn1CertSN=new h.asn1.DERInteger({hex:b})}},this.oid="2.5.29.35",void 0!==s&&(void 0!==s.kid&&this.setKIDByParam(s.kid),void 0!==s.issuer&&this.setCertIssuerByParam(s.issuer),void 0!==s.sn&&this.setCertSNByParam(s.sn),void 0!==s.issuersn&&"string"==typeof s.issuersn&&-1!=s.issuersn.indexOf("BEGIN ")&&s.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(s.issuersn),this.setCertIssuerByParam(s.issuersn)))},ne(h.asn1.x509.AuthorityKeyIdentifier,h.asn1.x509.Extension),h.asn1.x509.SubjectKeyIdentifier=function(s){h.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,s);var d=h.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(p){if(void 0!==p.str||void 0!==p.hex)this.asn1KID=new d(p);else if("object"==typeof p&&h.crypto.Util.isKey(p)||"string"==typeof p&&-1!=p.indexOf("BEGIN")){var g=p;"string"==typeof p&&(g=et.getKey(p));var m=et.getKeyID(g);this.asn1KID=new h.asn1.DEROctetString({hex:m})}},this.oid="2.5.29.14",void 0!==s&&void 0!==s.kid&&this.setKIDByParam(s.kid)},ne(h.asn1.x509.SubjectKeyIdentifier,h.asn1.x509.Extension),h.asn1.x509.AuthorityInfoAccess=function(s){h.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,s),this.setAccessDescriptionArray=function(u){for(var l=new Array,p=h.asn1,g=p.DERSequence,m=p.DERObjectIdentifier,v=p.x509.GeneralName,b=0;b<u.length;b++){var C,A=u[b];if(void 0!==A.ocsp)C=new g({array:[new m({oid:"1.3.6.1.5.5.7.48.1"}),new v({uri:A.ocsp})]});else{if(void 0===A.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(A));C=new g({array:[new m({oid:"1.3.6.1.5.5.7.48.2"}),new v({uri:A.caissuer})]})}l.push(C)}this.asn1ExtnValue=new g({array:l})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==s&&void 0!==s.array&&this.setAccessDescriptionArray(s.array)},ne(h.asn1.x509.AuthorityInfoAccess,h.asn1.x509.Extension),h.asn1.x509.SubjectAltName=function(s){h.asn1.x509.SubjectAltName.superclass.constructor.call(this,s),this.setNameArray=function(u){this.asn1ExtnValue=new h.asn1.x509.GeneralNames(u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==s&&void 0!==s.array&&this.setNameArray(s.array)},ne(h.asn1.x509.SubjectAltName,h.asn1.x509.Extension),h.asn1.x509.IssuerAltName=function(s){h.asn1.x509.IssuerAltName.superclass.constructor.call(this,s),this.setNameArray=function(u){this.asn1ExtnValue=new h.asn1.x509.GeneralNames(u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==s&&void 0!==s.array&&this.setNameArray(s.array)},ne(h.asn1.x509.IssuerAltName,h.asn1.x509.Extension),h.asn1.x509.SubjectDirectoryAttributes=function(s){h.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,s);var u=h.asn1,l=u.DERSequence,d=u.ASN1Util.newObject,p=u.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var g=[],m=0;m<this.params.array.length;m++){var v=this.params.array[m],b={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==v.attr)b.seq[0].oid=p(v.attr),b.seq[1].set[0]={gentime:v.str};else if("placeOfBirth"==v.attr)b.seq[0].oid=p(v.attr),b.seq[1].set[0]={utf8str:v.str};else if("gender"==v.attr)b.seq[0].oid=p(v.attr),b.seq[1].set[0]={prnstr:v.str};else if("countryOfCitizenship"==v.attr)b.seq[0].oid=p(v.attr),b.seq[1].set[0]={prnstr:v.str};else{if("countryOfResidence"!=v.attr)throw new Error("unsupported attribute: "+v.attr);b.seq[0].oid=p(v.attr),b.seq[1].set[0]={prnstr:v.str}}g.push(new d(b))}var C=new l({array:g});return this.asn1ExtnValue=C,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==s&&(this.params=s)},ne(h.asn1.x509.SubjectDirectoryAttributes,h.asn1.x509.Extension),h.asn1.x509.PrivateExtension=function(s){h.asn1.x509.PrivateExtension.superclass.constructor.call(this,s);var l=h.lang.String.isHex,d=h.asn1,p=d.x509.OID.name2oid,g=d.ASN1Util.newObject;this.params=null,this.setByParam=function(m){this.oid=p(m.extname),this.params=m},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var m=this.params.extn;if("string"==typeof m&&l(m))return m;if("object"==typeof m)try{return g(m).tohex()}catch{}throw new Error("unsupported extn value")},null!=s&&this.setByParam(s)},ne(h.asn1.x509.PrivateExtension,h.asn1.x509.Extension),h.asn1.x509.CRL=function(s){h.asn1.x509.CRL.superclass.constructor.call(this);var l=h.asn1,d=l.DERSequence,p=l.DERBitString,g=l.x509,m=g.AlgorithmIdentifier,v=g.TBSCertList;this.params=void 0,this.setByParam=function(b){this.params=b},this.sign=function(){var b=new v(this.params).tohex(),C=new h.crypto.Signature({alg:this.params.sigalg});C.init(this.params.cakey),C.updateHex(b);var A=C.sign();this.params.sighex=A},this.getPEM=function(){return be(this.tohex(),"X509 CRL")},this.tohex=function(){var b=this.params;if(null==b.tbsobj&&(b.tbsobj=new v(b)),null==b.sighex&&null!=b.cakey&&this.sign(),null==b.sighex)throw new Error("sighex or cakey parameter not defined");var C=[];return C.push(b.tbsobj),C.push(new m({name:b.sigalg})),C.push(new p({hex:"00"+b.sighex})),new d({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&(this.params=s)},ne(h.asn1.x509.CRL,h.asn1.ASN1Object),h.asn1.x509.TBSCertList=function(s){h.asn1.x509.TBSCertList.superclass.constructor.call(this);var l=h.asn1,d=l.DERInteger,p=l.DERSequence,g=l.DERTaggedObject,v=l.x509,b=v.AlgorithmIdentifier,C=v.Time,A=v.Extensions,I=v.X500Name;this.params=null,this.setByParam=function(w){this.params=w},this.getRevCertSequence=function(){for(var w=[],x=this.params.revcert,_=0;_<x.length;_++){var S=[new d(x[_].sn),new C(x[_].date)];null!=x[_].ext&&S.push(new A(x[_].ext)),w.push(new p({array:S}))}return new p({array:w})},this.tohex=function(){var w=[],x=this.params;if(null!=x.version){var S=new d({int:x.version-1});w.push(S)}if(w.push(new b({name:x.sigalg})),w.push(new I(x.issuer)),w.push(new C(x.thisupdate)),null!=x.nextupdate&&w.push(new C(x.nextupdate)),null!=x.revcert&&w.push(this.getRevCertSequence()),null!=x.ext){var T=new A(x.ext);w.push(new g({tag:"a0",explicit:!0,obj:T}))}return new p({array:w}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.TBSCertList,h.asn1.ASN1Object),h.asn1.x509.CRLEntry=function(s){h.asn1.x509.CRLEntry.superclass.constructor.call(this);var p=h.asn1;this.setCertSerial=function(g){this.sn=new p.DERInteger(g)},this.setRevocationDate=function(g){this.time=new p.x509.Time(g)},this.tohex=function(){var g=new p.DERSequence({array:[this.sn,this.time]});return this.TLV=g.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(void 0!==s.time&&this.setRevocationDate(s.time),void 0!==s.sn&&this.setCertSerial(s.sn))},ne(h.asn1.x509.CRLEntry,h.asn1.ASN1Object),h.asn1.x509.CRLNumber=function(s){h.asn1.x509.CRLNumber.superclass.constructor.call(this,s),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new h.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=s&&(this.params=s)},ne(h.asn1.x509.CRLNumber,h.asn1.x509.Extension),h.asn1.x509.CRLReason=function(s){h.asn1.x509.CRLReason.superclass.constructor.call(this,s),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new h.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=s&&(this.params=s)},ne(h.asn1.x509.CRLReason,h.asn1.x509.Extension),h.asn1.x509.OCSPNonce=function(s){h.asn1.x509.OCSPNonce.superclass.constructor.call(this,s),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new h.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=s&&(this.params=s)},ne(h.asn1.x509.OCSPNonce,h.asn1.x509.Extension),h.asn1.x509.OCSPNoCheck=function(s){h.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,s),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new h.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=s&&(this.params=s)},ne(h.asn1.x509.OCSPNoCheck,h.asn1.x509.Extension),h.asn1.x509.AdobeTimeStamp=function(s){h.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,s);var l=h.asn1,d=l.DERInteger,p=l.DERBoolean,g=l.DERSequence,m=l.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var v=this.params,b=[new d(1)];return b.push(new m({uri:v.uri})),null!=v.reqauth&&b.push(new p(v.reqauth)),this.asn1ExtnValue=new g({array:b}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.AdobeTimeStamp,h.asn1.x509.Extension),h.asn1.x509.X500Name=function(s){h.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=h.asn1,d=l.x509,p=d.RDN;this.setByString=function(m,v){void 0!==v&&(this.sRule=v);var b=m.split("/");b.shift();for(var C=[],A=0;A<b.length;A++)if(b[A].match(/^[^=]+=.+$/))C.push(b[A]);else{var I=C.length-1;C[I]=C[I]+"/"+b[A]}for(A=0;A<C.length;A++)this.asn1Array.push(new p({str:C[A],rule:this.sRule}))},this.setByLdapString=function(m,v){void 0!==v&&(this.sRule=v);var b=d.X500Name.ldapToCompat(m);this.setByString(b,v)},this.setByObject=function(m,v){for(var b in void 0!==v&&(this.sRule=v),m)if(m.hasOwnProperty(b)){var C=new p({str:b+"="+m[b],rule:this.sRule});this.asn1Array?this.asn1Array.push(C):this.asn1Array=[C]}},this.setByParam=function(m){if(void 0!==m.rule&&(this.sRule=m.rule),void 0!==m.array)this.paramArray=m.array;else if(void 0!==m.str)this.setByString(m.str);else if(void 0!==m.ldapstr)this.setByLdapString(m.ldapstr);else if(void 0!==m.hex)this.hTLV=m.hex;else if(void 0!==m.certissuer)(v=new Pe).readCertPEM(m.certissuer),this.hTLV=v.getIssuerHex();else if(void 0!==m.certsubject){var v;(v=new Pe).readCertPEM(m.certsubject),this.hTLV=v.getSubjectHex()}else"object"==typeof m&&void 0===m.certsubject&&void 0===m.certissuer&&this.setByObject(m)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var m=0;m<this.paramArray.length;m++){var v={array:this.paramArray[m]};"utf8"!=this.sRule&&(v.rule=this.sRule);var b=new p(v);this.asn1Array.push(b)}var C=new l.DERSequence({array:this.asn1Array});return this.hTLV=C.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.X500Name,h.asn1.ASN1Object),h.asn1.x509.X500Name.compatToLDAP=function(s){if("/"!==s.substr(0,1))throw"malformed input";var l=(s=s.substr(1)).split("/");return l.reverse(),l=l.map(function(d){return d.replace(/,/,"\\,")}),l.join(",")},h.asn1.x509.X500Name.onelineToLDAP=function(s){return h.asn1.x509.X500Name.compatToLDAP(s)},h.asn1.x509.X500Name.ldapToCompat=function(s){for(var u=s.split(","),l=!1,d=[],p=0;u.length>0;p++){var g=u.shift();if(!0===l){var v=(d.pop()+","+g).replace(/\\,/g,",");d.push(v),l=!1}else d.push(g);"\\"===g.substr(-1,1)&&(l=!0)}return d=d.map(function(b){return b.replace("/","\\/")}),d.reverse(),"/"+d.join("/")},h.asn1.x509.X500Name.ldapToOneline=function(s){return h.asn1.x509.X500Name.ldapToCompat(s)},h.asn1.x509.RDN=function(s){h.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var u=h.asn1.x509.AttributeTypeAndValue;this.setByParam=function(l){void 0!==l.rule&&(this.sRule=l.rule),void 0!==l.str&&this.addByMultiValuedString(l.str),void 0!==l.array&&(this.paramArray=l.array)},this.addByString=function(l){this.asn1Array.push(new h.asn1.x509.AttributeTypeAndValue({str:l,rule:this.sRule}))},this.addByMultiValuedString=function(l){for(var d=h.asn1.x509.RDN.parseString(l),p=0;p<d.length;p++)this.addByString(d[p])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var l=0;l<this.paramArray.length;l++){var d=this.paramArray[l];void 0!==d.rule&&"utf8"!=this.sRule&&(d.rule=this.sRule);var p=new u(d);this.asn1Array.push(p)}var g=new h.asn1.DERSet({array:this.asn1Array});return this.TLV=g.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.RDN,h.asn1.ASN1Object),h.asn1.x509.RDN.parseString=function(s){for(var u=s.split(/\+/),l=!1,d=[],p=0;u.length>0;p++){var g=u.shift();if(!0===l){var v=(d.pop()+"+"+g).replace(/\\\+/g,"+");d.push(v),l=!1}else d.push(g);"\\"===g.substr(-1,1)&&(l=!0)}var b=!1,C=[];for(p=0;d.length>0;p++){if(g=d.shift(),!0===b){var A=C.pop();g.match(/"$/)?(v=(A+"+"+g).replace(/^([^=]+)="(.*)"$/,"$1=$2"),C.push(v),b=!1):C.push(A+"+"+g)}else C.push(g);g.match(/^[^=]+="/)&&(b=!0)}return C},h.asn1.x509.AttributeTypeAndValue=function(s){h.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var l=h.asn1,d=l.DERSequence,p=l.DERUTF8String,g=l.DERPrintableString,m=l.DERTeletexString,v=l.DERIA5String,b=l.DERVisibleString,C=l.DERBMPString,A=h.lang.String.isMail,I=h.lang.String.isPrintable;this.setByParam=function(w){if(void 0!==w.rule&&(this.sRule=w.rule),void 0!==w.ds&&(this.dsType=w.ds),void 0===w.value&&void 0!==w.str){var _=w.str.match(/^([^=]+)=(.+)$/);if(!_)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=_[1],this.sValue=_[2]}else this.sType=w.type,this.sValue=w.value},this.setByString=function(w,x){void 0!==x&&(this.sRule=x);var _=w.match(/^([^=]+)=(.+)$/);if(!_)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(_[1],_[2])},this._getDsType=function(){var w=this.sType,x=this.sValue,_=this.sRule;return"prn"===_?"CN"==w&&A(x)?"ia5":I(x)?"prn":"utf8":"utf8"===_?"CN"==w&&A(x)?"ia5":"C"==w?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(w,x,_){void 0!==_&&(this.sRule=_),this.sType=w,this.sValue=x},this.getValueObj=function(w,x){if("utf8"==w)return new p({str:x});if("prn"==w)return new g({str:x});if("tel"==w)return new m({str:x});if("ia5"==w)return new v({str:x});if("vis"==w)return new b({str:x});if("bmp"==w)return new C({str:x});throw new Error("unsupported directory string type: type="+w+" value="+x)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var w=h.asn1.x509.OID.atype2obj(this.sType),x=this.getValueObj(this.dsType,this.sValue),_=new d({array:[w,x]});return this.TLV=_.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.AttributeTypeAndValue,h.asn1.ASN1Object),h.asn1.x509.SubjectPublicKeyInfo=function(s){h.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var p=h.asn1,g=p.DERInteger,m=p.DERBitString,v=p.DERObjectIdentifier,b=p.DERSequence,C=p.ASN1Util.newObject,I=p.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new b({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var S=this.getASN1Object();return this.hTLV=S.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(S){try{if(S instanceof Te){var D=C({seq:[{int:{bigint:S.n}},{int:{int:S.e}}]}).tohex();this.asn1AlgId=new I({name:"rsaEncryption"}),this.asn1SubjPKey=new m({hex:"00"+D})}}catch{}try{if(S instanceof h.crypto.ECDSA){var M=new v({name:S.curveName});this.asn1AlgId=new I({name:"ecPublicKey",asn1params:M}),this.asn1SubjPKey=new m({hex:"00"+S.pubKeyHex})}}catch{}try{if(S instanceof h.crypto.DSA){M=new C({seq:[{int:{bigint:S.p}},{int:{bigint:S.q}},{int:{bigint:S.g}}]}),this.asn1AlgId=new I({name:"dsa",asn1params:M});var O=new g({bigint:S.y});this.asn1SubjPKey=new m({hex:"00"+O.tohex()})}}catch{}},void 0!==s&&this.setPubKey(s)},ne(h.asn1.x509.SubjectPublicKeyInfo,h.asn1.ASN1Object),h.asn1.x509.Time=function(s){h.asn1.x509.Time.superclass.constructor.call(this);var p=h.asn1,g=p.DERUTCTime,m=p.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(v){this.timeParams=v},this.setByParam=function(v){this.params=v},this.getType=function(v){return v.match(/^[0-9]{12}Z$/)?"utc":v.match(/^[0-9]{14}Z$/)?"gen":v.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":v.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var v=this.params,b=null;if("string"==typeof v&&(v={str:v}),null!=v&&v.str&&(null==v.type||null==v.type)&&(v.type=this.getType(v.str)),null!=v&&v.str?("utc"==v.type&&(b=new g(v.str)),"gen"==v.type&&(b=new m(v.str))):b="gen"==this.type?new m:new g,null==b)throw new Error("wrong setting for Time");return this.TLV=b.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},h.asn1.x509.Time_bak=function(s){h.asn1.x509.Time_bak.superclass.constructor.call(this);var p=h.asn1,g=p.DERUTCTime,m=p.DERGeneralizedTime;this.setTimeParams=function(v){this.timeParams=v},this.tohex=function(){var v=null;return v=null!=this.timeParams?"utc"==this.type?new g(this.timeParams):new m(this.timeParams):"utc"==this.type?new g:new m,this.TLV=v.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==s&&(void 0!==s.type?this.type=s.type:void 0!==s.str&&(s.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),s.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=s)},ne(h.asn1.x509.Time,h.asn1.ASN1Object),h.asn1.x509.AlgorithmIdentifier=function(s){h.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var l=h.asn1,d=l.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var g=null;for(var m in d)m===this.nameAlg&&(g=d[m]);if(null!==g)return this.hTLV=g,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=l.x509.OID.name2obj(this.nameAlg));var v=[this.asn1Alg];null!==this.asn1Params&&v.push(this.asn1Params);var b=new l.DERSequence({array:v});return this.hTLV=b.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&(void 0!==s.name&&(this.nameAlg=s.name),void 0!==s.asn1params&&(this.asn1Params=s.asn1params),void 0!==s.paramempty&&(this.paramEmpty=s.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var p=this.nameAlg.toLowerCase();"withdsa"!==p.substr(-7,7)&&"withecdsa"!==p.substr(-9,9)&&(this.asn1Params=new l.DERNull)}},ne(h.asn1.x509.AlgorithmIdentifier,h.asn1.ASN1Object),h.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},h.asn1.x509.GeneralName=function(s){h.asn1.x509.GeneralName.superclass.constructor.call(this);var d=h.asn1,p=d.x509,g=p.X500Name,m=p.OtherName,v=d.DERIA5String,C=d.DEROctetString,A=d.DERTaggedObject,I=d.ASN1Object,w=Error;this.params=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var _,S,x=this.params,T=!1;if(void 0!==x.other)_="a0",S=new m(x.other);else if(void 0!==x.rfc822)_="81",S=new v({str:x.rfc822});else if(void 0!==x.dns)_="82",S=new v({str:x.dns});else if(void 0!==x.dn)_="a4",T=!0,S="string"==typeof x.dn?new g({str:x.dn}):x.dn instanceof h.asn1.x509.X500Name?x.dn:new g(x.dn);else if(void 0!==x.ldapdn)_="a4",T=!0,S=new g({ldapstr:x.ldapdn});else if(void 0!==x.certissuer||void 0!==x.certsubj){_="a4",T=!0;var D,M,O=null;if(void 0!==x.certsubj?(D=!1,M=x.certsubj):(D=!0,M=x.certissuer),M.match(/^[0-9A-Fa-f]+$/),-1!=M.indexOf("-----BEGIN ")&&(O=it(M)),null==O)throw new Error("certsubj/certissuer not cert");var k,V=new Pe;V.hex=O,k=D?V.getIssuerHex():V.getSubjectHex(),(S=new I).hTLV=k}else if(void 0!==x.uri)_="86",S=new v({str:x.uri});else{if(void 0===x.ip)throw new w("improper params");_="87";var X,Y=x.ip;try{if(Y.match(/^[0-9a-f]+$/)){var R=Y.length;if(8!=R&&16!=R&&32!=R&&64!=R)throw"err";X=Y}else X=Xr(Y)}catch(B){throw new w("malformed IP address: "+x.ip+":"+B.message)}S=new C({hex:X})}return new A({tag:_,explicit:T,obj:S}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.GeneralName,h.asn1.ASN1Object),h.asn1.x509.GeneralNames=function(s){h.asn1.x509.GeneralNames.superclass.constructor.call(this);var d=h.asn1;this.setByParamArray=function(p){for(var g=0;g<p.length;g++){var m=new d.x509.GeneralName(p[g]);this.asn1Array.push(m)}},this.tohex=function(){return new d.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof s<"u"&&this.setByParamArray(s)},ne(h.asn1.x509.GeneralNames,h.asn1.ASN1Object),h.asn1.x509.OtherName=function(s){h.asn1.x509.OtherName.superclass.constructor.call(this);var p=h.asn1,g=p.DERObjectIdentifier,m=p.DERSequence,v=p.ASN1Util.newObject;this.params=null,this.setByParam=function(b){this.params=b},this.tohex=function(){var b=this.params;if(null==b.oid||null==b.value)throw new Error("oid or value not specified");var C=new g({oid:b.oid}),A=v({tag:{tag:"a0",explicit:!0,obj:b.value}});return new m({array:[C,A]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.x509.OtherName,h.asn1.ASN1Object),h.asn1.x509.OID=new function(){var s=h.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(u){if(typeof this.objCache[u]<"u")return this.objCache[u];if(typeof this.name2oidList[u]>"u")throw"Name of ObjectIdentifier not defined: "+u;var d=new s({oid:this.name2oidList[u]});return this.objCache[u]=d,d},this.atype2obj=function(u){if(void 0!==this.objCache[u])return this.objCache[u];var l;if(u.match(/^\d+\.\d+\.[0-9.]+$/))l=u;else if(void 0!==this.atype2oidList[u])l=this.atype2oidList[u];else{if(void 0===this.name2oidList[u])throw new Error("AttributeType name undefined: "+u);l=this.name2oidList[u]}var d=new s({oid:l});return this.objCache[u]=d,d},this.registerOIDs=function(u){if(this.checkOIDs(u))for(var l in u)this.name2oidList[l]=u[l]},this.checkOIDs=function(u){try{var l=Object.keys(u);return 0!=l.length&&(l.map(function(d,p,g){if(!this[d].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},u),!0)}catch{return!1}}},h.asn1.x509.OID.oid2name=function(s){var u=h.asn1.x509.OID.name2oidList;for(var l in u)if(u[l]==s)return l;return""},h.asn1.x509.OID.oid2atype=function(s){var u=h.asn1.x509.OID.atype2oidList;for(var l in u)if(u[l]==s)return l;return s},h.asn1.x509.OID.name2oid=function(s){if(s.match(/^[0-9.]+$/))return s;var u=h.asn1.x509.OID.name2oidList;return void 0===u[s]?"":u[s]},h.asn1.x509.X509Util={},h.asn1.x509.X509Util.newCertPEM=function(s){return new(0,h.asn1.x509.Certificate)(s).getPEM()},(typeof h>"u"||!h)&&(h={}),(typeof h.asn1>"u"||!h.asn1)&&(h.asn1={}),(typeof h.asn1.cms>"u"||!h.asn1.cms)&&(h.asn1.cms={}),h.asn1.cms.Attribute=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.DERSet,m=d.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(v){this.params=v},this.getValueArray=function(){throw new u("not yet implemented abstract")},this.tohex=function(){var v=new m({oid:this.typeOid}),b=new g({array:this.getValueArray()});return new p({array:[v,b]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},ne(h.asn1.cms.Attribute,h.asn1.ASN1Object),h.asn1.cms.ContentType=function(s){var l=h.asn1;l.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new l.DERObjectIdentifier(this.params.type)]},null!=s&&this.setByParam(s)},ne(h.asn1.cms.ContentType,h.asn1.cms.Attribute),h.asn1.cms.MessageDigest=function(s){var l=h.asn1,d=l.DEROctetString;l.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new d(this.params)]},null!=s&&this.setByParam(s)},ne(h.asn1.cms.MessageDigest,h.asn1.cms.Attribute),h.asn1.cms.SigningTime=function(s){var l=h.asn1;l.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new l.x509.Time(this.params)]},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SigningTime,h.asn1.cms.Attribute),h.asn1.cms.SigningCertificate=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.cms,m=g.ESSCertID;g.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new u("parameter 'array' not specified");for(var b=this.params.array,C=[],A=0;A<b.length;A++){var I=b[A];0==s.hasis&&"string"==typeof I&&(-1!=I.indexOf("-----BEGIN")||de.isASN1HEX(I))&&(I={cert:I}),0!=I.hasis&&0==s.hasis&&(I.hasis=!1),C.push(new m(I))}var w=new p({array:C});return[new p({array:[w]})]},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SigningCertificate,h.asn1.cms.Attribute),h.asn1.cms.ESSCertID=function(s){h.asn1.cms.ESSCertID.superclass.constructor.call(this);var u=Error,l=h,d=l.asn1,p=d.DEROctetString,g=d.DERSequence,m=d.cms.IssuerSerial;this.params=null,this.getCertHash=function(v,b){if(null!=v.hash)return v.hash;if("string"==typeof v&&-1==v.indexOf("-----BEGIN")&&!de.isASN1HEX(v))return v;var C,A,I;if("string"==typeof v)C=v;else{if(null==v.cert)throw new u("hash nor cert unspecified");C=v.cert}if(A=-1!=C.indexOf("-----BEGIN")?it(C):C,"string"==typeof v&&(-1!=v.indexOf("-----BEGIN")?A=it(v):de.isASN1HEX(v)&&(A=v)),null!=v.alg)I=v.alg;else{if(null==b)throw new u("hash alg unspecified");I=b}return l.crypto.Util.hashHex(A,I)},this.tohex=function(){var v=this.params,b=this.getCertHash(v,"sha1"),C=[];return C.push(new p({hex:b})),("string"==typeof v&&-1!=v.indexOf("-----BEGIN")||null!=v.cert&&0!=v.hasis||null!=v.issuer&&null!=v.serial)&&C.push(new m(v)),new g({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.ESSCertID,h.asn1.ASN1Object),h.asn1.cms.SigningCertificateV2=function(s){var u=Error,d=h.asn1,p=d.DERSequence,m=d.cms,v=m.ESSCertIDv2;m.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new u("parameter 'array' not specified");for(var C=this.params.array,A=[],I=0;I<C.length;I++){var w=C[I];(null!=s.alg||0==s.hasis)&&"string"==typeof w&&(-1!=w.indexOf("-----BEGIN")||de.isASN1HEX(w))&&(w={cert:w}),null==w.alg&&null!=s.alg&&(w.alg=s.alg),0!=w.hasis&&0==s.hasis&&(w.hasis=!1),A.push(new v(w))}var x=new p({array:A});return[new p({array:[x]})]},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SigningCertificateV2,h.asn1.cms.Attribute),h.asn1.cms.ESSCertIDv2=function(s){h.asn1.cms.ESSCertIDv2.superclass.constructor.call(this),Error;var d=h.asn1,p=d.DEROctetString,g=d.DERSequence,m=d.cms.IssuerSerial,v=d.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var b=this.params,C=this.getCertHash(b,"sha256"),A=[];return null!=b.alg&&"sha256"!=b.alg&&A.push(new v({name:b.alg})),A.push(new p({hex:C})),("string"==typeof b&&-1!=b.indexOf("-----BEGIN")||null!=b.cert&&0!=b.hasis||null!=b.issuer&&null!=b.serial)&&A.push(new m(b)),new g({array:A}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.ESSCertIDv2,h.asn1.cms.ESSCertID),h.asn1.cms.IssuerSerial=function(s){var u=Error,d=h.asn1,p=d.DERInteger,g=d.DERSequence,b=d.x509.GeneralNames,C=Pe;d.cms.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(A){this.params=A},this.tohex=function(){var I,w,A=this.params;if("string"==typeof A&&-1!=A.indexOf("-----BEGIN")||null!=A.cert){var x;x=null!=A.cert?A.cert:A;var _=new C;_.readCertPEM(x),I=_.getIssuer(),w={hex:_.getSerialNumberHex()}}else{if(null==A.issuer||!A.serial)throw new u("cert or issuer and serial parameter not specified");I=A.issuer,w=A.serial}var S=new b([{dn:I}]),T=new p(w);return new g({array:[S,T]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.IssuerSerial,h.asn1.ASN1Object),h.asn1.cms.SignerIdentifier=function(s){var g=h.asn1.cms,m=g.IssuerAndSerialNumber,v=g.SubjectKeyIdentifier;Error,g.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var w=this.params;if("isssn"==w.type)return new m(w).tohex();if("skid"==w.type)return new v(w).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SignerIdentifier,h.asn1.ASN1Object),h.asn1.cms.IssuerAndSerialNumber=function(s){var l=h.asn1,d=l.DERInteger,p=l.DERSequence,v=l.x509.X500Name,b=Pe,C=Error;l.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var I,w,A=this.params;if("string"==typeof A&&-1!=A.indexOf("-----BEGIN")||null!=A.cert){var x;x=null!=A.cert?A.cert:A;var _=new b;_.readCertPEM(x),I=_.getIssuer(),w={hex:_.getSerialNumberHex()}}else{if(null==A.issuer||!A.serial)throw new C("cert or issuer and serial parameter not specified");I=A.issuer,w=A.serial}var S=new v(I),T=new d(w);return new p({array:[S,T]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(A){this.params=A},null!=s&&this.setByParam(s)},ne(h.asn1.cms.IssuerAndSerialNumber,h.asn1.ASN1Object),h.asn1.cms.SubjectKeyIdentifier=function(s){var l=h.asn1,g=l.ASN1Util.newObject,I=Pe,w=Error;l.cms.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var _,x=this.params;if(null==x.cert&&null==x.skid)throw new w("property cert nor skid undefined");return null!=x.cert?_=new I(x.cert).getExtSubjectKeyIdentifier().kid.hex:null!=x.skid&&(_=x.skid),g({tag:{tage:"a0",obj:{octstr:{hex:_}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SubjectKeyIdentifier,h.asn1.ASN1Object),h.asn1.cms.AttributeList=function(s){var u=Error,d=h.asn1,p=d.DERSet,g=d.cms;g.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(m){this.params=m},this.tohex=function(){var m=this.params;if(null!=this.hTLV)return this.hTLV;var v=!0;null!=m.sortflag&&(v=m.sortflag);for(var b=m.array,C=[],A=0;A<b.length;A++){var I=b[A],w=I.attr;if("contentType"==w)C.push(new g.ContentType(I));else if("messageDigest"==w)C.push(new g.MessageDigest(I));else if("signingTime"==w)C.push(new g.SigningTime(I));else if("signingCertificate"==w)C.push(new g.SigningCertificate(I));else if("signingCertificateV2"==w)C.push(new g.SigningCertificateV2(I));else if("signaturePolicyIdentifier"==w)C.push(new h.asn1.cades.SignaturePolicyIdentifier(I));else{if("signatureTimeStamp"!=w&&"timeStampToken"!=w)throw new u("unknown attr: "+w);C.push(new h.asn1.cades.SignatureTimeStamp(I))}}var x=new p({array:C,sortflag:v});return this.hTLV=x.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.AttributeList,h.asn1.ASN1Object),h.asn1.cms.SignerInfo=function(s){var u=Error,d=h.asn1,p=d.DERInteger,g=d.DEROctetString,m=d.DERSequence,v=d.DERTaggedObject,b=d.cms,C=b.SignerIdentifier,A=b.AttributeList,T=d.x509.AlgorithmIdentifier,D=h.crypto,M=et;b.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var O=this.params,V=O.sigalg,k=new A(O.sattrs).tohex(),X=M.getKey(O.signkey),Y=new D.Signature({alg:V});Y.init(X),Y.updateHex(k);var R=Y.sign();O.sighex=R},this.tohex=function(){var O=this.params,V=[];if(V.push(new p({int:O.version})),V.push(new C(O.id)),V.push(new T({name:O.hashalg})),null!=O.sattrs){var k=new A(O.sattrs);try{V.push(new v({tag:"a0",explicit:!1,obj:k}))}catch(Y){throw new u("si sattr error: "+Y)}}if(V.push(new T(null!=O.sigalgfield?{name:O.sigalgfield}:{name:O.sigalg})),null==O.sighex&&null!=O.signkey&&this.sign(),V.push(new g({hex:O.sighex})),null!=O.uattrs){k=new A(O.uattrs);try{V.push(new v({tag:"a1",explicit:!1,obj:k}))}catch(R){throw new u("si uattr error: "+R)}}return new m({array:V}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SignerInfo,h.asn1.ASN1Object),h.asn1.cms.EncapsulatedContentInfo=function(s){var l=h.asn1,d=l.DERTaggedObject,p=l.DERSequence,g=l.DERObjectIdentifier,m=l.DEROctetString;l.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,C=[];if(C.push(new g(b.type)),null!=b.content&&(null!=b.content.hex||null!=b.content.str)&&1!=b.isDetached){var A=new m(b.content),I=new d({tag:"a0",explicit:!0,obj:A});C.push(I)}return new p({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},null!=s&&this.setByParam(s)},ne(h.asn1.cms.EncapsulatedContentInfo,h.asn1.ASN1Object),h.asn1.cms.ContentInfo=function(s){var l=h.asn1,d=l.DERTaggedObject,p=l.DERSequence,g=l.DERObjectIdentifier;h.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,C=[];C.push(new g(b.type));var A=new d({tag:"a0",explicit:!0,obj:b.obj});return C.push(A),new p({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},null!=s&&this.setByParam(s)},ne(h.asn1.cms.ContentInfo,h.asn1.ASN1Object),h.asn1.cms.SignedData=function(s){Error;var d=h.asn1,g=d.DERInteger,m=d.DERSet,v=d.DERSequence,C=d.cms,A=C.EncapsulatedContentInfo,I=C.SignerInfo,w=C.ContentInfo,x=C.CertificateSet,_=C.RevocationInfoChoices,T=d.x509.AlgorithmIdentifier;h.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var D=this.params;this._setDigestAlgs(D),this._setContentTypeByEContent(D),this._setMessageDigestByEContent(D),this._setSignerInfoVersion(D),this._setSignedDataVersion(D)},this._setDigestAlgs=function(D){for(var M={},O=D.sinfos,V=0;V<O.length;V++)M[O[V].hashalg]=1;D.hashalgs=Object.keys(M).sort()},this._setContentTypeByEContent=function(D){for(var M=D.econtent.type,O=D.sinfos,V=0;V<O.length;V++)this._getAttrParamByName(O[V],"contentType").type=M},this._setMessageDigestByEContent=function(D){var M=D.econtent,V=M.content.hex;null==V&&"data"==M.type&&null!=M.content.str&&(V=jn(M.content.str));for(var k=D.sinfos,X=0;X<k.length;X++){var Y=k[X],R=Y.hashalg,P=this._getAttrParamByName(Y,"messageDigest"),B=h.crypto.Util.hashHex(V,R);P.hex=B}},this._getAttrParamByName=function(D,M){for(var O=D.sattrs.array,V=0;V<O.length;V++)if(O[V].attr==M)return O[V]},this._setSignerInfoVersion=function(D){for(var M=D.sinfos,O=0;O<M.length;O++){var V=M[O],k=1;"skid"==V.id.type&&(k=3),V.version=k}},this._setSignedDataVersion=function(D){var M=this._getSignedDataVersion(D);D.version=M},this._getSignedDataVersion=function(D){if(null!=D.revinfos)for(var M=D.revinfos,O=0;O<M.length;O++)if(null!=M[O].ocsp)return 5;var k=D.sinfos;for(O=0;O<k.length;O++)if(3==D.sinfos[O].version)return 3;return"data"!=D.econtent.type?3:1},this.tohex=function(){var D=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=D.fixed&&this.checkAndFixParam();var M=[];M.push(new g({int:D.version}));for(var O=[],V=0;V<D.hashalgs.length;V++)O.push(new T({name:D.hashalgs[V]}));M.push(new m({array:O})),M.push(new A(D.econtent)),null!=D.certs&&M.push(new x(D.certs)),null!=D.revinfos&&M.push(new _(D.revinfos));var X=[];for(V=0;V<D.sinfos.length;V++)X.push(new I(D.sinfos[V]));return M.push(new m({array:X})),new v({array:M}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new w({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.SignedData,h.asn1.ASN1Object),h.asn1.cms.CertificateSet=function(s){h.asn1.cms.CertificateSet.superclass.constructor.call(this);var u=Error,l=h.asn1,d=l.DERTaggedObject,p=l.DERSet,g=l.ASN1Object;this.params=null,this.tohex=function(){var b,m=this.params,v=[];if(m instanceof Array)b=m;else{if(null==m.array)throw new u("cert array not specified");b=m.array}for(var C=0;C<b.length;C++){var I=it(b[C]),w=new g;w.hTLV=I,v.push(w)}var x={array:v};0==m.sortflag&&(x.sortflag=!1);var _=new p(x);return new d({tag:"a0",explicit:!1,obj:_}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.CertificateSet,h.asn1.ASN1Object),h.asn1.cms.RevocationInfoChoices=function(s){h.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params;if(!u instanceof Array)throw new Error("params is not array");for(var l=[],d=0;d<u.length;d++)l.push(new h.asn1.cms.RevocationInfoChoice(u[d]));return h.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:l}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.RevocationInfoChoices,h.asn1.ASN1Object),h.asn1.cms.RevocationInfoChoice=function(s){h.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params;if(null!=u.crl&&"string"==typeof u.crl){var l=u.crl;return-1!=u.crl.indexOf("-----BEGIN")&&(l=it(u.crl)),l}if(null!=u.ocsp)return h.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new h.asn1.cms.OtherRevocationFormat(u)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.RevocationInfoChoice,h.asn1.ASN1Object),h.asn1.cms.OtherRevocationFormat=function(s){h.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var u=Error,p=h.asn1.ASN1Util.newObject,g=h.lang.String.isHex;this.params=null,this.tohex=function(){var m=this.params;if(null==m.ocsp)throw new u("property ocsp not specified");if(!g(m.ocsp)||!de.isASN1HEX(m.ocsp))throw new u("ocsp value not ASN.1 hex string");return p({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:m.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cms.OtherRevocationFormat,h.asn1.ASN1Object),h.asn1.cms.CMSUtil=new function(){},h.asn1.cms.CMSUtil.newSignedData=function(s){return new h.asn1.cms.SignedData(s)},h.asn1.cms.CMSUtil.verifySignedData=function(s){var x=de.getVbyList,_=de.getTLVbyList,S=de.getIdxbyList,T=de.getChildIdx,D=de.getTLV,M=de.oidname,O=h.crypto.Util.hashHex;void 0===s.cms&&(0,h.lang.String.isHex)(s.cms);var V=s.cms,Y=function(z,q){var Q=q.idx;q.signerid_issuer1=_(z,Q,[1,0],"30"),q.signerid_serial1=x(z,Q,[1,1],"02"),q.hashalg=M(x(z,Q,[2,0],"06"));var Ce=S(z,Q,[3],"a0");q.idxSignedAttrs=Ce,R(z,q,Ce);var Ie=T(z,Q).length;if(Ie<6)throw"malformed SignerInfo";q.sigalg=M(x(z,Q,[Ie-2,0],"06")),q.sigval=x(z,Q,[Ie-1],"04")},R=function(z,q,Q){var Ce=T(z,Q);q.signedAttrIdxList=Ce;for(var ve=0;ve<Ce.length;ve++){var Me,Ie=Ce[ve],$e=x(z,Ie,[0],"06");"2a864886f70d010905"===$e?(Me=Xe(x(z,Ie,[1,0])),q.saSigningTime=Me):"2a864886f70d010904"===$e&&(Me=x(z,Ie,[1,0],"04"),q.saMessageDigest=Me)}},$=function(z,q,Q,Ce){Q.verifyDetail={};var ve=Q.verifyDetail,Ie=q.parse.econtent,$e=Q.hashalg,Me=Q.saMessageDigest;ve.validMessageDigest=!1,O(Ie,$e)===Me&&(ve.validMessageDigest=!0),function(z,q,Q,Ce){var Ie,ve=q.parse.certsIdx;if(void 0===q.certs){Ie=[],q.certkeys=[];for(var $e=T(z,ve),Me=0;Me<$e.length;Me++){var yt=D(z,$e[Me]),dt=new Pe;dt.readCertHex(yt),Ie[Me]=dt,q.certkeys[Me]=dt.getPublicKey()}q.certs=Ie}else Ie=q.certs;for(q.cccc=Ie.length,q.cccci=$e.length,Me=0;Me<Ie.length;Me++){var jt=dt.getIssuerHex(),Tt=dt.getSerialNumberHex();Q.signerid_issuer1===jt&&Q.signerid_serial1===Tt&&(Q.certkey_idx=Me)}}(z,q,Q),ve.validSignatureValue=!1;var yt=Q.sigalg,dt="31"+D(z,Q.idxSignedAttrs).substr(2);Q.signedattrshex=dt;var jt=q.certs[Q.certkey_idx].getPublicKey(),Tt=new h.crypto.Signature({alg:yt});Tt.init(jt),Tt.updateHex(dt);var xn=Tt.verify(Q.sigval);ve.validSignatureValue_isValid=xn,!0===xn&&(ve.validSignatureValue=!0),Q.isValid=!1,ve.validMessageDigest&&ve.validSignatureValue&&(Q.isValid=!0)},j={isValid:!1,parse:{}};return function(z,q){if("2a864886f70d010702"!==x(z,0,[0],"06"))return q;q.cmsType="signedData",q.econtent=x(z,0,[1,0,2,1,0]),function(z,q){for(var Q,Ce=3;Ce<6;Ce++)if(void 0!==(Q=S(z,0,[1,0,Ce]))){var ve=z.substr(Q,2);"a0"===ve&&(q.certsIdx=Q),"a1"===ve&&(q.revinfosIdx=Q),"31"===ve&&(q.signerinfosIdx=Q)}}(z,q),q.signerInfos=[],function(z,q){var Q=q.signerinfosIdx;if(void 0!==Q){var Ce=T(z,Q);q.signerInfoIdxList=Ce;for(var ve=0;ve<Ce.length;ve++){var $e={idx:Ce[ve]};Y(z,$e),q.signerInfos.push($e)}}}(z,q)}(V,j.parse),function(z,q){for(var Q=q.parse.signerInfos,Ce=Q.length,ve=!0,Ie=0;Ie<Ce;Ie++){var $e=Q[Ie];$(z,q,$e),$e.isValid||(ve=!1)}q.isValid=ve}(V,j),j},h.asn1.cms.CMSParser=function(){var s=Error,u=Pe,l=new u,d=de,p=d.getV,g=d.getTLV,v=d.getTLVbyList,b=d.getTLVbyListEx,C=d.getVbyList,A=d.getVbyListEx,I=d.getChildIdx;this.getCMSSignedData=function(w){var x=v(w,0,[1,0]);return this.getSignedData(x)},this.getSignedData=function(w){var x=I(w,0),_={},S=p(w,x[0]),T=parseInt(S,16);_.version=T;var D=g(w,x[1]);_.hashalgs=this.getHashAlgArray(D);var M=g(w,x[2]);_.econtent=this.getEContent(M);var O=b(w,0,["[0]"]);null!=O&&(_.certs=this.getCertificateSet(O)),b(w,0,["[1]"]);var k=b(w,0,[3]);return _.sinfos=this.getSignerInfos(k),_},this.getHashAlgArray=function(w){for(var x=I(w,0),_=new u,S=[],T=0;T<x.length;T++){var D=g(w,x[T]),M=_.getAlgorithmIdentifierName(D);S.push(M)}return S},this.getEContent=function(w){var x={},_=C(w,0,[0]),S=C(w,0,[1,0]);return x.type=h.asn1.x509.OID.oid2name(de.hextooidstr(_)),x.content={hex:S},x},this.getSignerInfos=function(w){for(var x=[],_=I(w,0),S=0;S<_.length;S++){var T=g(w,_[S]),D=this.getSignerInfo(T);x.push(D)}return x},this.getSignerInfo=function(w){var x={},_=I(w,0),S=d.getInt(w,_[0],-1);-1!=S&&(x.version=S);var T=g(w,_[1]),D=this.getIssuerAndSerialNumber(T);x.id=D;var M=g(w,_[2]),O=l.getAlgorithmIdentifierName(M);x.hashalg=O;var V=b(w,0,["[0]"]);if(null!=V){var k=this.getAttributeList(V);x.sattrs=k}var X=b(w,0,[3]),Y=l.getAlgorithmIdentifierName(X);x.sigalg=Y;var R=A(w,0,[4]);x.sighex=R;var P=b(w,0,["[1]"]);if(null!=P){var B=this.getAttributeList(P);x.uattrs=B}return x},this.getSignerIdentifier=function(w){if("30"==w.substr(0,2))return this.getIssuerAndSerialNumber(w);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(w){var x={type:"isssn"},_=I(w,0),S=g(w,_[0]);x.issuer=l.getX500Name(S);var T=p(w,_[1]);return x.serial={hex:T},x},this.getAttributeList=function(w){for(var x=[],_=I(w,0),S=0;S<_.length;S++){var T=g(w,_[S]),D=this.getAttribute(T);x.push(D)}return{array:x}},this.getAttribute=function(w){var x={},_=I(w,0),S=d.getOID(w,_[0]),T=h.asn1.x509.OID.oid2name(S);x.attr=T;var D=g(w,_[1]),M=I(D,0);if(1==M.length)x.valhex=g(D,M[0]);else{for(var O=[],V=0;V<M.length;V++)O.push(g(D,M[V]));x.valhex=O}return"contentType"==T?this.setContentType(x):"messageDigest"==T?this.setMessageDigest(x):"signingTime"==T?this.setSigningTime(x):"signingCertificate"==T?this.setSigningCertificate(x):"signingCertificateV2"==T?this.setSigningCertificateV2(x):"signaturePolicyIdentifier"==T&&this.setSignaturePolicyIdentifier(x),x},this.setContentType=function(w){var x=d.getOIDName(w.valhex,0,null);null!=x&&(w.type=x,delete w.valhex)},this.setSigningTime=function(w){var _=Xe(p(w.valhex,0));w.str=_,delete w.valhex},this.setMessageDigest=function(w){var x=p(w.valhex,0);w.hex=x,delete w.valhex},this.setSigningCertificate=function(w){var x=I(w.valhex,0);if(x.length>0){for(var _=g(w.valhex,x[0]),S=I(_,0),T=[],D=0;D<S.length;D++){var M=g(_,S[D]),O=this.getESSCertID(M);T.push(O)}w.array=T}if(x.length>1){var V=g(w.valhex,x[1]);w.polhex=V}delete w.valhex},this.setSignaturePolicyIdentifier=function(w){var x=I(w.valhex,0);if(x.length>0){var _=d.getOID(w.valhex,x[0]);w.oid=_}if(x.length>1){var S=new u,T=I(w.valhex,x[1]),D=g(w.valhex,T[0]),M=S.getAlgorithmIdentifierName(D);w.alg=M;var O=p(w.valhex,T[1]);w.hash=O}delete w.valhex},this.setSigningCertificateV2=function(w){var x=I(w.valhex,0);if(x.length>0){for(var _=g(w.valhex,x[0]),S=I(_,0),T=[],D=0;D<S.length;D++){var M=g(_,S[D]),O=this.getESSCertIDv2(M);T.push(O)}w.array=T}if(x.length>1){var V=g(w.valhex,x[1]);w.polhex=V}delete w.valhex},this.getESSCertID=function(w){var x={},_=I(w,0);if(_.length>0){var S=p(w,_[0]);x.hash=S}if(_.length>1){var T=g(w,_[1]),D=this.getIssuerSerial(T);null!=D.serial&&(x.serial=D.serial),null!=D.issuer&&(x.issuer=D.issuer)}return x},this.getESSCertIDv2=function(w){var x={},_=I(w,0);if(_.length<1||3<_.length)throw new s("wrong number of elements");var S=0;if("30"==w.substr(_[0],2)){var T=g(w,_[0]);x.alg=l.getAlgorithmIdentifierName(T),S++}else x.alg="sha256";var D=p(w,_[S]);if(x.hash=D,_.length>S+1){var M=g(w,_[S+1]),O=this.getIssuerSerial(M);x.issuer=O.issuer,x.serial=O.serial}return x},this.getIssuerSerial=function(w){var x={},_=I(w,0),S=g(w,_[0]),T=l.getGeneralNames(S);x.issuer=T[0].dn;var M=p(w,_[1]);return x.serial={hex:M},x},this.getCertificateSet=function(w){for(var x=I(w,0),_=[],S=0;S<x.length;S++){var T=g(w,x[S]);if("30"==T.substr(0,2)){var D=be(T,"CERTIFICATE");_.push(D)}}return{array:_,sortflag:!1}}},(typeof h>"u"||!h)&&(h={}),(typeof h.asn1>"u"||!h.asn1)&&(h.asn1={}),(typeof h.asn1.tsp>"u"||!h.asn1.tsp)&&(h.asn1.tsp={}),h.asn1.tsp.TimeStampToken=function(s){var d=h.asn1.tsp;d.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var p=new d.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=p.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.TimeStampToken,h.asn1.cms.SignedData),h.asn1.tsp.TSTInfo=function(s){Error;var d=h.asn1,p=d.DERSequence,g=d.DERInteger,m=d.DERBoolean,v=d.DERGeneralizedTime,b=d.DERObjectIdentifier,C=d.DERTaggedObject,A=d.tsp,I=A.MessageImprint,w=A.Accuracy,_=d.x509.GeneralName;if(A.TSTInfo.superclass.constructor.call(this),this.dVersion=new g({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var S=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(S.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(S.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(S.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");S.push(this.dGenTime),null!=this.dAccuracy&&S.push(this.dAccuracy),null!=this.dOrdering&&S.push(this.dOrdering),null!=this.dNonce&&S.push(this.dNonce),null!=this.dTsa&&S.push(this.dTsa);var T=new p({array:S});return this.hTLV=T.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s){if("string"==typeof s.policy){if(!s.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new b({oid:s.policy})}void 0!==s.messageImprint&&(this.dMessageImprint=new I(s.messageImprint)),void 0!==s.serial&&(this.dSerial=new g(s.serial)),void 0!==s.genTime&&(this.dGenTime=new v(s.genTime)),void 0!==s.accuracy&&(this.dAccuracy=new w(s.accuracy)),void 0!==s.ordering&&1==s.ordering&&(this.dOrdering=new m),void 0!==s.nonce&&(this.dNonce=new g(s.nonce)),void 0!==s.tsa&&(this.dTsa=new C({tag:"a0",explicit:!0,obj:new _({dn:s.tsa})}))}},ne(h.asn1.tsp.TSTInfo,h.asn1.ASN1Object),h.asn1.tsp.Accuracy=function(s){var l=h.asn1,d=l.ASN1Util.newObject;l.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params,g=[];return null!=p.seconds&&"number"==typeof p.seconds&&g.push({int:p.seconds}),null!=p.millis&&"number"==typeof p.millis&&g.push({tag:{tagi:"80",obj:{int:p.millis}}}),null!=p.micros&&"number"==typeof p.micros&&g.push({tag:{tagi:"81",obj:{int:p.micros}}}),d({seq:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.Accuracy,h.asn1.ASN1Object),h.asn1.tsp.MessageImprint=function(s){var l=h.asn1,d=l.DERSequence,p=l.DEROctetString,m=l.x509.AlgorithmIdentifier;l.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params,b=new m({name:v.alg}),C=new p({hex:v.hash});return new d({array:[b,C]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.tsp.MessageImprint,h.asn1.ASN1Object),h.asn1.tsp.TimeStampReq=function(s){var l=h.asn1,d=l.DERSequence,p=l.DERInteger,g=l.DERBoolean,v=l.DERObjectIdentifier,b=l.tsp,C=b.MessageImprint;b.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var A=this.params,I=[];return I.push(new p({int:1})),I.push(A.messageImprint instanceof h.asn1.ASN1Object?A.messageImprint:new C(A.messageImprint)),null!=A.policy&&I.push(new v(A.policy)),null!=A.nonce&&I.push(new p(A.nonce)),1==A.certreq&&I.push(new g),new d({array:I}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.TimeStampReq,h.asn1.ASN1Object),h.asn1.tsp.TimeStampResp=function(s){var l=h.asn1,d=l.DERSequence,g=l.tsp,m=g.PKIStatusInfo;g.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params,b=[];if(null!=v.econtent||null!=v.tst)if(b.push(new m(null!=v.statusinfo?v.statusinfo:"granted")),null!=v.econtent)b.push(new g.TimeStampToken(v).getContentInfo());else{if(!(v.tst instanceof l.ASN1Object))throw new Error("improper member tst value");b.push(v.tst)}else{if(null==v.statusinfo)throw new Error("parameter for token nor statusinfo not specified");b.push(new m(v.statusinfo))}return new d({array:b}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.TimeStampResp,h.asn1.ASN1Object),h.asn1.tsp.PKIStatusInfo=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.tsp,m=g.PKIStatus,v=g.PKIFreeText,b=g.PKIFailureInfo;g.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var C=this.params,A=[];if("string"==typeof C)A.push(new m(C));else{if(null==C.status)throw new u("property 'status' unspecified");A.push(new m(C.status)),null!=C.statusstr&&A.push(new v(C.statusstr)),null!=C.failinfo&&A.push(new b(C.failinfo))}return new p({array:A}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.PKIStatusInfo,h.asn1.ASN1Object),h.asn1.tsp.PKIStatus=function(s){var u=Error,d=h.asn1,p=d.DERInteger;d.tsp.PKIStatus.superclass.constructor.call(this);var m={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var C,v=this.params;if("string"==typeof v)try{C=m[v]}catch{throw new u("undefined name: "+v)}else{if("number"!=typeof v)throw new u("unsupported params");C=v}return new p({int:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.PKIStatus,h.asn1.ASN1Object),h.asn1.tsp.PKIFreeText=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.DERUTF8String;d.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params;if(!v instanceof Array)throw new u("wrong params: not array");for(var b=[],C=0;C<v.length;C++)b.push(new g({str:v[C]}));return new p({array:b}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.PKIFreeText,h.asn1.ASN1Object),h.asn1.tsp.PKIFailureInfo=function(s){var u=Error,d=h.asn1,p=d.DERBitString,v={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};d.tsp.PKIFailureInfo.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var b=this.params,C=0;if("number"==typeof b&&0<=b&&b<=25){for(var A=(C|=1<<b).toString(2),I="",w=A.length-1;w>=0;w--)I+=A[w];return I}if("string"==typeof b&&null!=v[b])return xs([b],v);if("object"==typeof b&&null!=b.length)return xs(b,v);throw new u("wrong params")},this.tohex=function(){var C=this.getBinValue();return new p({bin:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.tsp.PKIFailureInfo,h.asn1.ASN1Object),h.asn1.tsp.AbstractTSAAdapter=function(s){this.getTSTHex=function(u,l){throw"not implemented yet"}},h.asn1.tsp.SimpleTSAAdapter=function(s){var d=h.asn1.tsp,p=h.crypto.Util.hashHex;d.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(g,m){var v=p(g,m);this.params.econtent.content.messageImprint={alg:m,hash:v},this.params.econtent.content.serial={int:this.serial++};var b=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:b},new d.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==s&&(this.params=s)},ne(h.asn1.tsp.SimpleTSAAdapter,h.asn1.tsp.AbstractTSAAdapter),h.asn1.tsp.FixedTSAAdapter=function(s){var d=h.asn1.tsp,p=h.crypto.Util.hashHex;d.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(g,m){var v=p(g,m);return this.params.econtent.content.messageImprint={alg:m,hash:v},new d.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==s&&(this.params=s)},ne(h.asn1.tsp.FixedTSAAdapter,h.asn1.tsp.AbstractTSAAdapter),h.asn1.tsp.TSPUtil=new function(){},h.asn1.tsp.TSPUtil.newTimeStampToken=function(s){return new h.asn1.tsp.TimeStampToken(s)},h.asn1.tsp.TSPUtil.parseTimeStampReq=function(s){return(new h.asn1.tsp.TSPParser).getTimeStampReq(s)},h.asn1.tsp.TSPUtil.parseMessageImprint=function(s){return(new h.asn1.tsp.TSPParser).getMessageImprint(s)},h.asn1.tsp.TSPParser=function(){Error;var l=new Pe,d=de,p=d.getV,g=d.getTLV,m=d.getIdxbyList,b=d.getChildIdx,C=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],A={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(I){var w=b(I,0);if(1==w.length)return this.getPKIStatusInfo(g(I,w[0]));if(w.length>1){var x=this.getPKIStatusInfo(g(I,w[0])),_=g(I,w[1]),S=this.getToken(_);return S.statusinfo=x,S}},this.getToken=function(I){var x=(new h.asn1.cms.CMSParser).getCMSSignedData(I);return this.setTSTInfo(x),x},this.setTSTInfo=function(I){var w=I.econtent;if("tstinfo"==w.type){var _=this.getTSTInfo(w.content.hex);w.content=_}},this.getTSTInfo=function(I){var w={},x=b(I,0),_=p(I,x[1]);w.policy=zn(_);var S=g(I,x[2]);w.messageImprint=this.getMessageImprint(S);var T=p(I,x[3]);w.serial={hex:T};var D=p(I,x[4]);w.genTime={str:Xe(D)};var M=0;if(x.length>5&&"30"==I.substr(x[5],2)){var O=g(I,x[5]);w.accuracy=this.getAccuracy(O),M++}if(x.length>5+M&&"01"==I.substr(x[5+M],2)&&("ff"==p(I,x[5+M])&&(w.ordering=!0),M++),x.length>5+M&&"02"==I.substr(x[5+M],2)){var k=p(I,x[5+M]);w.nonce={hex:k},M++}if(x.length>5+M&&"a0"==I.substr(x[5+M],2)){var X=g(I,x[5+M]);X="30"+X.substr(2),pGeneralNames=l.getGeneralNames(X);var Y=pGeneralNames[0].dn;w.tsa=Y,M++}if(x.length>5+M&&"a1"==I.substr(x[5+M],2)){var R=g(I,x[5+M]);R="30"+R.substr(2);var P=l.getExtParamArray(R);w.ext=P,M++}return w},this.getAccuracy=function(I){for(var w={},x=b(I,0),_=0;_<x.length;_++){var S=I.substr(x[_],2),T=p(I,x[_]),D=parseInt(T,16);"02"==S?w.seconds=D:"80"==S?w.millis=D:"81"==S&&(w.micros=D)}return w},this.getMessageImprint=function(I){if("30"!=I.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var w={},_=(b(I,0),m(I,0,[0,0])),S=p(I,_),T=d.hextooidstr(S),D=h.asn1.x509.OID.oid2name(T);if(""==D)throw new Error("hashAlg name undefined: "+T);var M=D,O=m(I,0,[1]);return w.alg=M,w.hash=p(I,O),w},this.getPKIStatusInfo=function(I){var w={},x=b(I,0),_=0;try{var S=p(I,x[0]),T=parseInt(S,16);w.status=C[T]}catch{}if(x.length>1&&"30"==I.substr(x[1],2)){var D=g(I,x[1]);w.statusstr=this.getPKIFreeText(D),_++}if(x.length>_&&"03"==I.substr(x[1+_],2)){var M=g(I,x[1+_]);w.failinfo=this.getPKIFailureInfo(M)}return w},this.getPKIFreeText=function(I){for(var w=[],x=b(I,0),_=0;_<x.length;_++)w.push(d.getString(I,x[_]));return w},this.getPKIFailureInfo=function(I){var w=d.getInt(I,0);return null!=A[w]?A[w]:w},this.getTimeStampReq=function(I){var w={certreq:!1},x=b(I,0);if(x.length<2)throw new Error("TimeStampReq must have at least 2 items");var _=g(I,x[1]);w.messageImprint=h.asn1.tsp.TSPUtil.parseMessageImprint(_);for(var S=2;S<x.length;S++){var T=x[S],D=I.substr(T,2);if("06"==D){var M=p(I,T);w.policy=d.hextooidstr(M)}"02"==D&&(w.nonce=p(I,T)),"01"==D&&(w.certreq=!0)}return w}},(typeof h>"u"||!h)&&(h={}),(typeof h.asn1>"u"||!h.asn1)&&(h.asn1={}),(typeof h.asn1.cades>"u"||!h.asn1.cades)&&(h.asn1.cades={}),h.asn1.cades.SignaturePolicyIdentifier=function(s){var d=h.asn1.cades,p=d.SignaturePolicyId;d.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new p(this.params)]},this.setByParam=function(g){this.params=g},null!=s&&this.setByParam(s)},ne(h.asn1.cades.SignaturePolicyIdentifier,h.asn1.cms.Attribute),h.asn1.cades.SignaturePolicyId=function(s){var l=h.asn1,d=l.DERSequence,p=l.DERObjectIdentifier,v=l.cades,C=v.OtherHashAlgAndValue;v.SignaturePolicyId.superclass.constructor.call(this),this.params=null,this.tohex=function(){var A=this.params,I=[];return I.push(new p(A.oid)),I.push(new C(A)),new d({array:I}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(A){this.params=A},null!=s&&this.setByParam(s)},ne(h.asn1.cades.SignaturePolicyId,h.asn1.ASN1Object),h.asn1.cades.OtherHashAlgAndValue=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.DEROctetString,v=d.x509.AlgorithmIdentifier;d.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var A=this.params;if(null==A.alg)throw new u("property 'alg' not specified");if(null==A.hash&&null==A.cert)throw new u("property 'hash' nor 'cert' not specified");var I=null;if(null!=A.hash)I=A.hash;else if(null!=A.cert){if("string"!=typeof A.cert)throw new u("cert not string");var w=A.cert;-1!=A.cert.indexOf("-----BEGIN")&&(w=it(A.cert)),I=h.crypto.Util.hashHex(w,A.alg)}var x=[];return x.push(new v({name:A.alg})),x.push(new g({hex:I})),new p({array:x}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cades.OtherHashAlgAndValue,h.asn1.ASN1Object),h.asn1.cades.OtherHashValue=function(s){h.asn1.cades.OtherHashValue.superclass.constructor.call(this);var u=Error,g=h.asn1.DEROctetString;this.params=null,this.tohex=function(){var v=this.params;if(null==v.hash&&null==v.cert)throw new u("hash or cert not specified");var b=null;if(null!=v.hash)b=v.hash;else if(null!=v.cert){if("string"!=typeof v.cert)throw new u("cert not string");var C=v.cert;-1!=v.cert.indexOf("-----BEGIN")&&(C=it(v.cert)),b=h.crypto.Util.hashHex(C,"sha1")}return new g({hex:b}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cades.OtherHashValue,h.asn1.ASN1Object),h.asn1.cades.SignatureTimeStamp=function(s){var u=Error,d=h.lang.String.isHex,p=h.asn1,g=p.ASN1Object;p.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var b=this.params;if(null!=b.tst){if(d(b.tst))return(C=new g).hTLV=b.tst,[C];if(b.tst instanceof g)return[b.tst];throw new u("params.tst has wrong value")}if(null!=b.res){var C,A=b.res;if(A instanceof g&&(A=A.tohex()),"string"!=typeof A||!d(A))throw new u("params.res has wrong value");return de.getTLVbyList(A,0,[1]),(C=new g).hTLV=b.tst,[C]}},null!=s&&this.setByParam(s)},ne(h.asn1.cades.SignatureTimeStamp,h.asn1.cms.Attribute),h.asn1.cades.CompleteCertificateRefs=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.cades,m=g.OtherCertID,v=h.lang.String.isHex;g.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var b=this.params,C=[],A=0;A<b.array.length;A++){var I=b.array[A];if("string"==typeof I)if(-1!=I.indexOf("-----BEGIN"))I={cert:I};else{if(!v(I))throw new u("unsupported value: "+I);I={hash:I}}null!=b.alg&&null==I.alg&&(I.alg=b.alg),null!=b.hasis&&null==I.hasis&&(I.hasis=b.hasis);var w=new m(I);C.push(w)}return[new p({array:C})]},null!=s&&this.setByParam(s)},ne(h.asn1.cades.CompleteCertificateRefs,h.asn1.cms.Attribute),h.asn1.cades.OtherCertID=function(s){var l=h.asn1,d=l.DERSequence,g=l.cms.IssuerSerial,m=l.cades,v=m.OtherHashValue,b=m.OtherHashAlgAndValue;m.OtherCertID.superclass.constructor.call(this),this.params=s,this.tohex=function(){var C=this.params;"string"==typeof C&&(-1!=C.indexOf("-----BEGIN")?C={cert:C}:_isHex(C)&&(C={hash:C}));var I,A=[];if(I=null!=C.alg?new b(C):new v(C),A.push(I),null!=C.cert&&1==C.hasis||null!=C.issuer&&null!=C.serial){var w=new g(C);A.push(w)}return new d({array:A}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cades.OtherCertID,h.asn1.ASN1Object),h.asn1.cades.OtherHash=function(s){Error;var g=h.asn1.cades,m=g.OtherHashAlgAndValue,v=g.OtherHashValue,C=h.lang.String.isHex;g.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var A=this.params;return"string"==typeof A&&(-1!=A.indexOf("-----BEGIN")?A={cert:A}:C(A)&&(A={hash:A})),(null!=A.alg?new m(A):new v(A)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.cades.OtherHash,h.asn1.ASN1Object),h.asn1.cades.CAdESUtil=new function(){},h.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(s){return(new h.asn1.cms.CMSParser).getCMSSignedData(s)},h.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(s,u,l){var g=de.getTLV,m=de.getV,b=h.asn1,C=b.ASN1Object,A=b.cms,I=A.AttributeList,w=A.SignerInfo,x={},_=(0,de.getChildIdx)(s,u);if(6!=_.length)throw"not supported items for SignerInfo (!=6)";var S=_.shift();x.version=g(s,S);var T=_.shift();x.si=g(s,T);var D=_.shift();x.digalg=g(s,D);var M=_.shift();x.sattrs=g(s,M);var O=_.shift();x.sigalg=g(s,O);var V=_.shift();x.sig=g(s,V),x.sigval=m(s,V);var k=null;return x.obj=new w,(k=new C).hTLV=x.version,x.obj.dCMSVersion=k,(k=new C).hTLV=x.si,x.obj.dSignerIdentifier=k,(k=new C).hTLV=x.digalg,x.obj.dDigestAlgorithm=k,(k=new C).hTLV=x.sattrs,x.obj.dSignedAttrs=k,(k=new C).hTLV=x.sigalg,x.obj.dSigAlg=k,(k=new C).hTLV=x.sig,x.obj.dSig=k,x.obj.dUnsignedAttrs=new I,x},(typeof h.asn1.csr>"u"||!h.asn1.csr)&&(h.asn1.csr={}),h.asn1.csr.CertificationRequest=function(s){var l=h.asn1,d=l.DERBitString,p=l.DERSequence,g=l.csr,v=g.CertificationRequestInfo;g.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(b){this.params=b},this.sign=function(){var b=new v(this.params).tohex(),C=new h.crypto.Signature({alg:this.params.sigalg});C.init(this.params.sbjprvkey),C.updateHex(b);var A=C.sign();this.params.sighex=A},this.getPEM=function(){return be(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var b=this.params,C=new h.asn1.csr.CertificationRequestInfo(this.params),A=new h.asn1.x509.AlgorithmIdentifier({name:b.sigalg});if(null==b.sighex&&null!=b.sbjprvkey&&this.sign(),null==b.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var I=new d({hex:"00"+b.sighex});return new p({array:[C,A,I]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.csr.CertificationRequest,h.asn1.ASN1Object),h.asn1.csr.CertificationRequestInfo=function(s){var l=h.asn1,p=l.DERSequence,g=l.DERInteger,m=l.DERUTF8String,v=l.DERTaggedObject,b=l.ASN1Util.newObject,A=l.x509,I=A.X500Name,w=A.Extensions,x=A.SubjectPublicKeyInfo;l.csr.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(T){null!=T&&(this.params=T)},this.tohex=function(){var T=this.params,D=[];if(D.push(new g({int:0})),D.push(new I(T.subject)),D.push(new x(et.getKey(T.sbjpubkey))),null!=T.attrs){var M=function S(T){for(var D=Error,M=h.asn1.x509.Extensions,O=[],V=0;V<T.length;V++){var k=T[V],X=k.attr;if("extensionRequest"==X){var Y=new M(k.ext);O.push({seq:[{oid:"1.2.840.113549.1.9.14"},{set:[Y]}]})}else if("unstructuredName"==X)O.push({seq:[{oid:"1.2.840.113549.1.9.2"},{set:k.names}]});else{if("challengePassword"!=X)throw new D("unknown CSR attribute");O.push({seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:k.password}]}]})}}return{set:O}}(T.attrs),O=b({tag:{tage:"a0",obj:M}});D.push(O)}else if(null!=T.extreq){var V=new w(T.extreq);O=b({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[V]}]}}}),D.push(O)}else D.push(new v({tag:"a0",explicit:!1,obj:new m({str:""})}));return new p({array:D}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=s&&this.setByParam(s)},ne(h.asn1.csr.CertificationRequestInfo,h.asn1.ASN1Object),h.asn1.csr.AttributeList=function(s){},ne(h.asn1.csr.AttributeList,h.asn1.ASN1Object),h.asn1.csr.CSRUtil=new function(){},h.asn1.csr.CSRUtil.newCSRPEM=function(s){return new h.asn1.csr.CertificationRequest(s).getPEM()},h.asn1.csr.CSRUtil.getParam=function(s,u){var d=de.getV,p=de.getIdxbyList,g=de.getTLVbyList,m=de.getTLVbyListEx,v=de.getVbyListEx,C={};if(-1==s.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var A=it(s,"CERTIFICATE REQUEST");u&&(C.tbs=g(A,0,[0]));try{var I=m(A,0,[0,1]);if("3000"==I)C.subject={};else{var S=new Pe;C.subject=S.getX500Name(I)}}catch{}var w=m(A,0,[0,2]),x=et.getKey(w,null,"pkcs8pub");C.sbjpubkey=et.getPEM(x,"PKCS8PUB");var M,O,_=(O=p(M=A,0,[0,3,0,0],"06"),"2a864886f70d01090e"!=d(M,O)?null:g(M,0,[0,3,0,1,0],"30"));S=new Pe,null!=_&&(C.extreq=S.getExtParamArray(_));try{var T=m(A,0,[1],"30");S=new Pe,C.sigalg=S.getAlgorithmIdentifierName(T)}catch{}try{var D=v(A,0,[2]);C.sighex=D}catch{}return C},h.asn1.csr.CSRUtil.verifySignature=function(s){try{var u=null;if("string"==typeof s&&-1!=s.indexOf("-----BEGIN CERTIFICATE REQUEST")?u=h.asn1.csr.CSRUtil.getParam(s,!0):"object"==typeof s&&null!=s.sbjpubkey&&null!=s.sigalg&&null!=s.sighex&&null!=s.tbs&&(u=s),null==u)return!1;var l=new h.crypto.Signature({alg:u.sigalg});return l.init(u.sbjpubkey),l.updateHex(u.tbs),l.verify(u.sighex)}catch(d){return alert(d),!1}},(typeof h>"u"||!h)&&(h={}),(typeof h.asn1>"u"||!h.asn1)&&(h.asn1={}),(typeof h.asn1.ocsp>"u"||!h.asn1.ocsp)&&(h.asn1.ocsp={}),h.asn1.ocsp.DEFAULT_HASH="sha1",h.asn1.ocsp.OCSPResponse=function(s){h.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var l=h.asn1.ASN1Util.newObject,d=h.asn1.ocsp.ResponseBytes,p=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var g=this.params.resstatus;return"number"==typeof g?g:"string"!=typeof g?-1:p.indexOf(g)},this.setByParam=function(g){this.params=g},this.tohex=function(){var g=this.params,m=this._getStatusCode();if(-1==m)throw new Error("responseStatus not supported: "+g.resstatus);if(0!=m)return l({seq:[{enum:{int:m}}]}).tohex();var v=new d(g);return l({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:v}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.OCSPResponse,h.asn1.ASN1Object),h.asn1.ocsp.ResponseBytes=function(s){h.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var u=h.asn1,l=u.DERSequence,d=u.DERObjectIdentifier,p=u.DEROctetString,g=u.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(m){this.params=m},this.tohex=function(){var m=this.params;if("ocspBasic"!=m.restype)throw new Error("not supported responseType: "+m.restype);var v=new g(m),b=[];return b.push(new d({name:"ocspBasic"})),b.push(new p({hex:v.tohex()})),new l({array:b}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.ResponseBytes,h.asn1.ASN1Object),h.asn1.ocsp.BasicOCSPResponse=function(s){h.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var u=Error,l=h.asn1,d=l.ASN1Object,p=l.DERSequence,m=l.DERTaggedObject,v=l.DERBitString,C=l.x509.AlgorithmIdentifier,A=l.ocsp;_SingleResponseList=A.SingleResponseList,_ResponseData=A.ResponseData,this.params=null,this.setByParam=function(w){this.params=w},this.sign=function(){var w=this.params,x=w.tbsresp.tohex(),_=new h.crypto.Signature({alg:w.sigalg});_.init(w.reskey),_.updateHex(x),w.sighex=_.sign()},this.tohex=function(){var w=this.params;null==w.tbsresp&&(w.tbsresp=new _ResponseData(w)),null==w.sighex&&null!=w.reskey&&this.sign();var x=[];if(x.push(w.tbsresp),x.push(new C({name:w.sigalg})),x.push(new v({hex:"00"+w.sighex})),null!=w.certs&&null!=w.certs.length){for(var _=[],S=0;S<w.certs.length;S++){var T=w.certs[S],D=null;if(de.isASN1HEX(T))D=T;else{if(!T.match(/-----BEGIN/))throw new u("certs["+S+"] not hex or PEM");D=it(T)}_.push(new d({tlv:D}))}var M=new p({array:_});x.push(new m({tag:"a0",explicit:!0,obj:M}))}return new p({array:x}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.BasicOCSPResponse,h.asn1.ASN1Object),h.asn1.ocsp.ResponseData=function(s){h.asn1.ocsp.ResponseData.superclass.constructor.call(this);var u=Error,l=h.asn1,d=l.DERSequence,p=l.DERGeneralizedTime,g=l.DERTaggedObject,m=l.x509.Extensions,v=l.ocsp,b=v.ResponderID;_SingleResponseList=v.SingleResponseList,this.params=null,this.tohex=function(){var C=this.params;null!=C.respid&&new u("respid not specified"),null!=C.prodat&&new u("prodat not specified"),null!=C.array&&new u("array not specified");var A=[];if(A.push(new b(C.respid)),A.push(new p(C.prodat)),A.push(new _SingleResponseList(C.array)),null!=C.ext){var I=new m(C.ext);A.push(new g({tag:"a1",explicit:!0,obj:I}))}return new d({array:A}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(C){this.params=C},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.ResponseData,h.asn1.ASN1Object),h.asn1.ocsp.ResponderID=function(s){h.asn1.ocsp.ResponderID.superclass.constructor.call(this);var l=h.asn1,d=l.ASN1Util.newObject,p=l.x509.X500Name,g=h.lang.String.isHex,m=Error;this.params=null,this.tohex=function(){var v=this.params;if(null!=v.key){var b=null;if("string"==typeof v.key)g(v.key)&&(b=v.key),v.key.match(/-----BEGIN CERTIFICATE/)&&null!=(A=new Pe(v.key).getExtSubjectKeyIdentifier())&&(b=A.kid.hex);else if(v.key instanceof Pe){var A;null!=(A=v.key.getExtSubjectKeyIdentifier())&&(b=A.kid.hex)}if(null==b)throw new m("wrong key member value");return d({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:b}}}}).tohex()}if(null!=v.name){var w=null;if("string"==typeof v.name&&v.name.match(/-----BEGIN CERTIFICATE/)?w=new Pe(v.name).getSubject():v.name instanceof Pe?w=v.name.getSubject():"object"==typeof v.name&&(null!=v.name.array||null!=v.name.str)&&(w=v.name),null==w)throw new m("wrong name member value");return d({tag:{tag:"a1",explicit:!0,obj:new p(w)}}).tohex()}throw new m("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(v){this.params=v},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.ResponderID,h.asn1.ASN1Object),h.asn1.ocsp.SingleResponseList=function(s){h.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var u=h.asn1,l=u.DERSequence,d=u.ocsp.SingleResponse;this.params=null,this.tohex=function(){var p=this.params;if("object"!=typeof p||null==p.length)throw new Error("params not specified properly");for(var g=[],m=0;m<p.length;m++)g.push(new d(p[m]));return new l({array:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(p){this.params=p},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.SingleResponseList,h.asn1.ASN1Object),h.asn1.ocsp.SingleResponse=function(s){var u=Error,d=h.asn1,p=d.DERSequence,g=d.DERGeneralizedTime,m=d.DERTaggedObject,v=d.ocsp,b=v.CertID,C=v.CertStatus,I=d.x509.Extensions;v.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var w=this.params,x=[];if(null==w.certid)throw new u("certid unspecified");if(null==w.status)throw new u("status unspecified");if(null==w.thisupdate)throw new u("thisupdate unspecified");if(x.push(new b(w.certid)),x.push(new C(w.status)),x.push(new g(w.thisupdate)),null!=w.nextupdate){var _=new g(w.nextupdate);x.push(new m({tag:"a0",explicit:!0,obj:_}))}if(null!=w.ext){var S=new I(w.ext);x.push(new m({tag:"a1",explicit:!0,obj:S}))}return new p({array:x}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(w){this.params=w},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.SingleResponse,h.asn1.ASN1Object),h.asn1.ocsp.CertID=function(s){var l=h.asn1,d=l.DEROctetString,p=l.DERInteger,g=l.DERSequence,v=l.x509.AlgorithmIdentifier,I=h.crypto.Util.hashHex,w=Pe,_=de.getVbyList;l.ocsp.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(S,T,D,M){null==M&&(M=this.DEFAULT_HASH),this.params={alg:M,issname:S,isskey:T,sbjsn:D}},this.setByCert=function(S,T,D){null==D&&(D=this.DEFAULT_HASH),this.params={alg:D,issuerCert:S,subjectCert:T}},this.getParamByCerts=function(S,T,D){null==D&&(D=this.DEFAULT_HASH);var M=new w(S),O=new w(T),V=I(M.getSubjectHex(),D),k=M.getPublicKeyHex();return{alg:D,issname:V,isskey:I(_(k,0,[1],"03",!0),D),sbjsn:O.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var T,D,M,O,S=this.params;if(O=null==S.alg?this.DEFAULT_HASH:S.alg,null!=S.issuerCert&&null!=S.subjectCert){var V=this.getParamByCerts(S.issuerCert,S.subjectCert,O);T=V.issname,D=V.isskey,M=V.sbjsn}else{if(null==S.issname||null==S.isskey||null==S.sbjsn)throw new Error("required param members not defined");T=S.issname,D=S.isskey,M=S.sbjsn}var k=new v({name:O}),X=new d({hex:T}),Y=new d({hex:D}),R=new p({hex:M}),P=new g({array:[k,X,Y,R]});return this.hTLV=P.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.CertID,h.asn1.ASN1Object),h.asn1.ocsp.CertStatus=function(s){h.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params;if("good"==u.status)return"8000";if("unknown"==u.status)return"8200";if("revoked"==u.status){var l=[{gentime:{str:u.time}}];return null!=u.reason&&l.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:u.reason}}}}),h.asn1.ASN1Util.newObject({tag:{tag:"a1",explicit:!1,obj:{seq:l}}}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},void 0!==s&&this.setByParam(s)},ne(h.asn1.ocsp.CertStatus,h.asn1.ASN1Object),h.asn1.ocsp.Request=function(s){var l=h.asn1,d=l.DERSequence,p=l.ocsp;if(p.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var m=[];if(null===this.dReqCert)throw"reqCert not set";m.push(this.dReqCert);var v=new d({array:m});return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof s<"u"){var g=new p.CertID(s);this.dReqCert=g}},ne(h.asn1.ocsp.Request,h.asn1.ASN1Object),h.asn1.ocsp.TBSRequest=function(s){var l=h.asn1,d=l.DERSequence,p=l.ocsp;p.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(g){for(var m=[],v=0;v<g.length;v++){var b=new p.Request(g[0]);m.push(b)}this.dRequestList=m},this.tohex=function(){var g=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var m=new d({array:this.dRequestList});if(g.push(m),null!==this.dRequestExt)throw"requestExtensions not supported";var v=new d({array:g});return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&void 0!==s.reqList&&this.setRequestListByParam(s.reqList)},ne(h.asn1.ocsp.TBSRequest,h.asn1.ASN1Object),h.asn1.ocsp.OCSPRequest=function(s){var l=h.asn1,d=l.DERSequence,p=l.ocsp;if(p.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var m=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(m.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var v=new d({array:m});return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==s&&void 0!==s.reqList){var g=new p.TBSRequest(s);this.dTbsRequest=g}},ne(h.asn1.ocsp.OCSPRequest,h.asn1.ASN1Object),h.asn1.ocsp.OCSPUtil={},h.asn1.ocsp.OCSPUtil.getRequestHex=function(s,u,l){var g=h.asn1.ocsp;return void 0===l&&(l=g.DEFAULT_HASH),new g.OCSPRequest({reqList:[{alg:l,issuerCert:s,subjectCert:u}]}).tohex()},h.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(s){var l=de.getVbyList,d=de.getVbyListEx,p=de.getIdxbyList,m=de.getV,v={};try{var b=d(s,0,[0],"0a");v.responseStatus=parseInt(b,16)}catch{}if(0!==v.responseStatus)return v;try{var C=p(s,0,[1,0,1,0,0,2,0,1]);"80"===s.substr(C,2)?v.certStatus="good":"a1"===s.substr(C,2)?(v.certStatus="revoked",v.revocationTime=Xe(l(s,C,[0]))):"82"===s.substr(C,2)&&(v.certStatus="unknown")}catch{}try{var A=p(s,0,[1,0,1,0,0,2,0,2]);v.thisUpdate=Xe(m(s,A))}catch{}try{var I=p(s,0,[1,0,1,0,0,2,0,3]);"a0"===s.substr(I,2)&&(v.nextUpdate=Xe(l(s,I,[0])))}catch{}return v},h.asn1.ocsp.OCSPParser=function(){var s=Error,u=Pe,l=new u,p=de.getV,g=de.getTLV,m=de.getIdxbyList,v=de.getVbyList,b=de.getTLVbyList,C=de.getVbyListEx,A=de.getTLVbyListEx,I=de.getChildIdx;this.getOCSPRequest=function(w){var x=I(w,0);if(1!=x.length&&2!=x.length)throw new s("wrong number elements: "+x.length);return this.getTBSRequest(g(w,x[0]))},this.getTBSRequest=function(w){var x={},_=A(w,0,[0],"30");x.array=this.getRequestList(_);var S=A(w,0,["[2]",0],"30");return null!=S&&(x.ext=l.getExtParamArray(S)),x},this.getRequestList=function(w){for(var x=[],_=I(w,0),S=0;S<_.length;S++)w=g(w,_[S]),x.push(this.getRequest(w));return x},this.getRequest=function(w){var x=I(w,0);if(1!=x.length&&2!=x.length)throw new s("wrong number elements: "+x.length);var _=this.getCertID(g(w,x[0]));if(2==x.length){var S=m(w,0,[1,0]);_.ext=l.getExtParamArray(g(w,S))}return _},this.getCertID=function(w){var x=I(w,0);if(4!=x.length)throw new s("wrong number elements: "+x.length);var _=new u,S={};return S.alg=_.getAlgorithmIdentifierName(g(w,x[0])),S.issname=p(w,x[1]),S.isskey=p(w,x[2]),S.sbjsn=p(w,x[3]),S},this.getOCSPResponse=function(w){var _,x=I(w,0),S=p(w,x[0]),T=parseInt(S);if(1==x.length)return{resstatus:T};var D=b(w,0,[1,0]);return(_=this.getResponseBytes(D)).resstatus=T,_},this.getResponseBytes=function(w){var _,x=I(w,0),S=b(w,0,[1,0]);_=this.getBasicOCSPResponse(S);var T=p(w,x[0]);return _.restype=h.asn1.x509.OID.oid2name(zn(T)),_},this.getBasicOCSPResponse=function(w){var _,x=I(w,0);_=this.getResponseData(g(w,x[0]));var S=new Pe;_.alg=S.getAlgorithmIdentifierName(g(w,x[1]));var T=p(w,x[2]);_.sighex=T.substr(2);var D=C(w,0,["[0]"]);if(null!=D){for(var M=I(D,0),O=[],V=0;V<M.length;V++){var k=g(D,M[V]);O.push(k)}_.certs=O}return _},this.getResponseData=function(w){var x=I(w,0),_=x.length,S={},T=0;"a0"==w.substr(x[0],2)&&T++,S.respid=this.getResponderID(g(w,x[T++]));var D=p(w,x[T++]);if(S.prodat=Xe(D),S.array=this.getSingleResponseList(g(w,x[T++])),"a1"==w.substr(x[_-1],2)){var M=b(w,x[_-1],[0]),O=new Pe;S.ext=O.getExtParamArray(M)}return S},this.getResponderID=function(w){var x={};if("a2"==w.substr(0,2)){var _=v(w,0,[0]);x.key=_}if("a1"==w.substr(0,2)){var S=b(w,0,[0]),T=new Pe;x.name=T.getX500Name(S)}return x},this.getSingleResponseList=function(w){for(var x=I(w,0),_=[],S=0;S<x.length;S++){var T=this.getSingleResponse(g(w,x[S]));_.push(T)}return _},this.getSingleResponse=function(w){var x=I(w,0),_={},S=this.getCertID(g(w,x[0]));_.certid=S;var T=this.getCertStatus(g(w,x[1]));if(_.status=T,"18"==w.substr(x[2],2)){var D=p(w,x[2]);_.thisupdate=Xe(D)}for(var M=3;M<x.length;M++){if("a0"==w.substr(x[M],2)){var O=v(w,x[M],[0],"18");_.nextupdate=Xe(O)}if("a1"==w.substr(x[M],2)){var V=new Pe,k=b(w,0,[M,0]);_.ext=V.getExtParamArray(k)}}return _},this.getCertStatus=function(w){var x={};if("8000"==w)return{status:"good"};if("8200"==w)return{status:"unknown"};if("a1"==w.substr(0,2)){x.status="revoked";var S=Xe(v(w,0,[0]));x.time=S}return x}},(typeof h>"u"||!h)&&(h={}),(typeof h.lang>"u"||!h.lang)&&(h.lang={}),h.lang.String=function(){},"function"==typeof Buffer?(rt=function(s){return ms(Buffer.from(s,"utf8").toString("base64"))},Rn=function(s){return Buffer.from(Ws(s),"base64").toString("utf8")}):(rt=function(s){return vt(ye(yi(s)))},Rn=function(s){return decodeURIComponent(je(ut(s)))}),h.lang.String.isInteger=function(s){return!!s.match(/^[0-9]+$/)||!!s.match(/^-[0-9]+$/)},h.lang.String.isHex=function(s){return Gi(s)},h.lang.String.isBase64=function(s){return!(!(s=s.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||s.length%4!=0)},h.lang.String.isBase64URL=function(s){return!s.match(/[+/=]/)&&(s=Ws(s),h.lang.String.isBase64(s))},h.lang.String.isIntegerArray=function(s){return!!(s=s.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},h.lang.String.isPrintable=function(s){return null!==s.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},h.lang.String.isIA5=function(s){return null!==s.match(/^[\x20-\x21\x23-\x7f]*$/)},h.lang.String.isMail=function(s){return null!==s.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Zr=function(s,u,l){return null==l&&(l="0"),s.length>=u?s:new Array(u-s.length+1).join(l)+s};function xs(s,u){for(var l=0,d=0;d<s.length;d++)l|=1<<u[s[d]];var p=l.toString(2),g="";for(d=p.length-1;d>=0;d--)g+=p[d];return g}function ne(s,u){var l=function(){};l.prototype=u.prototype,s.prototype=new l,s.prototype.constructor=s,s.superclass=u.prototype,u.prototype.constructor==Object.prototype.constructor&&(u.prototype.constructor=u)}(typeof h>"u"||!h)&&(h={}),(typeof h.crypto>"u"||!h.crypto)&&(h.crypto={}),h.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:me.algo.MD5,sha1:me.algo.SHA1,sha224:me.algo.SHA224,sha256:me.algo.SHA256,sha384:me.algo.SHA384,sha512:me.algo.SHA512,ripemd160:me.algo.RIPEMD160},this.getDigestInfoHex=function(s,u){if(typeof this.DIGESTINFOHEAD[u]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+u;return this.DIGESTINFOHEAD[u]+s},this.getPaddedDigestInfoHex=function(s,u,l){var d=this.getDigestInfoHex(s,u),p=l/4;if(d.length+22>p)throw"key is too short for SigAlg: keylen="+l+","+u;for(var g="0001",m="00"+d,v="",b=p-g.length-m.length,C=0;C<b;C+=2)v+="ff";return g+v+m},this.hashString=function(s,u){return new h.crypto.MessageDigest({alg:u}).digestString(s)},this.hashHex=function(s,u){return new h.crypto.MessageDigest({alg:u}).digestHex(s)},this.sha1=function(s){return this.hashString(s,"sha1")},this.sha256=function(s){return this.hashString(s,"sha256")},this.sha256Hex=function(s){return this.hashHex(s,"sha256")},this.sha512=function(s){return this.hashString(s,"sha512")},this.sha512Hex=function(s){return this.hashHex(s,"sha512")},this.isKey=function(s){return s instanceof Te||s instanceof h.crypto.DSA||s instanceof h.crypto.ECDSA}},h.crypto.Util.md5=function(s){return new h.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(s)},h.crypto.Util.ripemd160=function(s){return new h.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(s)},h.crypto.Util.SECURERANDOMGEN=new mi,h.crypto.Util.getRandomHexOfNbytes=function(s){var u=new Array(s);return h.crypto.Util.SECURERANDOMGEN.nextBytes(u),Gs(u)},h.crypto.Util.getRandomBigIntegerOfNbytes=function(s){return new K(h.crypto.Util.getRandomHexOfNbytes(s),16)},h.crypto.Util.getRandomHexOfNbits=function(s){var u=s%8,d=new Array((s-u)/8+1);return h.crypto.Util.SECURERANDOMGEN.nextBytes(d),d[0]=(255<<u&255^255)&d[0],Gs(d)},h.crypto.Util.getRandomBigIntegerOfNbits=function(s){return new K(h.crypto.Util.getRandomHexOfNbits(s),16)},h.crypto.Util.getRandomBigIntegerZeroToMax=function(s){for(var u=s.bitLength();;){var l=h.crypto.Util.getRandomBigIntegerOfNbits(u);if(-1!=s.compareTo(l))return l}},h.crypto.Util.getRandomBigIntegerMinToMax=function(s,u){var l=s.compareTo(u);if(1==l)throw"biMin is greater than biMax";if(0==l)return s;var d=u.subtract(s);return h.crypto.Util.getRandomBigIntegerZeroToMax(d).add(s)},h.crypto.MessageDigest=function(s){this.setAlgAndProvider=function(p,g){if(null!==(p=h.crypto.MessageDigest.getCanonicalAlgName(p))&&void 0===g&&(g=h.crypto.Util.DEFAULTPROVIDER[p]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(p)&&"cryptojs"==g){try{this.md=h.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[p].create()}catch(m){throw"setAlgAndProvider hash alg set fail alg="+p+"/"+m}this.updateString=function(m){this.md.update(m)},this.updateHex=function(m){var v=me.enc.Hex.parse(m);this.md.update(v)},this.digest=function(){return this.md.finalize().toString(me.enc.Hex)},this.digestString=function(m){return this.updateString(m),this.digest()},this.digestHex=function(m){return this.updateHex(m),this.digest()}}if(-1!=":sha256:".indexOf(p)&&"sjcl"==g){try{this.md=new sjcl.hash.sha256}catch(m){throw"setAlgAndProvider hash alg set fail alg="+p+"/"+m}this.updateString=function(m){this.md.update(m)},this.updateHex=function(m){var v=sjcl.codec.hex.toBits(m);this.md.update(v)},this.digest=function(){var m=this.md.finalize();return sjcl.codec.hex.fromBits(m)},this.digestString=function(m){return this.updateString(m),this.digest()},this.digestHex=function(m){return this.updateHex(m),this.digest()}}},this.updateString=function(p){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(p){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(p){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(p){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==s&&void 0!==s.alg&&(this.algName=s.alg,void 0===s.prov&&(this.provName=h.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},h.crypto.MessageDigest.getCanonicalAlgName=function(s){return"string"==typeof s&&(s=(s=s.toLowerCase()).replace(/-/,"")),s},h.crypto.MessageDigest.getHashLength=function(s){var u=h.crypto.MessageDigest,l=u.getCanonicalAlgName(s);if(void 0===u.HASHLENGTH[l])throw"not supported algorithm: "+s;return u.HASHLENGTH[l]},h.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},h.crypto.Mac=function(s){this.setAlgAndProvider=function(m,v){if(null==(m=m.toLowerCase())&&(m="hmacsha1"),"hmac"!=(m=m.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+m;void 0===v&&(v=h.crypto.Util.DEFAULTPROVIDER[m]),this.algProv=m+"/"+v;var b=m.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(b)&&"cryptojs"==v){try{this.mac=me.algo.HMAC.create(h.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[b],this.pass)}catch(A){throw"setAlgAndProvider hash alg set fail hashAlg="+b+"/"+A}this.updateString=function(A){this.mac.update(A)},this.updateHex=function(A){var I=me.enc.Hex.parse(A);this.mac.update(I)},this.doFinal=function(){return this.mac.finalize().toString(me.enc.Hex)},this.doFinalString=function(A){return this.updateString(A),this.doFinal()},this.doFinalHex=function(A){return this.updateHex(A),this.doFinal()}}},this.updateString=function(m){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(m){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(m){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(m){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(m){if("string"==typeof m){var v=m;return(m.length%2==1||!m.match(/^[0-9A-Fa-f]+$/))&&(v=jn(m)),void(this.pass=me.enc.Hex.parse(v))}if("object"!=typeof m)throw"KJUR.crypto.Mac unsupported password type: "+m;if(v=null,void 0!==m.hex){if(m.hex.length%2!=0||!m.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+m.hex;v=m.hex}if(void 0!==m.utf8&&(v=zi(m.utf8)),void 0!==m.rstr&&(v=jn(m.rstr)),void 0!==m.b64&&(v=Mr(m.b64)),void 0!==m.b64u&&(v=ut(m.b64u)),null==v)throw"KJUR.crypto.Mac unsupported password type: "+m;this.pass=me.enc.Hex.parse(v)},void 0!==s&&(void 0!==s.pass&&this.setPassword(s.pass),void 0!==s.alg&&(this.algName=s.alg,void 0===s.prov&&(this.provName=h.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},h.crypto.Signature=function(s){var u=null;if(this._setAlgNames=function(){var D=this.algName.match(/^(.+)with(.+)$/);D&&(this.mdAlgName=D[1].toLowerCase(),this.pubkeyAlgName=D[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(D,M){for(var O="",V=M/4-D.length,k=0;k<V;k++)O+="0";return O+D},this.setAlgAndProvider=function(D,M){if(this._setAlgNames(),"cryptojs/jsrsa"!=M)throw new Error("provider not supported: "+M);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new h.crypto.MessageDigest({alg:this.mdAlgName})}catch(O){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+O)}this.init=function(O,V){var k=null;try{k=void 0===V?et.getKey(O):et.getKey(O,V)}catch(X){throw"init failed:"+X}if(!0===k.isPrivate)this.prvKey=k,this.state="SIGN";else{if(!0!==k.isPublic)throw"init failed.:"+k;this.pubKey=k,this.state="VERIFY"}},this.updateString=function(O){this.md.updateString(O)},this.updateHex=function(O){this.md.updateHex(O)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==h.crypto.ECDSA&&(this.prvKey=new h.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Te&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Te&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof h.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof h.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(O){return this.updateString(O),this.sign()},this.signHex=function(O){return this.updateHex(O),this.sign()},this.verify=function(O){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==h.crypto.ECDSA&&(this.pubKey=new h.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Te&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,O,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Te&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,O);if(void 0!==h.crypto.ECDSA&&this.pubKey instanceof h.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,O);if(void 0!==h.crypto.DSA&&this.pubKey instanceof h.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,O);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(D,M){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(D){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(D){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(D){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(D){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(D){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=s,void 0!==s&&(void 0!==s.alg&&(this.algName=s.alg,this.provName=void 0===s.prov?h.crypto.Util.DEFAULTPROVIDER[this.algName]:s.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==s.psssaltlen&&(this.pssSaltLen=s.psssaltlen),void 0!==s.prvkeypem)){if(void 0!==s.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{u=et.getKey(s.prvkeypem),this.init(u)}catch(D){throw"fatal error to load pem private key: "+D}}},h.crypto.Cipher=function(s){},h.crypto.Cipher.encrypt=function(s,u,l){if(u instanceof Te&&u.isPublic){var d=h.crypto.Cipher.getAlgByKeyAndName(u,l);if("RSA"===d)return u.encrypt(s);if("RSAOAEP"===d)return u.encryptOAEP(s,"sha1");var p=d.match(/^RSAOAEP(\d+)$/);if(null!==p)return u.encryptOAEP(s,"sha"+p[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+l}throw"Cipher.encrypt: unsupported key or algorithm"},h.crypto.Cipher.decrypt=function(s,u,l){if(u instanceof Te&&u.isPrivate){var d=h.crypto.Cipher.getAlgByKeyAndName(u,l);if("RSA"===d)return u.decrypt(s);if("RSAOAEP"===d)return u.decryptOAEP(s,"sha1");var p=d.match(/^RSAOAEP(\d+)$/);if(null!==p)return u.decryptOAEP(s,"sha"+p[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+l}throw"Cipher.decrypt: unsupported key or algorithm"},h.crypto.Cipher.getAlgByKeyAndName=function(s,u){if(s instanceof Te){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(u))return u;if(null==u)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+u}throw"getAlgByKeyAndName: not supported algorithm name: "+u},h.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(typeof h>"u"||!h)&&(h={}),(typeof h.crypto>"u"||!h.crypto)&&(h.crypto={}),h.crypto.ECDSA=function(s){var g=Error,m=K,v=ct,b=h.crypto.ECDSA,C=h.crypto.ECParameterDB,A=b.getName,w=de.getVbyListEx,x=de.isASN1HEX,_=new mi;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(D){return new m(D.bitLength(),_).mod(D.subtract(m.ONE)).add(m.ONE)},this.setNamedCurve=function(D){this.ecparams=C.getByName(D),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=D},this.setPrivateKeyHex=function(D){this.isPrivate=!0,this.prvKeyHex=D},this.setPublicKeyHex=function(D){this.isPublic=!0,this.pubKeyHex=D},this.getPublicKeyXYHex=function(){var D=this.pubKeyHex;if("04"!==D.substr(0,2))throw"this method supports uncompressed format(04) only";var M=this.ecparams.keycharlen;if(D.length!==2+2*M)throw"malformed public key hex length";var O={};return O.x=D.substr(2,M),O.y=D.substr(2+M),O},this.getShortNISTPCurveName=function(){var D=this.curveName;return"secp256r1"===D||"NIST P-256"===D||"P-256"===D||"prime256v1"===D?"P-256":"secp384r1"===D||"NIST P-384"===D||"P-384"===D?"P-384":"secp521r1"===D||"NIST P-521"===D||"P-521"===D?"P-521":null},this.generateKeyPairHex=function(){var M=this.getBigRandom(this.ecparams.n),O=this.ecparams.keycharlen,V=("0000000000"+M.toString(16)).slice(-O);return this.setPrivateKeyHex(V),{ecprvhex:V,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var D=new m(this.prvKeyHex,16),M=this.ecparams.G.multiply(D),O=M.getX().toBigInteger(),V=M.getY().toBigInteger(),k=this.ecparams.keycharlen,R="04"+("0000000000"+O.toString(16)).slice(-k)+("0000000000"+V.toString(16)).slice(-k);return this.setPublicKeyHex(R),R},this.signWithMessageHash=function(D){return this.signHex(D,this.prvKeyHex)},this.signHex=function(D,M){var O=new m(M,16),V=this.ecparams.n,k=new m(D.substring(0,this.ecparams.keycharlen),16);do{var X=this.getBigRandom(V),P=this.ecparams.G.multiply(X).getX().toBigInteger().mod(V)}while(P.compareTo(m.ZERO)<=0);var B=X.modInverse(V).multiply(k.add(O.multiply(P))).mod(V);return b.biRSSigToASN1Sig(P,B)},this.sign=function(D,M){var O=M,V=this.ecparams.n,k=m.fromByteArrayUnsigned(D);do{var X=this.getBigRandom(V),P=this.ecparams.G.multiply(X).getX().toBigInteger().mod(V)}while(P.compareTo(K.ZERO)<=0);var B=X.modInverse(V).multiply(k.add(O.multiply(P))).mod(V);return this.serializeSig(P,B)},this.verifyWithMessageHash=function(D,M){return this.verifyHex(D,M,this.pubKeyHex)},this.verifyHex=function(D,M,O){try{var V,k,X=b.parseSigHex(M);V=X.r,k=X.s;var Y=v.decodeFromHex(this.ecparams.curve,O),R=new m(D.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(R,V,k,Y)}catch{return!1}},this.verify=function(D,M,O){var V,k,Y;if(Bitcoin.Util.isArray(M)){var X=this.parseSig(M);V=X.r,k=X.s}else{if("object"!=typeof M||!M.r||!M.s)throw"Invalid value for signature";V=M.r,k=M.s}if(O instanceof ct)Y=O;else{if(!Bitcoin.Util.isArray(O))throw"Invalid format for pubkey value, must be byte array or ECPointFp";Y=v.decodeFrom(this.ecparams.curve,O)}var R=m.fromByteArrayUnsigned(D);return this.verifyRaw(R,V,k,Y)},this.verifyRaw=function(D,M,O,V){var k=this.ecparams.n,X=this.ecparams.G;if(M.compareTo(m.ONE)<0||M.compareTo(k)>=0||O.compareTo(m.ONE)<0||O.compareTo(k)>=0)return!1;var Y=O.modInverse(k),R=D.multiply(Y).mod(k),P=M.multiply(Y).mod(k);return X.multiply(R).add(V.multiply(P)).getX().toBigInteger().mod(k).equals(M)},this.serializeSig=function(D,M){var O=D.toByteArraySigned(),V=M.toByteArraySigned(),k=[];return k.push(2),k.push(O.length),(k=k.concat(O)).push(2),k.push(V.length),(k=k.concat(V)).unshift(k.length),k.unshift(48),k},this.parseSig=function(D){var M;if(48!=D[0])throw new Error("Signature not a valid DERSequence");if(2!=D[M=2])throw new Error("First element in signature must be a DERInteger");var O=D.slice(M+2,M+2+D[M+1]);if(2!=D[M+=2+D[M+1]])throw new Error("Second element in signature must be a DERInteger");var V=D.slice(M+2,M+2+D[M+1]);return M+=2+D[M+1],{r:m.fromByteArrayUnsigned(O),s:m.fromByteArrayUnsigned(V)}},this.parseSigCompact=function(D){if(65!==D.length)throw"Signature has the wrong length";var M=D[0]-27;if(M<0||M>7)throw"Invalid signature type";var O=this.ecparams.n;return{r:m.fromByteArrayUnsigned(D.slice(1,33)).mod(O),s:m.fromByteArrayUnsigned(D.slice(33,65)).mod(O),i:M}},this.readPKCS5PrvKeyHex=function(D){if(!1===x(D))throw new Error("not ASN.1 hex string");var M,O,V;try{M=w(D,0,["[0]",0],"06"),O=w(D,0,[1],"04");try{V=w(D,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=A(M),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(V),this.setPrivateKeyHex(O),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(D){if(!1===x(D))throw new g("not ASN.1 hex string");var O,V,k;try{w(D,0,[1,0],"06"),O=w(D,0,[1,1],"06"),V=w(D,0,[2,0,1],"04");try{k=w(D,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new g("malformed PKCS#8 plain ECC private key")}if(this.curveName=A(O),void 0===this.curveName)throw new g("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(k),this.setPrivateKeyHex(V),this.isPublic=!1},this.readPKCS8PubKeyHex=function(D){if(!1===x(D))throw new g("not ASN.1 hex string");var O,V;try{w(D,0,[0,0],"06"),O=w(D,0,[0,1],"06"),V=w(D,0,[1],"03")}catch{throw new g("malformed PKCS#8 ECC public key")}if(this.curveName=A(O),null===this.curveName)throw new g("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(V)},this.readCertPubKeyHex=function(D,M){if(!1===x(D))throw new g("not ASN.1 hex string");var O,V;try{O=w(D,0,[0,5,0,1],"06"),V=w(D,0,[0,5,1],"03")}catch{throw new g("malformed X.509 certificate ECC public key")}if(this.curveName=A(O),null===this.curveName)throw new g("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(V)},void 0!==s&&void 0!==s.curve&&(this.curveName=s.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==s&&(void 0!==s.prv&&this.setPrivateKeyHex(s.prv),void 0!==s.pub&&this.setPublicKeyHex(s.pub))},h.crypto.ECDSA.parseSigHex=function(s){var u=h.crypto.ECDSA.parseSigHexInHexRS(s);return{r:new K(u.r,16),s:new K(u.s,16)}},h.crypto.ECDSA.parseSigHexInHexRS=function(s){var l=de.getChildIdx,d=de.getV;if(de.checkStrictDER(s,0),"30"!=s.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var p=l(s,0);if(2!=p.length)throw new Error("signature shall have two elements");var g=p[0],m=p[1];if("02"!=s.substr(g,2))throw new Error("1st item not ASN.1 integer");if("02"!=s.substr(m,2))throw new Error("2nd item not ASN.1 integer");return{r:d(s,g),s:d(s,m)}},h.crypto.ECDSA.asn1SigToConcatSig=function(s){var u=h.crypto.ECDSA.parseSigHexInHexRS(s),l=u.r,d=u.s;if(l.length>=130&&l.length<=134){if(l.length%2!=0)throw Error("unknown ECDSA sig r length error");if(d.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==l.substr(0,2)&&(l=l.substr(2)),"00"==d.substr(0,2)&&(d=d.substr(2));var p=Math.max(l.length,d.length);return(l=("000000"+l).slice(-p))+("000000"+d).slice(-p)}if("00"==l.substr(0,2)&&l.length%32==2&&(l=l.substr(2)),"00"==d.substr(0,2)&&d.length%32==2&&(d=d.substr(2)),l.length%32==30&&(l="00"+l),d.length%32==30&&(d="00"+d),l.length%32!=0)throw Error("unknown ECDSA sig r length error");if(d.length%32!=0)throw Error("unknown ECDSA sig s length error");return l+d},h.crypto.ECDSA.concatSigToASN1Sig=function(s){if(s.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var u=s.substr(0,s.length/2),l=s.substr(s.length/2);return h.crypto.ECDSA.hexRSSigToASN1Sig(u,l)},h.crypto.ECDSA.hexRSSigToASN1Sig=function(s,u){var l=new K(s,16),d=new K(u,16);return h.crypto.ECDSA.biRSSigToASN1Sig(l,d)},h.crypto.ECDSA.biRSSigToASN1Sig=function(s,u){var l=h.asn1,d=new l.DERInteger({bigint:s}),p=new l.DERInteger({bigint:u});return new l.DERSequence({array:[d,p]}).tohex()},h.crypto.ECDSA.getName=function(s){return"2b8104001f"===s?"secp192k1":"2a8648ce3d030107"===s?"secp256r1":"2b8104000a"===s?"secp256k1":"2b81040021"===s?"secp224r1":"2b81040022"===s?"secp384r1":"2b81040023"===s?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(s)?"secp256r1":-1!=="|secp256k1|".indexOf(s)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(s)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(s)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(s)?"secp521r1":null},(typeof h>"u"||!h)&&(h={}),(typeof h.crypto>"u"||!h.crypto)&&(h.crypto={}),h.crypto.ECParameterDB=new function(){var s={},u={};function l(d){return new K(d,16)}this.getByName=function(d){var p=d;if(typeof u[p]<"u"&&(p=u[d]),typeof s[p]<"u")return s[p];throw"unregistered EC curve name: "+p},this.regist=function(d,p,g,m,v,b,C,A,I,w,x,_){s[d]={};var S=l(g),T=l(m),D=l(v),M=l(b),O=l(C),V=new er(S,T,D),k=V.decodePointHex("04"+A+I);s[d].name=d,s[d].keylen=p,s[d].keycharlen=2*Math.ceil(p/8),s[d].curve=V,s[d].G=k,s[d].n=M,s[d].h=O,s[d].oid=x,s[d].info=_;for(var X=0;X<w.length;X++)u[w[X]]=d}},h.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),h.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),h.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),h.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),h.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),h.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),h.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),h.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),h.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),h.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(typeof h>"u"||!h)&&(h={}),(typeof h.crypto>"u"||!h.crypto)&&(h.crypto={}),h.crypto.DSA=function(){var l=de.getVbyListEx,d=de.isASN1HEX,p=K;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(g,m,v,b,C){this.isPrivate=!0,this.p=g,this.q=m,this.g=v,this.y=b,this.x=C},this.setPrivateHex=function(g,m,v,b,C){var A,I,w,x,_;A=new K(g,16),I=new K(m,16),w=new K(v,16),x="string"==typeof b&&b.length>1?new K(b,16):null,_=new K(C,16),this.setPrivate(A,I,w,x,_)},this.setPublic=function(g,m,v,b){this.isPublic=!0,this.p=g,this.q=m,this.g=v,this.y=b,this.x=null},this.setPublicHex=function(g,m,v,b){var C,A,I,w;C=new K(g,16),A=new K(m,16),I=new K(v,16),w=new K(b,16),this.setPublic(C,A,I,w)},this.signWithMessageHash=function(g){var m=this.p,v=this.q,b=this.g,A=this.x,I=h.crypto.Util.getRandomBigIntegerMinToMax(K.ONE.add(K.ONE),v.subtract(K.ONE)),x=new K(g.substr(0,v.bitLength()/4),16),_=b.modPow(I,m).mod(v),S=I.modInverse(v).multiply(x.add(A.multiply(_))).mod(v);return h.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:_}},{int:{bigint:S}}]})},this.verifyWithMessageHash=function(g,m){var v=this.p,b=this.q,C=this.g,A=this.y,I=this.parseASN1Signature(m),w=I[0],x=I[1],S=new K(g.substr(0,b.bitLength()/4),16);if(K.ZERO.compareTo(w)>0||w.compareTo(b)>0||K.ZERO.compareTo(x)>=0||x.compareTo(b)>0)throw"invalid DSA signature";var T=x.modInverse(b),D=S.multiply(T).mod(b),M=w.multiply(T).mod(b);return 0==C.modPow(D,v).multiply(A.modPow(M,v)).mod(v).mod(b).compareTo(w)},this.parseASN1Signature=function(g){try{return[new p(l(g,0,[0],"02"),16),new p(l(g,0,[1],"02"),16)]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(g){var m,v,b,C,A;if(!1===d(g))throw new Error("not ASN.1 hex string");try{m=l(g,0,[1],"02"),v=l(g,0,[2],"02"),b=l(g,0,[3],"02"),C=l(g,0,[4],"02"),A=l(g,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(m,v,b,C,A)},this.readPKCS8PrvKeyHex=function(g){var m,v,b,C;if(!1===d(g))throw new Error("not ASN.1 hex string");try{m=l(g,0,[1,1,0],"02"),v=l(g,0,[1,1,1],"02"),b=l(g,0,[1,1,2],"02"),C=l(g,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(m,v,b,null,C)},this.readPKCS8PubKeyHex=function(g){var m,v,b,C;if(!1===d(g))throw new Error("not ASN.1 hex string");try{m=l(g,0,[0,1,0],"02"),v=l(g,0,[0,1,1],"02"),b=l(g,0,[0,1,2],"02"),C=l(g,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(m,v,b,C)},this.readCertPubKeyHex=function(g,m){var v,b,C,A;if(!1===d(g))throw new Error("not ASN.1 hex string");try{v=l(g,0,[0,5,0,1,0],"02"),b=l(g,0,[0,5,0,1,1],"02"),C=l(g,0,[0,5,0,1,2],"02"),A=l(g,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(v,b,C,A)}};var et=function(){var s=function(S,T,D){return d(me.AES,S,T,D)},d=function(S,T,D,M){var O=me.enc.Hex.parse(T),V=me.enc.Hex.parse(D),k=me.enc.Hex.parse(M),X={};X.key=V,X.iv=k,X.ciphertext=O;var Y=S.decrypt(X,V,{iv:k});return me.enc.Hex.stringify(Y)},p=function(S,T,D){return v(me.AES,S,T,D)},v=function(S,T,D,M){var O=me.enc.Hex.parse(T),V=me.enc.Hex.parse(D),k=me.enc.Hex.parse(M),X=S.encrypt(O,V,{iv:k}),Y=me.enc.Hex.parse(X.toString());return me.enc.Base64.stringify(Y)},b={"AES-256-CBC":{proc:s,eproc:p,keylen:32,ivlen:16},"AES-192-CBC":{proc:s,eproc:p,keylen:24,ivlen:16},"AES-128-CBC":{proc:s,eproc:p,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(S,T,D){return d(me.TripleDES,S,T,D)},eproc:function(S,T,D){return v(me.TripleDES,S,T,D)},keylen:24,ivlen:8},"DES-CBC":{proc:function(S,T,D){return d(me.DES,S,T,D)},eproc:function(S,T,D){return v(me.DES,S,T,D)},keylen:8,ivlen:8}},I=function(S){var T={},D=S.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));D&&(T.cipher=D[1],T.ivsalt=D[2]);var M=S.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));M&&(T.type=M[1]);var O=-1,V=0;-1!=S.indexOf("\r\n\r\n")&&(O=S.indexOf("\r\n\r\n"),V=2),-1!=S.indexOf("\n\n")&&(O=S.indexOf("\n\n"),V=1);var k=S.indexOf("-----END");if(-1!=O&&-1!=k){var X=S.substring(O+2*V,k-V);X=X.replace(/\s+/g,""),T.data=X}return T},w=function(S,T,D){for(var M=D.substring(0,16),O=me.enc.Hex.parse(M),V=me.enc.Utf8.parse(T),k=b[S].keylen+b[S].ivlen,X="",Y=null;;){var R=me.algo.MD5.create();if(null!=Y&&R.update(Y),R.update(V),R.update(O),Y=R.finalize(),(X+=me.enc.Hex.stringify(Y)).length>=2*k)break}var P={};return P.keyhex=X.substr(0,2*b[S].keylen),P.ivhex=X.substr(2*b[S].keylen,2*b[S].ivlen),P},x=function(S,T,D,M){var O=me.enc.Base64.parse(S),V=me.enc.Hex.stringify(O);return(0,b[T].proc)(V,D,M)};return{version:"1.0.0",parsePKCS5PEM:function(S){return I(S)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(S,T,D){return w(S,T,D)},decryptKeyB64:function(S,T,D,M){return x(S,T,D,M)},getDecryptedKeyHex:function(S,T){var D=I(S),O=D.cipher,V=D.ivsalt,k=D.data,X=w(O,T,V);return x(k,O,X.keyhex,V)},getEncryptedPKCS5PEMFromPrvKeyHex:function(S,T,D,M,O){var B="";if((typeof M>"u"||null==M)&&(M="AES-256-CBC"),typeof b[M]>"u")throw new Error("KEYUTIL unsupported algorithm: "+M);if(typeof O>"u"||null==O){var k=function(S){var T=me.lib.WordArray.random(S);return me.enc.Hex.stringify(T)}(b[M].ivlen);O=k.toUpperCase()}var R=function(S,T,D,M){return(0,b[T].eproc)(S,D,M)}(T,M,w(M,D,O).keyhex,O);return B="-----BEGIN "+S+" PRIVATE KEY-----\r\n",B+="Proc-Type: 4,ENCRYPTED\r\n",B+="DEK-Info: "+M+","+O+"\r\n",B+="\r\n",(B+=R.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+S+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(S){var D=de.getChildIdx,M=de.getV,O={},V=D(S,0);if(2!=V.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+V.length);O.ciphertext=M(S,V[1]);var k=D(S,V[0]);if(2!=k.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+k.length);if("2a864886f70d01050d"!=M(S,k[0]))throw new Error("this only supports pkcs5PBES2");var X=D(S,k[1]);if(2!=k.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+X.length);var Y=D(S,X[1]);if(2!=Y.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+Y.length);if("2a864886f70d0307"!=M(S,Y[0]))throw"this only supports TripleDES";O.encryptionSchemeAlg="TripleDES",O.encryptionSchemeIV=M(S,Y[1]);var R=D(S,X[0]);if(2!=R.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+R.length);if("2a864886f70d01050c"!=M(S,R[0]))throw new Error("this only supports pkcs5PBKDF2");var P=D(S,R[1]);if(P.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+P.length);O.pbkdf2Salt=M(S,P[0]);var B=M(S,P[1]);try{O.pbkdf2Iter=parseInt(B,16)}catch{throw new Error("malformed format pbkdf2Iter: "+B)}return O},getPBKDF2KeyHexFromParam:function(S,T){var D=me.enc.Hex.parse(S.pbkdf2Salt),O=me.PBKDF2(T,D,{keySize:6,iterations:S.pbkdf2Iter});return me.enc.Hex.stringify(O)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(S,T){var D=it(S,"ENCRYPTED PRIVATE KEY"),M=this.parseHexOfEncryptedPKCS8(D),O=et.getPBKDF2KeyHexFromParam(M,T),V={};V.ciphertext=me.enc.Hex.parse(M.ciphertext);var k=me.enc.Hex.parse(O),X=me.enc.Hex.parse(M.encryptionSchemeIV),Y=me.TripleDES.decrypt(V,k,{iv:X});return me.enc.Hex.stringify(Y)},getKeyFromEncryptedPKCS8PEM:function(S,T){var D=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(S,T);return this.getKeyFromPlainPrivatePKCS8Hex(D)},parsePlainPrivatePKCS8Hex:function(S){var T=de,D=T.getChildIdx,M=T.getV,O={algparam:null};if("30"!=S.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var V=D(S,0);if(V.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=S.substr(V[1],2))throw new Error("malformed PKCS8 private key(code:003)");var k=D(S,V[1]);if(2!=k.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=S.substr(k[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(O.algoid=M(S,k[0]),"06"==S.substr(k[1],2)&&(O.algparam=M(S,k[1])),"04"!=S.substr(V[2],2))throw new Error("malformed PKCS8 private key(code:006)");return O.keyidx=T.getVidx(S,V[2]),O},getKeyFromPlainPrivatePKCS8PEM:function(S){var T=it(S,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(T)},getKeyFromPlainPrivatePKCS8Hex:function(S){var D,T=this.parsePlainPrivatePKCS8Hex(S);if("2a864886f70d010101"==T.algoid)D=new Te;else if("2a8648ce380401"==T.algoid)D=new h.crypto.DSA;else{if("2a8648ce3d0201"!=T.algoid)throw new Error("unsupported private key algorithm");D=new h.crypto.ECDSA}return D.readPKCS8PrvKeyHex(S),D},_getKeyFromPublicPKCS8Hex:function(S){var T,D=de.getVbyList(S,0,[0,0],"06");if("2a864886f70d010101"===D)T=new Te;else if("2a8648ce380401"===D)T=new h.crypto.DSA;else{if("2a8648ce3d0201"!==D)throw new Error("unsupported PKCS#8 public key hex");T=new h.crypto.ECDSA}return T.readPKCS8PubKeyHex(S),T},parsePublicRawRSAKeyHex:function(S){var D=de.getChildIdx,M=de.getV,O={};if("30"!=S.substr(0,2))throw new Error("malformed RSA key(code:001)");var V=D(S,0);if(2!=V.length)throw new Error("malformed RSA key(code:002)");if("02"!=S.substr(V[0],2))throw new Error("malformed RSA key(code:003)");if(O.n=M(S,V[0]),"02"!=S.substr(V[1],2))throw new Error("malformed RSA key(code:004)");return O.e=M(S,V[1]),O},parsePublicPKCS8Hex:function(S){var T=de,D=T.getChildIdx,M=T.getV,O={algparam:null},V=D(S,0);if(2!=V.length)throw new Error("outer DERSequence shall have 2 elements: "+V.length);var k=V[0];if("30"!=S.substr(k,2))throw new Error("malformed PKCS8 public key(code:001)");var X=D(S,k);if(2!=X.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=S.substr(X[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(O.algoid=M(S,X[0]),"06"==S.substr(X[1],2)?O.algparam=M(S,X[1]):"30"==S.substr(X[1],2)&&(O.algparam={},O.algparam.p=T.getVbyList(S,X[1],[0],"02"),O.algparam.q=T.getVbyList(S,X[1],[1],"02"),O.algparam.g=T.getVbyList(S,X[1],[2],"02")),"03"!=S.substr(V[1],2))throw new Error("malformed PKCS8 public key(code:004)");return O.key=M(S,V[1]).substr(2),O}}}();function Yd(s,u){for(var l="",d=u/4-s.length,p=0;p<d;p++)l+="0";return l+s}function Pn(s,u,l){for(var d="",p=0;d.length<u;)d+=an(l(jn(s+String.fromCharCode.apply(String,[(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p])))),p+=1;return d}function Wi(s){for(var u in h.crypto.Util.DIGESTINFOHEAD){var l=h.crypto.Util.DIGESTINFOHEAD[u],d=l.length;if(s.substring(0,d)==l)return[u,s.substring(d)]}return[]}function Pe(s){var O,u=de,l=u.getChildIdx,d=u.getV,g=u.parse,m=u.getTLV,v=u.getVbyList,b=u.getVbyListEx,C=u.getTLVbyList,A=u.getTLVbyListEx,I=u.getIdxbyList,w=u.getIdxbyListEx,x=u.getVidx,_=u.getInt,S=u.oidname,T=u.hextooidstr,M=it,V=Error;try{O=h.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var R=C(this.hex,0,[0,0]);if("a0"==R.substr(0,2)){var P=C(R,0,[0]),B=_(P,0);if(B<0||2<B)throw new Error("malformed version field");return this.version=B+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return b(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var R=A(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(R)},this.getAlgorithmIdentifierName=function(R){for(var P in O)if(R===O[P])return P;return S(b(R,0,[0],"06"))},this.getIssuer=function(R,P){return this.getX500Name(this.getIssuerHex(),R,P)},this.getIssuerHex=function(){return C(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(R,P){return this.getX500Name(this.getSubjectHex(),R,P)},this.getSubjectHex=function(){return C(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var R=v(this.hex,0,[0,4+this.foffset,0]);return R=R.replace(/(..)/g,"%$1"),decodeURIComponent(R)},this.getNotAfter=function(){var R=v(this.hex,0,[0,4+this.foffset,1]);return R=R.replace(/(..)/g,"%$1"),decodeURIComponent(R)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return C(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var R=this.getSPKI();return null==R?null:v(R,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return I(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var R=this.getPublicKeyIdx();return I(this.hex,R,[1,0],"30")},this.getPublicKey=function(){return et.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var R=C(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(R)},this.getSignatureValueHex=function(){return v(this.hex,0,[2],"03",!0)},this.verifySignature=function(R){var P=this.getSignatureAlgorithmField(),B=this.getSignatureValueHex(),H=C(this.hex,0,[0],"30"),$=new h.crypto.Signature({alg:P});return $.init(R),$.updateHex(H),$.verify(B)},this.parseExt=function(R){var P,B,H;if(void 0===R){if(3!==this.version)return-1;P=I(H=this.hex,0,[0,7,0],"30"),B=l(H,P)}else{H=it(R);var $=I(H,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=d(H,$))return void(this.aExtInfo=new Array);P=I(H,0,[0,3,0,1,0],"30"),B=l(H,P),this.hex=H}this.aExtInfo=new Array;for(var J=0;J<B.length;J++){var j={critical:!1},q=0;3===l(H,B[J]).length&&(j.critical=!0,q=1),j.oid=u.hextooidstr(v(H,B[J],[0],"06"));var Q=I(H,B[J],[1+q]);j.vidx=x(H,Q),this.aExtInfo.push(j)}},this.getExtInfo=function(R){var P=this.aExtInfo,B=R;if(R.match(/^[0-9.]+$/)||(B=h.asn1.x509.OID.name2oid(R)),""!==B)for(var H=0;H<P.length;H++)if(P[H].oid===B)return P[H]},this.getCriticalExtV=function(R,P,B){if(null!=P)return[P,B];var H=this.getExtInfo(R);return null==H?[null,null]:[m(this.hex,H.vidx),H.critical]},this.getExtBasicConstraints=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("basicConstraints");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"basicConstraints"};if(P&&(H.critical=!0),"3000"===R)return H;if("30030101ff"===R)return H.cA=!0,H;if("30060101ff02"===R.substr(0,12)){var $=d(R,10),J=parseInt($,16);return H.cA=!0,H.pathLen=J,H}throw new Error("hExtV parse error: "+R)},this.getExtNameConstraints=function(R,P){var B=this.getCriticalExtV("nameConstraints",R,P);if(P=B[1],null!=(R=B[0])){var H={extname:"nameConstraints"};P&&(H.critical=!0);for(var $=l(R,0),J=0;J<$.length;J++){for(var j=[],z=l(R,$[J]),q=0;q<z.length;q++){var Q=m(R,z[q]),Ce=this.getGeneralSubtree(Q);j.push(Ce)}var ve=R.substr($[J],2);"a0"==ve?H.permit=j:"a1"==ve&&(H.exclude=j)}return H}},this.getGeneralSubtree=function(R){var P=l(R,0),B=P.length;if(B<1||2<B)throw new Error("wrong num elements");for(var H=this.getGeneralName(m(R,P[0])),$=1;$<B;$++){var J=R.substr(P[$],2),j=d(R,P[$]),z=parseInt(j,16);"80"==J&&(H.min=z),"81"==J&&(H.max=z)}return H},this.getExtKeyUsage=function(R,P){var B=this.getCriticalExtV("keyUsage",R,P);if(P=B[1],null!=(R=B[0])){var H={extname:"keyUsage"};return P&&(H.critical=!0),H.names=this.getExtKeyUsageString(R).split(","),H}},this.getExtKeyUsageBin=function(R){if(void 0===R){var P=this.getExtInfo("keyUsage");if(void 0===P)return"";R=m(this.hex,P.vidx)}if(8!=R.length&&10!=R.length)throw new Error("malformed key usage value: "+R);var B="000000000000000"+parseInt(R.substr(6),16).toString(2);return 8==R.length&&(B=B.slice(-8)),10==R.length&&(B=B.slice(-16)),""==(B=B.replace(/0+$/,""))&&(B="0"),B},this.getExtKeyUsageString=function(R){for(var P=this.getExtKeyUsageBin(R),B=new Array,H=0;H<P.length;H++)"1"==P.substr(H,1)&&B.push(Pe.KEYUSAGE_NAME[H]);return B.join(",")},this.getExtSubjectKeyIdentifier=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("subjectKeyIdentifier");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"subjectKeyIdentifier"};P&&(H.critical=!0);var $=d(R,0);return H.kid={hex:$},H},this.getExtAuthorityKeyIdentifier=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("authorityKeyIdentifier");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"authorityKeyIdentifier"};P&&(H.critical=!0);for(var $=l(R,0),J=0;J<$.length;J++){var j=R.substr($[J],2);if("80"===j&&(H.kid={hex:d(R,$[J])}),"a1"===j){var z=m(R,$[J]),q=this.getGeneralNames(z);H.issuer=q[0].dn}"82"===j&&(H.sn={hex:d(R,$[J])})}return H},this.getExtExtKeyUsage=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("extKeyUsage");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"extKeyUsage",array:[]};P&&(H.critical=!0);for(var $=l(R,0),J=0;J<$.length;J++)H.array.push(S(d(R,$[J])));return H},this.getExtExtKeyUsageName=function(){var R=this.getExtInfo("extKeyUsage");if(void 0===R)return R;var P=new Array,B=m(this.hex,R.vidx);if(""===B)return P;for(var H=l(B,0),$=0;$<H.length;$++)P.push(S(d(B,H[$])));return P},this.getExtSubjectAltName=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("subjectAltName");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"subjectAltName",array:[]};return P&&(H.critical=!0),H.array=this.getGeneralNames(R),H},this.getExtIssuerAltName=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("issuerAltName");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"issuerAltName",array:[]};return P&&(H.critical=!0),H.array=this.getGeneralNames(R),H},this.getGeneralNames=function(R){for(var P=l(R,0),B=[],H=0;H<P.length;H++){var $=this.getGeneralName(m(R,P[H]));void 0!==$&&B.push($)}return B},this.getGeneralName=function(R){var P=R.substr(0,2),B=d(R,0),H=an(B);return"81"==P?{rfc822:H}:"82"==P?{dns:H}:"86"==P?{uri:H}:"87"==P?{ip:Dr(B)}:"a4"==P?{dn:this.getX500Name(B)}:"a0"==P?{other:this.getOtherName(R)}:void 0},this.getExtSubjectAltName2=function(){var R,P,B,H=this.getExtInfo("subjectAltName");if(void 0===H)return H;for(var $=new Array,J=m(this.hex,H.vidx),j=l(J,0),z=0;z<j.length;z++)B=J.substr(j[z],2),R=d(J,j[z]),"81"===B&&(P=Xe(R),$.push(["MAIL",P])),"82"===B&&(P=Xe(R),$.push(["DNS",P])),"84"===B&&(P=Pe.hex2dn(R,0),$.push(["DN",P])),"86"===B&&(P=Xe(R),$.push(["URI",P])),"87"===B&&(P=Dr(R),$.push(["IP",P]));return $},this.getExtCRLDistributionPoints=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("cRLDistributionPoints");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"cRLDistributionPoints",array:[]};P&&(H.critical=!0);for(var $=l(R,0),J=0;J<$.length;J++){var j=m(R,$[J]);H.array.push(this.getDistributionPoint(j))}return H},this.getDistributionPoint=function(R){for(var P={},B=l(R,0),H=0;H<B.length;H++){var $=R.substr(B[H],2),J=m(R,B[H]);"a0"==$&&(P.dpname=this.getDistributionPointName(J))}return P},this.getDistributionPointName=function(R){for(var P={},B=l(R,0),H=0;H<B.length;H++){var $=R.substr(B[H],2),J=m(R,B[H]);"a0"==$&&(P.full=this.getGeneralNames(J))}return P},this.getExtCRLDistributionPointsURI=function(){var R=this.getExtCRLDistributionPoints();if(null==R)return R;for(var P=R.array,B=[],H=0;H<P.length;H++)try{null!=P[H].dpname.full[0].uri&&B.push(P[H].dpname.full[0].uri)}catch{}return B},this.getExtAIAInfo=function(){var R=this.getExtInfo("authorityInfoAccess");if(void 0===R)return R;for(var P={ocsp:[],caissuer:[]},B=l(this.hex,R.vidx),H=0;H<B.length;H++){var $=v(this.hex,B[H],[0],"06"),J=v(this.hex,B[H],[1],"86");"2b06010505073001"===$&&P.ocsp.push(Xe(J)),"2b06010505073002"===$&&P.caissuer.push(Xe(J))}return P},this.getExtAuthorityInfoAccess=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("authorityInfoAccess");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"authorityInfoAccess",array:[]};P&&(H.critical=!0);for(var $=l(R,0),J=0;J<$.length;J++){var j=b(R,$[J],[0],"06"),q=Xe(v(R,$[J],[1],"86"));if("2b06010505073001"==j)H.array.push({ocsp:q});else{if("2b06010505073002"!=j)throw new Error("unknown method: "+j);H.array.push({caissuer:q})}}return H},this.getExtCertificatePolicies=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("certificatePolicies");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"certificatePolicies",array:[]};P&&(H.critical=!0);for(var $=l(R,0),J=0;J<$.length;J++){var j=m(R,$[J]),z=this.getPolicyInformation(j);H.array.push(z)}return H},this.getPolicyInformation=function(R){var P={},B=v(R,0,[0],"06");P.policyoid=S(B);var H=w(R,0,[1],"30");if(-1!=H){P.array=[];for(var $=l(R,H),J=0;J<$.length;J++){var j=m(R,$[J]),z=this.getPolicyQualifierInfo(j);P.array.push(z)}}return P},this.getOtherName=function(R){var P={},B=l(R,0),H=v(R,B[0],[],"06"),$=v(R,B[1],[]);return P.oid=S(H),P.value=g($),P},this.getPolicyQualifierInfo=function(R){var P={},B=v(R,0,[0],"06");if("2b06010505070201"===B){var H=b(R,0,[1],"16");P.cps=an(H)}else if("2b06010505070202"===B){var $=C(R,0,[1],"30");P.unotice=this.getUserNotice($)}return P},this.getUserNotice=function(R){for(var P={},B=l(R,0),H=0;H<B.length;H++){var $=m(R,B[H]);"30"!=$.substr(0,2)&&(P.exptext=this.getDisplayText($))}return P},this.getDisplayText=function(R){var B={};return B.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[R.substr(0,2)],B.str=an(d(R,0)),B},this.getExtPolicyMappings=function(R,P){var B=this.getCriticalExtV("policyMappings",R,P);if(P=B[1],null!=(R=B[0])){var H={extname:"policyMappings"};P&&(H.critical=!0);try{for(var J=g(R).seq,j=[],z=0;z<J.length;z++){var q=J[z].seq;j.push([q[0].oid,q[1].oid])}H.array=j}catch{throw new V("malformed policyMappings")}return H}},this.getExtPolicyConstraints=function(R,P){var B=this.getCriticalExtV("policyConstraints",R,P);if(P=B[1],null!=(R=B[0])){var H={extname:"policyConstraints"};P&&(H.critical=!0);var $=g(R);try{for(var J=$.seq,j=0;j<J.length;j++){var z=J[j].tag;0==z.explicit&&("80"==z.tag&&(H.reqexp=parseInt(z.hex,16)),"81"==z.tag&&(H.inhibit=parseInt(z.hex,16)))}}catch{return new V("malformed policyConstraints value")}return H}},this.getExtInhibitAnyPolicy=function(R,P){var B=this.getCriticalExtV("inhibitAnyPolicy",R,P);if(P=B[1],null!=(R=B[0])){var H={extname:"inhibitAnyPolicy"};P&&(H.critical=!0);var $=_(R,0);return-1==$?new V("wrong value"):(H.skip=$,H)}},this.getExtCRLNumber=function(R,P){var B={extname:"cRLNumber"};if(P&&(B.critical=!0),"02"==R.substr(0,2))return B.num={hex:d(R,0)},B;throw new V("hExtV parse error: "+R)},this.getExtCRLReason=function(R,P){var B={extname:"cRLReason"};if(P&&(B.critical=!0),"0a"==R.substr(0,2))return B.code=parseInt(d(R,0),16),B;throw new Error("hExtV parse error: "+R)},this.getExtOcspNonce=function(R,P){var B={extname:"ocspNonce"};P&&(B.critical=!0);var H=d(R,0);return B.hex=H,B},this.getExtOcspNoCheck=function(R,P){var B={extname:"ocspNoCheck"};return P&&(B.critical=!0),B},this.getExtAdobeTimeStamp=function(R,P){if(void 0===R&&void 0===P){var B=this.getExtInfo("adobeTimeStamp");if(void 0===B)return;R=m(this.hex,B.vidx),P=B.critical}var H={extname:"adobeTimeStamp"};P&&(H.critical=!0);var $=l(R,0);if($.length>1){var J=m(R,$[1]),j=this.getGeneralName(J);null!=j.uri&&(H.uri=j.uri)}if($.length>2){var z=m(R,$[2]);"0101ff"==z&&(H.reqauth=!0),"010100"==z&&(H.reqauth=!1)}return H};var k=function(R){var P={};try{var H=h.asn1.x509.OID.name2oid(R.seq[0].oid);P.type=h.asn1.x509.OID.oid2atype(H);var $=R.seq[1];if(null!=$.utf8str)P.ds="utf8",P.value=$.utf8str.str;else if(null!=$.numstr)P.ds="num",P.value=$.numstr.str;else if(null!=$.telstr)P.ds="tel",P.value=$.telstr.str;else if(null!=$.prnstr)P.ds="prn",P.value=$.prnstr.str;else if(null!=$.ia5str)P.ds="ia5",P.value=$.ia5str.str;else if(null!=$.visstr)P.ds="vis",P.value=$.visstr.str;else{if(null==$.bmpstr)throw"error";P.ds="bmp",P.value=$.bmpstr.str}return P}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},X=function(R){try{return R.set.map(function(P){return k(P)})}catch(P){throw new Error("improper ASN.1 parsed RDN: "+P)}};this.getX500NameRule=function(R){for(var j=null,z=[],q=0;q<R.length;q++)for(var Q=R[q],Ce=0;Ce<Q.length;Ce++)z.push(Q[Ce]);for(q=0;q<z.length;q++){var ve=z[q],Ie=ve.ds,Me=ve.type;if("prn"!=Ie&&"utf8"!=Ie&&"ia5"!=Ie)return"mixed";if("ia5"==Ie){if("CN"!=Me)return"mixed";if(h.lang.String.isMail(ve.value))continue;return"mixed"}if("C"==Me){if("prn"==Ie)continue;return"mixed"}if(null==j)j=Ie;else if(j!==Ie)return"mixed"}return j??"prn"},this.getAttrTypeAndValue=function(R){var P=g(R);return k(P)},this.getRDN=function(R){var P=g(R);return X(P)},this.getX500NameArray=function(R){return function(R){try{return R.seq.map(function(P){return X(P)})}catch(P){throw new Error("improper ASN.1 parsed X500Name: "+P)}}(g(R))},this.getX500Name=function(R,P,B){var H=this.getX500NameArray(R),J={str:this.dnarraytostr(H)};return J.array=H,1==B&&(J.hex=R),1==P&&(J.canon=this.c14nRDNArray(H)),J},this.readCertPEM=function(R){this.readCertHex(M(R))},this.readCertHex=function(R){this.hex=R,this.getVersion();try{I(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(R){var P={};return null==R&&(R={}),P.version=this.getVersion(),P.serial={hex:this.getSerialNumberHex()},P.sigalg=this.getSignatureAlgorithmField(),P.issuer=this.getIssuer(R.dncanon,R.dnhex),P.notbefore=this.getNotBefore(),P.notafter=this.getNotAfter(),P.subject=this.getSubject(R.dncanon,R.dnhex),P.sbjpubkey=be(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(P.ext=this.getExtParamArray()),P.sighex=this.getSignatureValueHex(),1==R.tbshex&&(P.tbshex=C(this.hex,0,[0])),1==R.nodnarray&&(delete P.issuer.array,delete P.subject.array),P},this.getExtParamArray=function(R){null==R&&-1!=w(this.hex,0,[0,"[3]"])&&(R=A(this.hex,0,[0,"[3]",0],"30"));for(var B=[],H=l(R,0),$=0;$<H.length;$++){var J=m(R,H[$]),j=this.getExtParam(J);null!=j&&B.push(j)}return B},this.getExtParam=function(R){var H=l(R,0).length;if(2!=H&&3!=H)throw new Error("wrong number elements in Extension: "+H+" "+R);var $=T(v(R,0,[0],"06")),J=!1;3==H&&"0101ff"==C(R,0,[1])&&(J=!0);var j=C(R,0,[H-1,0]),z=void 0;if("2.5.29.14"==$?z=this.getExtSubjectKeyIdentifier(j,J):"2.5.29.15"==$?z=this.getExtKeyUsage(j,J):"2.5.29.17"==$?z=this.getExtSubjectAltName(j,J):"2.5.29.18"==$?z=this.getExtIssuerAltName(j,J):"2.5.29.19"==$?z=this.getExtBasicConstraints(j,J):"2.5.29.30"==$?z=this.getExtNameConstraints(j,J):"2.5.29.31"==$?z=this.getExtCRLDistributionPoints(j,J):"2.5.29.32"==$?z=this.getExtCertificatePolicies(j,J):"2.5.29.33"==$?z=this.getExtPolicyMappings(j,J):"2.5.29.35"==$?z=this.getExtAuthorityKeyIdentifier(j,J):"2.5.29.36"==$?z=this.getExtPolicyConstraints(j,J):"2.5.29.37"==$?z=this.getExtExtKeyUsage(j,J):"2.5.29.54"==$?z=this.getExtInhibitAnyPolicy(j,J):"1.3.6.1.5.5.7.1.1"==$?z=this.getExtAuthorityInfoAccess(j,J):"2.5.29.20"==$?z=this.getExtCRLNumber(j,J):"2.5.29.21"==$?z=this.getExtCRLReason(j,J):"1.3.6.1.5.5.7.48.1.2"==$?z=this.getExtOcspNonce(j,J):"1.3.6.1.5.5.7.48.1.5"==$?z=this.getExtOcspNoCheck(j,J):"1.2.840.113583.1.1.9.1"==$&&(z=this.getExtAdobeTimeStamp(j,J)),null!=z)return z;var q={extname:$,extn:j};return J&&(q.critical=!0),q},this.findExt=function(R,P){for(var B=0;B<R.length;B++)if(R[B].extname==P)return R[B];return null},this.updateExtCDPFullURI=function(R,P){var B=this.findExt(R,"cRLDistributionPoints");if(null!=B&&null!=B.array)for(var H=B.array,$=0;$<H.length;$++)if(null!=H[$].dpname&&null!=H[$].dpname.full)for(var J=H[$].dpname.full,j=0;j<J.length;j++){var z=J[$];null!=z.uri&&(z.uri=P)}},this.updateExtAIAOCSP=function(R,P){var B=this.findExt(R,"authorityInfoAccess");if(null!=B&&null!=B.array)for(var H=B.array,$=0;$<H.length;$++)null!=H[$].ocsp&&(H[$].ocsp=P)},this.updateExtAIACAIssuer=function(R,P){var B=this.findExt(R,"authorityInfoAccess");if(null!=B&&null!=B.array)for(var H=B.array,$=0;$<H.length;$++)null!=H[$].caissuer&&(H[$].caissuer=P)},this.dnarraytostr=function(R){return"/"+R.map(function(H){return function P(H){return H.map(function($){return function B(H){return H.type+"="+H.value}($).replace(/\+/,"\\+")}).join("+")}(H).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(R){var P;if(null!=R.str&&null==R.array){var H=new h.asn1.x509.X500Name({str:R.str}).tohex();P=this.getX500NameArray(H)}else P=R.array;null==R.canon&&(R.canon=this.c14nRDNArray(P))},this.c14nRDNArray=function(R){for(var P=[],B=0;B<R.length;B++){for(var H=R[B],$=[],J=0;J<H.length;J++){var j=H[J],z=j.value;z=(z=(z=(z=z.replace(/^\s*/,"")).replace(/\s*$/,"")).replace(/\s+/g," ")).toLowerCase(),$.push(j.type.toLowerCase()+"="+z)}P.push($.join("+"))}return"/"+P.join("/")},this.getInfo=function(){var J,j,z,R=function(Nn){for(var Ze="",Ut="    ",Se=Nn.array,wn=0;wn<Se.length;wn++){var bt=Se[wn];null!=bt.dn&&(Ze+=Ut+"dn: "+bt.dn.str+"\n"),null!=bt.ip&&(Ze+=Ut+"ip: "+bt.ip+"\n"),null!=bt.rfc822&&(Ze+=Ut+"rfc822: "+bt.rfc822+"\n"),null!=bt.dns&&(Ze+=Ut+"dns: "+bt.dns+"\n"),null!=bt.uri&&(Ze+=Ut+"uri: "+bt.uri+"\n"),null!=bt.other&&(Ze+=Ut+"other: "+bt.other.oid+"="+JSON.stringify(bt.other.value).replace(/\"/g,"")+"\n")}return Ze.replace(/\n$/,"")},P=function(Nn){for(var Ze="",Ut=Nn.array,It=0;It<Ut.length;It++){var Se=Ut[It];if(Ze+="    policy oid: "+Se.policyoid+"\n",void 0!==Se.array)for(var wn=0;wn<Se.array.length;wn++){var bt=Se.array[wn];void 0!==bt.cps&&(Ze+="    cps: "+bt.cps+"\n")}}return Ze},B=function(Nn){for(var Ze="",Ut=Nn.array,It=0;It<Ut.length;It++){var Se=Ut[It];try{void 0!==Se.dpname.full[0].uri&&(Ze+="    "+Se.dpname.full[0].uri+"\n")}catch{}try{void 0!==Se.dname.full[0].dn.hex&&(Ze+="    "+Pe.hex2dn(Se.dpname.full[0].dn.hex)+"\n")}catch{}}return Ze},H=function(Nn){for(var Ze="",Ut=Nn.array,It=0;It<Ut.length;It++){var Se=Ut[It];void 0!==Se.caissuer&&(Ze+="    caissuer: "+Se.caissuer+"\n"),void 0!==Se.ocsp&&(Ze+="    ocsp: "+Se.ocsp+"\n")}return Ze};if(J="Basic Fields\n",J+="  serial number: "+this.getSerialNumberHex()+"\n",J+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",J+="  issuer: "+this.getIssuerString()+"\n",J+="  notBefore: "+this.getNotBefore()+"\n",J+="  notAfter: "+this.getNotAfter()+"\n",J+="  subject: "+this.getSubjectString()+"\n",J+="  subject public key info: \n",J+="    key algorithm: "+(j=this.getPublicKey()).type+"\n","RSA"===j.type&&(J+="    n="+Yr(j.n.toString(16)).substr(0,16)+"...\n",J+="    e="+Yr(j.e.toString(16))+"\n"),null!=(z=this.aExtInfo)){J+="X509v3 Extensions:\n";for(var q=0;q<z.length;q++){var Q=z[q],Ce=h.asn1.x509.OID.oid2name(Q.oid);""===Ce&&(Ce=Q.oid);var ve="";if(!0===Q.critical&&(ve="CRITICAL"),J+="  "+Ce+" "+ve+":\n","basicConstraints"===Ce){var Ie=this.getExtBasicConstraints();void 0===Ie.cA?J+="    {}\n":(J+="    cA=true",void 0!==Ie.pathLen&&(J+=", pathLen="+Ie.pathLen),J+="\n")}else if("policyMappings"==Ce)J+="    "+this.getExtPolicyMappings().array.map(function(Nn){return Nn[0]+":"+Nn[1]}).join(", ")+"\n";else if("policyConstraints"==Ce)J+="    ",null!=(yt=this.getExtPolicyConstraints()).reqexp&&(J+=" reqexp="+yt.reqexp),null!=yt.inhibit&&(J+=" inhibit="+yt.inhibit),J+="\n";else if("inhibitAnyPolicy"==Ce){var yt;J+="    skip="+(yt=this.getExtInhibitAnyPolicy()).skip+"\n"}else if("keyUsage"==Ce)J+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"==Ce)J+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"==Ce){var dt=this.getExtAuthorityKeyIdentifier();void 0!==dt.kid&&(J+="    kid="+dt.kid.hex+"\n")}else"extKeyUsage"==Ce?J+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"==Ce?J+=R(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"==Ce?J+=B(this.getExtCRLDistributionPoints()):"authorityInfoAccess"==Ce?J+=H(this.getExtAuthorityInfoAccess()):"certificatePolicies"==Ce&&(J+=P(this.getExtCertificatePolicies()))}}return(J+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof s&&(-1!=s.indexOf("-----BEGIN")?this.readCertPEM(s):h.lang.String.isHex(s)&&this.readCertHex(s))}et.getKey=function(s,u,l){var R,p=(d=de).getChildIdx,m=d.getVbyList,v=h.crypto,b=v.ECDSA,C=v.DSA,A=Te,I=it,w=et;if(typeof A<"u"&&s instanceof A||typeof b<"u"&&s instanceof b||typeof C<"u"&&s instanceof C)return s;if(void 0!==s.curve&&void 0!==s.xy&&void 0===s.d)return new b({pub:s.xy,curve:s.curve});if(void 0!==s.curve&&void 0!==s.d)return new b({prv:s.d,curve:s.curve});if(void 0===s.kty&&void 0!==s.n&&void 0!==s.e&&void 0===s.d)return(x=new A).setPublic(s.n,s.e),x;if(void 0===s.kty&&void 0!==s.n&&void 0!==s.e&&void 0!==s.d&&void 0!==s.p&&void 0!==s.q&&void 0!==s.dp&&void 0!==s.dq&&void 0!==s.co&&void 0===s.qi)return(x=new A).setPrivateEx(s.n,s.e,s.d,s.p,s.q,s.dp,s.dq,s.co),x;if(void 0===s.kty&&void 0!==s.n&&void 0!==s.e&&void 0!==s.d&&void 0===s.p)return(x=new A).setPrivate(s.n,s.e,s.d),x;if(void 0!==s.p&&void 0!==s.q&&void 0!==s.g&&void 0!==s.y&&void 0===s.x)return(x=new C).setPublic(s.p,s.q,s.g,s.y),x;if(void 0!==s.p&&void 0!==s.q&&void 0!==s.g&&void 0!==s.y&&void 0!==s.x)return(x=new C).setPrivate(s.p,s.q,s.g,s.y,s.x),x;if("RSA"===s.kty&&void 0!==s.n&&void 0!==s.e&&void 0===s.d)return(x=new A).setPublic(ut(s.n),ut(s.e)),x;if("RSA"===s.kty&&void 0!==s.n&&void 0!==s.e&&void 0!==s.d&&void 0!==s.p&&void 0!==s.q&&void 0!==s.dp&&void 0!==s.dq&&void 0!==s.qi)return(x=new A).setPrivateEx(ut(s.n),ut(s.e),ut(s.d),ut(s.p),ut(s.q),ut(s.dp),ut(s.dq),ut(s.qi)),x;if("RSA"===s.kty&&void 0!==s.n&&void 0!==s.e&&void 0!==s.d)return(x=new A).setPrivate(ut(s.n),ut(s.e),ut(s.d)),x;if("EC"===s.kty&&void 0!==s.crv&&void 0!==s.x&&void 0!==s.y&&void 0===s.d){var S=(_=new b({curve:s.crv})).ecparams.keycharlen,T=("0000000000"+ut(s.x)).slice(-S),D=("0000000000"+ut(s.y)).slice(-S);return _.setPublicKeyHex(M="04"+T+D),_}if("EC"===s.kty&&void 0!==s.crv&&void 0!==s.x&&void 0!==s.y&&void 0!==s.d){S=(_=new b({curve:s.crv})).ecparams.keycharlen;var M="04"+(T=("0000000000"+ut(s.x)).slice(-S))+(D=("0000000000"+ut(s.y)).slice(-S)),O=("0000000000"+ut(s.d)).slice(-S);return _.setPublicKeyHex(M),_.setPrivateKeyHex(O),_}if("pkcs5prv"===l){var k,V=s,d=de;if(9===(k=p(V,0)).length)(x=new A).readPKCS5PrvKeyHex(V);else if(6===k.length)(x=new C).readPKCS5PrvKeyHex(V);else{if(!(k.length>2&&"04"===V.substr(k[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(x=new b).readPKCS5PrvKeyHex(V)}return x}if("pkcs8prv"===l)return w.getKeyFromPlainPrivatePKCS8Hex(s);if("pkcs8pub"===l)return w._getKeyFromPublicPKCS8Hex(s);if("x509pub"===l)return Pe.getPublicKeyFromCertHex(s);if(-1!=s.indexOf("-END CERTIFICATE-",0)||-1!=s.indexOf("-END X509 CERTIFICATE-",0)||-1!=s.indexOf("-END TRUSTED CERTIFICATE-",0))return Pe.getPublicKeyFromCertPEM(s);if(-1!=s.indexOf("-END PUBLIC KEY-")){var X=it(s,"PUBLIC KEY");return w._getKeyFromPublicPKCS8Hex(X)}if(-1!=s.indexOf("-END RSA PRIVATE KEY-")&&-1==s.indexOf("4,ENCRYPTED")){var Y=I(s,"RSA PRIVATE KEY");return w.getKey(Y,null,"pkcs5prv")}if(-1!=s.indexOf("-END DSA PRIVATE KEY-")&&-1==s.indexOf("4,ENCRYPTED")){var P=m(R=I(s,"DSA PRIVATE KEY"),0,[1],"02"),B=m(R,0,[2],"02"),H=m(R,0,[3],"02"),$=m(R,0,[4],"02"),J=m(R,0,[5],"02");return(x=new C).setPrivate(new K(P,16),new K(B,16),new K(H,16),new K($,16),new K(J,16)),x}if(-1!=s.indexOf("-END EC PRIVATE KEY-")&&-1==s.indexOf("4,ENCRYPTED"))return Y=I(s,"EC PRIVATE KEY"),w.getKey(Y,null,"pkcs5prv");if(-1!=s.indexOf("-END PRIVATE KEY-"))return w.getKeyFromPlainPrivatePKCS8PEM(s);if(-1!=s.indexOf("-END RSA PRIVATE KEY-")&&-1!=s.indexOf("4,ENCRYPTED")){var j=w.getDecryptedKeyHex(s,u),z=new Te;return z.readPKCS5PrvKeyHex(j),z}if(-1!=s.indexOf("-END EC PRIVATE KEY-")&&-1!=s.indexOf("4,ENCRYPTED")){var _,x=m(R=w.getDecryptedKeyHex(s,u),0,[1],"04"),q=m(R,0,[2,0],"06"),Q=m(R,0,[3,0],"03").substr(2);if(void 0===h.crypto.OID.oidhex2name[q])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+q);return(_=new b({curve:h.crypto.OID.oidhex2name[q]})).setPublicKeyHex(Q),_.setPrivateKeyHex(x),_.isPublic=!1,_}if(-1!=s.indexOf("-END DSA PRIVATE KEY-")&&-1!=s.indexOf("4,ENCRYPTED"))return P=m(R=w.getDecryptedKeyHex(s,u),0,[1],"02"),B=m(R,0,[2],"02"),H=m(R,0,[3],"02"),$=m(R,0,[4],"02"),J=m(R,0,[5],"02"),(x=new C).setPrivate(new K(P,16),new K(B,16),new K(H,16),new K($,16),new K(J,16)),x;if(-1!=s.indexOf("-END ENCRYPTED PRIVATE KEY-"))return w.getKeyFromEncryptedPKCS8PEM(s,u);throw new Error("not supported argument")},et.generateKeypair=function(s,u){if("RSA"==s){var l=u;(d=new Te).generate(l,"10001"),d.isPrivate=!0,d.isPublic=!0;var p=new Te,g=d.n.toString(16),m=d.e.toString(16);return p.setPublic(g,m),p.isPrivate=!1,p.isPublic=!0,(v={}).prvKeyObj=d,v.pubKeyObj=p,v}if("EC"==s){var d,v,b=u,A=new h.crypto.ECDSA({curve:b}).generateKeyPairHex();return(d=new h.crypto.ECDSA({curve:b})).setPublicKeyHex(A.ecpubhex),d.setPrivateKeyHex(A.ecprvhex),d.isPrivate=!0,d.isPublic=!1,(p=new h.crypto.ECDSA({curve:b})).setPublicKeyHex(A.ecpubhex),p.isPrivate=!1,p.isPublic=!0,(v={}).prvKeyObj=d,v.pubKeyObj=p,v}throw new Error("unknown algorithm: "+s)},et.getPEM=function(s,u,l,d,p,g){var v=h.asn1,b=v.DERObjectIdentifier,C=v.DERInteger,A=v.ASN1Util.newObject,x=h.crypto,_=x.DSA,S=x.ECDSA,T=Te;function D(q){return A({seq:[{int:0},{int:{bigint:q.n}},{int:q.e},{int:{bigint:q.d}},{int:{bigint:q.p}},{int:{bigint:q.q}},{int:{bigint:q.dmp1}},{int:{bigint:q.dmq1}},{int:{bigint:q.coeff}}]})}function M(q){return A({seq:[{int:1},{octstr:{hex:q.prvKeyHex}},{tag:["a0",!0,{oid:{name:q.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+q.pubKeyHex}}]}]})}function O(q){return A({seq:[{int:0},{int:{bigint:q.p}},{int:{bigint:q.q}},{int:{bigint:q.g}},{int:{bigint:q.y}},{int:{bigint:q.x}}]})}if((void 0!==T&&s instanceof T||void 0!==_&&s instanceof _||void 0!==S&&s instanceof S)&&1==s.isPublic&&(void 0===u||"PKCS8PUB"==u))return be(k=new(0,v.x509.SubjectPublicKeyInfo)(s).tohex(),"PUBLIC KEY");if("PKCS1PRV"==u&&void 0!==T&&s instanceof T&&(void 0===l||null==l)&&1==s.isPrivate)return be(k=D(s).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==u&&void 0!==S&&s instanceof S&&(void 0===l||null==l)&&1==s.isPrivate){var Y=new b({name:s.curveName}).tohex(),P=M(s).tohex(),B="";return(B+=be(Y,"EC PARAMETERS"))+be(P,"EC PRIVATE KEY")}if("PKCS1PRV"==u&&void 0!==_&&s instanceof _&&(void 0===l||null==l)&&1==s.isPrivate)return be(k=O(s).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==u&&void 0!==T&&s instanceof T&&void 0!==l&&null!=l&&1==s.isPrivate){var k=D(s).tohex();return void 0===d&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",k,l,d,g)}if("PKCS5PRV"==u&&void 0!==S&&s instanceof S&&void 0!==l&&null!=l&&1==s.isPrivate)return k=M(s).tohex(),void 0===d&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",k,l,d,g);if("PKCS5PRV"==u&&void 0!==_&&s instanceof _&&void 0!==l&&null!=l&&1==s.isPrivate)return k=O(s).tohex(),void 0===d&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",k,l,d,g);var H=function(q,Q){var Ce=$(q,Q);return new A({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Ce.pbkdf2Salt}},{int:Ce.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Ce.encryptionSchemeIV}}]}]}]},{octstr:{hex:Ce.ciphertext}}]}).tohex()},$=function(q,Q){var ve=me.lib.WordArray.random(8),$e=me.lib.WordArray.random(8),Me=me.PBKDF2(Q,ve,{keySize:6,iterations:100}),yt=me.enc.Hex.parse(q),dt=me.TripleDES.encrypt(yt,Me,{iv:$e})+"",jt={};return jt.ciphertext=dt,jt.pbkdf2Salt=me.enc.Hex.stringify(ve),jt.pbkdf2Iter=100,jt.encryptionSchemeAlg="DES-EDE3-CBC",jt.encryptionSchemeIV=me.enc.Hex.stringify($e),jt};if("PKCS8PRV"==u&&null!=T&&s instanceof T&&1==s.isPrivate){var j=D(s).tohex();return k=A({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:j}}]}).tohex(),void 0===l||null==l?be(k,"PRIVATE KEY"):be(P=H(k,l),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==u&&void 0!==S&&s instanceof S&&1==s.isPrivate){var z={seq:[{int:1},{octstr:{hex:s.prvKeyHex}}]};return"string"==typeof s.pubKeyHex&&z.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+s.pubKeyHex}}]}),j=new A(z).tohex(),k=A({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:s.curveName}}]},{octstr:{hex:j}}]}).tohex(),void 0===l||null==l?be(k,"PRIVATE KEY"):be(P=H(k,l),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==u&&void 0!==_&&s instanceof _&&1==s.isPrivate)return j=new C({bigint:s.x}).tohex(),k=A({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:s.p}},{int:{bigint:s.q}},{int:{bigint:s.g}}]}]},{octstr:{hex:j}}]}).tohex(),void 0===l||null==l?be(k,"PRIVATE KEY"):be(P=H(k,l),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},et.getKeyFromCSRPEM=function(s){var u=it(s,"CERTIFICATE REQUEST");return et.getKeyFromCSRHex(u)},et.getKeyFromCSRHex=function(s){var u=et.parseCSRHex(s);return et.getKey(u.p8pubkeyhex,null,"pkcs8pub")},et.parseCSRHex=function(s){var l=de.getChildIdx,d=de.getTLV,p={},g=s;if("30"!=g.substr(0,2))throw new Error("malformed CSR(code:001)");var m=l(g,0);if(m.length<1)throw new Error("malformed CSR(code:002)");if("30"!=g.substr(m[0],2))throw new Error("malformed CSR(code:003)");var v=l(g,m[0]);if(v.length<3)throw new Error("malformed CSR(code:004)");return p.p8pubkeyhex=d(g,v[2]),p},et.getKeyID=function(s){var u=et,l=de;"string"==typeof s&&-1!=s.indexOf("BEGIN ")&&(s=u.getKey(s));var d=it(u.getPEM(s)),p=l.getIdxbyList(d,0,[1]),g=l.getV(d,p).substring(2);return h.crypto.Util.hashHex(g,"sha1")},et.getJWK=function(s,u,l,d,p){var g,v,m={},b=h.crypto.Util.hashHex;if("string"==typeof s)g=et.getKey(s),-1!=s.indexOf("CERTIFICATE")&&(v=it(s));else{if("object"!=typeof s)throw new Error("unsupported keyinfo type");s instanceof Pe?(g=s.getPublicKey(),v=s.hex):g=s}if(g instanceof Te&&g.isPrivate)m.kty="RSA",m.n=vt(g.n.toString(16)),m.e=vt(g.e.toString(16)),m.d=vt(g.d.toString(16)),m.p=vt(g.p.toString(16)),m.q=vt(g.q.toString(16)),m.dp=vt(g.dmp1.toString(16)),m.dq=vt(g.dmq1.toString(16)),m.qi=vt(g.coeff.toString(16));else if(g instanceof Te&&g.isPublic)m.kty="RSA",m.n=vt(g.n.toString(16)),m.e=vt(g.e.toString(16));else if(g instanceof h.crypto.ECDSA&&g.isPrivate){if("P-256"!==(C=g.getShortNISTPCurveName())&&"P-384"!==C&&"P-521"!==C)throw new Error("unsupported curve name for JWT: "+C);var A=g.getPublicKeyXYHex();m.kty="EC",m.crv=C,m.x=vt(A.x),m.y=vt(A.y),m.d=vt(g.prvKeyHex)}else if(g instanceof h.crypto.ECDSA&&g.isPublic){var C;if("P-256"!==(C=g.getShortNISTPCurveName())&&"P-384"!==C&&"P-521"!==C)throw new Error("unsupported curve name for JWT: "+C);A=g.getPublicKeyXYHex(),m.kty="EC",m.crv=C,m.x=vt(A.x),m.y=vt(A.y)}if(null==m.kty)throw new Error("unsupported keyinfo");return!g.isPrivate&&1!=u&&(m.kid=h.jws.JWS.getJWKthumbprint(m)),null!=v&&1!=l&&(m.x5c=[Bn(v)]),null!=v&&1!=d&&(m.x5t=ms(Bn(b(v,"sha1")))),null!=v&&1!=p&&(m["x5t#S256"]=ms(Bn(b(v,"sha256")))),m},et.getJWKFromKey=function(s){return et.getJWK(s,!0,!0,!0,!0)},Te.getPosArrayOfChildrenFromHex=function(s){return de.getChildIdx(s,0)},Te.getHexValueArrayOfChildrenFromHex=function(s){var w,l=de.getV,d=l(s,(w=Te.getPosArrayOfChildrenFromHex(s))[0]),p=l(s,w[1]),g=l(s,w[2]),m=l(s,w[3]),v=l(s,w[4]),b=l(s,w[5]),C=l(s,w[6]),A=l(s,w[7]),I=l(s,w[8]);return(w=new Array).push(d,p,g,m,v,b,C,A,I),w},Te.prototype.readPrivateKeyFromPEMString=function(s){var u=it(s),l=Te.getHexValueArrayOfChildrenFromHex(u);this.setPrivateEx(l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},Te.prototype.readPKCS5PrvKeyHex=function(s){var u=Te.getHexValueArrayOfChildrenFromHex(s);this.setPrivateEx(u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8])},Te.prototype.readPKCS8PrvKeyHex=function(s){var u,l,d,p,g,m,v,b,A=de.getVbyListEx;if(!1===de.isASN1HEX(s))throw new Error("not ASN.1 hex string");try{u=A(s,0,[2,0,1],"02"),l=A(s,0,[2,0,2],"02"),d=A(s,0,[2,0,3],"02"),p=A(s,0,[2,0,4],"02"),g=A(s,0,[2,0,5],"02"),m=A(s,0,[2,0,6],"02"),v=A(s,0,[2,0,7],"02"),b=A(s,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(u,l,d,p,g,m,v,b)},Te.prototype.readPKCS5PubKeyHex=function(s){var u=de,l=u.getV;if(!1===u.isASN1HEX(s))throw new Error("keyHex is not ASN.1 hex string");var d=u.getChildIdx(s,0);if(2!==d.length||"02"!==s.substr(d[0],2)||"02"!==s.substr(d[1],2))throw new Error("wrong hex for PKCS#5 public key");var p=l(s,d[0]),g=l(s,d[1]);this.setPublic(p,g)},Te.prototype.readPKCS8PubKeyHex=function(s){var u=de;if(!1===u.isASN1HEX(s))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==u.getTLVbyListEx(s,0,[0,0]))throw new Error("not PKCS8 RSA public key");var l=u.getTLVbyListEx(s,0,[1,0]);this.readPKCS5PubKeyHex(l)},Te.prototype.readCertPubKeyHex=function(s,u){var l,d;(l=new Pe).readCertHex(s),d=l.getPublicKeyHex(),this.readPKCS8PubKeyHex(d)},Te.prototype.sign=function(s,u){var d=function(p){return h.crypto.Util.hashString(p,u)}(s);return this.signWithMessageHash(d,u)},Te.prototype.signWithMessageHash=function(s,u){var d=Ot(h.crypto.Util.getPaddedDigestInfoHex(s,u,this.n.bitLength()),16);return Yd(this.doPrivate(d).toString(16),this.n.bitLength())},Te.prototype.signPSS=function(s,u,l){var p=function(g){return h.crypto.Util.hashHex(g,u)}(jn(s));return void 0===l&&(l=-1),this.signWithMessageHashPSS(p,u,l)},Te.prototype.signWithMessageHashPSS=function(s,u,l){var v,d=an(s),p=d.length,g=this.n.bitLength()-1,m=Math.ceil(g/8),b=function(T){return h.crypto.Util.hashHex(T,u)};if(-1===l||void 0===l)l=p;else if(-2===l)l=m-p-2;else if(l<-2)throw new Error("invalid salt length");if(m<p+l+2)throw new Error("data too long");var C="";l>0&&(C=new Array(l),(new mi).nextBytes(C),C=String.fromCharCode.apply(String,C));var A=an(b(jn("\0\0\0\0\0\0\0\0"+d+C))),I=[];for(v=0;v<m-l-p-2;v+=1)I[v]=0;var w=String.fromCharCode.apply(String,I)+"\x01"+C,x=Pn(A,w.length,b),_=[];for(v=0;v<w.length;v+=1)_[v]=w.charCodeAt(v)^x.charCodeAt(v);for(_[0]&=~(65280>>8*m-g&255),v=0;v<p;v++)_.push(A.charCodeAt(v));return _.push(188),Yd(this.doPrivate(new K(_)).toString(16),this.n.bitLength())},Te.prototype.verify=function(s,u){if(null==(u=u.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var l=Ot(u,16),d=this.n.bitLength();if(l.bitLength()>d)return!1;var g=this.doPublic(l).toString(16);if(g.length+3!=d/4)return!1;var v=Wi(g.replace(/^1f+00/,""));if(0==v.length)return!1;var b=v[0],C=v[1],I=function(w){return h.crypto.Util.hashString(w,b)}(s);return C==I},Te.prototype.verifyWithMessageHash=function(s,u){if(u.length!=Math.ceil(this.n.bitLength()/4))return!1;var l=Ot(u,16);if(l.bitLength()>this.n.bitLength())return 0;var g=Wi(this.doPublic(l).toString(16).replace(/^1f+00/,""));return 0!=g.length&&g[1]==s},Te.prototype.verifyPSS=function(s,u,l,d){var g=function(m){return h.crypto.Util.hashHex(m,l)}(jn(s));return void 0===d&&(d=-1),this.verifyWithMessageHashPSS(g,u,l,d)},Te.prototype.verifyWithMessageHashPSS=function(s,u,l,d){if(u.length!=Math.ceil(this.n.bitLength()/4))return!1;var A,p=new K(u,16),g=function(M){return h.crypto.Util.hashHex(M,l)},m=an(s),v=m.length,b=this.n.bitLength()-1,C=Math.ceil(b/8);if(-1===d||void 0===d)d=v;else if(-2===d)d=C-v-2;else if(d<-2)throw new Error("invalid salt length");if(C<v+d+2)throw new Error("data too long");var I=this.doPublic(p).toByteArray();for(A=0;A<I.length;A+=1)I[A]&=255;for(;I.length<C;)I.unshift(0);if(188!==I[C-1])throw new Error("encoded message does not end in 0xbc");var w=(I=String.fromCharCode.apply(String,I)).substr(0,C-v-1),x=I.substr(w.length,v),_=65280>>8*C-b&255;if(w.charCodeAt(0)&_)throw new Error("bits beyond keysize not zero");var S=Pn(x,w.length,g),T=[];for(A=0;A<w.length;A+=1)T[A]=w.charCodeAt(A)^S.charCodeAt(A);T[0]&=~_;var D=C-v-d-2;for(A=0;A<D;A+=1)if(0!==T[A])throw new Error("leftmost octets not zero");if(1!==T[D])throw new Error("0x01 marker not found");return x===an(g(jn("\0\0\0\0\0\0\0\0"+m+String.fromCharCode.apply(String,T.slice(-d)))))},Te.SALT_LEN_HLEN=-1,Te.SALT_LEN_MAX=-2,Te.SALT_LEN_RECOVER=-2,Pe.hex2dn=function(s,u){void 0===u&&(u=0);var l=new Pe;return de.getTLV(s,u),l.getX500Name(s).str},Pe.hex2rdn=function(s,u){if(void 0===u&&(u=0),"31"!==s.substr(u,2))throw new Error("malformed RDN");for(var l=new Array,d=de.getChildIdx(s,u),p=0;p<d.length;p++)l.push(Pe.hex2attrTypeValue(s,d[p]));return l=l.map(function(g){return g.replace("+","\\+")}),l.join("+")},Pe.hex2attrTypeValue=function(s,u){var l=de,d=l.getV;if(void 0===u&&(u=0),"30"!==s.substr(u,2))throw new Error("malformed attribute type and value");var p=l.getChildIdx(s,u);2!==p.length||s.substr(p[0],2);var g=d(s,p[0]),m=h.asn1.ASN1Util.oidHexToInt(g);return h.asn1.x509.OID.oid2atype(m)+"="+an(d(s,p[1]))},Pe.getPublicKeyFromCertHex=function(s){var u=new Pe;return u.readCertHex(s),u.getPublicKey()},Pe.getPublicKeyFromCertPEM=function(s){var u=new Pe;return u.readCertPEM(s),u.getPublicKey()},Pe.getPublicKeyInfoPropOfCertPEM=function(s){var p,g,l=de.getVbyList,d={algparam:null};return(p=new Pe).readCertPEM(s),g=p.getPublicKeyHex(),d.keyhex=l(g,0,[1],"03").substr(2),d.algoid=l(g,0,[0,0],"06"),"2a8648ce3d0201"===d.algoid&&(d.algparam=l(g,0,[0,1],"06")),d},Pe.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],(typeof h>"u"||!h)&&(h={}),(typeof h.jws>"u"||!h.jws)&&(h.jws={}),h.jws.JWS=function(){var l=h.jws.JWS.isSafeJSONString;this.parseJWS=function(d,p){if(void 0===this.parsedJWS||!p&&void 0===this.parsedJWS.sigvalH){var g=d.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==g)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var m=g[1],v=g[2],b=g[3],C=m+"."+v;if(this.parsedJWS={},this.parsedJWS.headB64U=m,this.parsedJWS.payloadB64U=v,this.parsedJWS.sigvalB64U=b,this.parsedJWS.si=C,!p){var A=ut(b),I=Ot(A,16);this.parsedJWS.sigvalH=A,this.parsedJWS.sigvalBI=I}var w=Rn(m),x=Rn(v);if(this.parsedJWS.headS=w,this.parsedJWS.payloadS=x,!l(w,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+w}}},h.jws.JWS.sign=function(s,u,l,d,p){var S,T,D,v=h.jws.JWS,b=v.readSafeJSONString,C=v.isSafeJSONString,A=h.crypto,w=A.Mac,x=A.Signature,_=JSON;if("string"!=typeof u&&"object"!=typeof u)throw"spHeader must be JSON string or object: "+u;if("object"==typeof u&&(S=_.stringify(T=u)),"string"==typeof u){if(!C(S=u))throw"JWS Head is not safe JSON string: "+S;T=b(S)}if(D=l,"object"==typeof l&&(D=_.stringify(l)),(""==s||null==s)&&void 0!==T.alg&&(s=T.alg),""!=s&&null!=s&&void 0===T.alg&&(T.alg=s,S=_.stringify(T)),s!==T.alg)throw"alg and sHeader.alg doesn't match: "+s+"!="+T.alg;var M=null;if(void 0===v.jwsalg2sigalg[s])throw"unsupported alg name: "+s;M=v.jwsalg2sigalg[s];var k=rt(S)+"."+rt(D),X="";if("Hmac"==M.substr(0,4)){if(void 0===d)throw"mac key shall be specified for HS* alg";var Y=new w({alg:M,prov:"cryptojs",pass:d});Y.updateString(k),X=Y.doFinal()}else if(-1!=M.indexOf("withECDSA")){(R=new x({alg:M})).init(d,p),R.updateString(k);var P=R.sign();X=h.crypto.ECDSA.asn1SigToConcatSig(P)}else if("none"!=M){var R;(R=new x({alg:M})).init(d,p),R.updateString(k),X=R.sign()}return k+"."+vt(X)},h.jws.JWS.verify=function(s,u,l){var I,g=h.jws.JWS,m=g.readSafeJSONString,v=h.crypto,b=v.ECDSA,C=v.Mac,A=v.Signature;if(I=Te,!Js(s))return!1;var w=s.split(".");if(3!==w.length)return!1;var O,S=w[0]+"."+w[1],T=ut(w[2]),D=m(Rn(w[0])),M=null;if(void 0===D.alg)throw"algorithm not specified in header";if(O=(M=D.alg).substr(0,2),null!=l&&"[object Array]"===Object.prototype.toString.call(l)&&l.length>0&&-1==(":"+l.join(":")+":").indexOf(":"+M+":"))throw"algorithm '"+M+"' not accepted in the list";if("none"!=M&&null===u)throw"key shall be specified to verify.";if("string"==typeof u&&-1!=u.indexOf("-----BEGIN ")&&(u=et.getKey(u)),!("RS"!=O&&"PS"!=O||u instanceof I))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==O&&!(u instanceof b))throw"key shall be a ECDSA obj for ES* algs";var k=null;if(void 0===g.jwsalg2sigalg[D.alg])throw"unsupported alg name: "+M;if("none"==(k=g.jwsalg2sigalg[M]))throw"not supported";if("Hmac"==k.substr(0,4)){if(void 0===u)throw"hexadecimal key shall be specified for HMAC";var Y=new C({alg:k,pass:u});return Y.updateString(S),T==Y.doFinal()}if(-1!=k.indexOf("withECDSA")){var P,R=null;try{R=b.concatSigToASN1Sig(T)}catch{return!1}return(P=new A({alg:k})).init(u),P.updateString(S),P.verify(R)}return(P=new A({alg:k})).init(u),P.updateString(S),P.verify(T)},h.jws.JWS.parse=function(s){var p,g,u=s.split("."),l={};if(2!=u.length&&3!=u.length)throw"malformed sJWS: wrong number of '.' splitted elements";return p=u[1],3==u.length&&(g=u[2]),l.headerObj=h.jws.JWS.readSafeJSONString(Rn(u[0])),l.payloadObj=h.jws.JWS.readSafeJSONString(Rn(p)),l.headerPP=JSON.stringify(l.headerObj,null,"  "),l.payloadPP=null==l.payloadObj?Rn(p):JSON.stringify(l.payloadObj,null,"  "),void 0!==g&&(l.sigHex=ut(g)),l},h.jws.JWS.verifyJWT=function(s,u,l){var p=h.jws,g=p.JWS,m=g.readSafeJSONString,v=g.inArray,b=g.includedArray;if(!Js(s))return!1;var C=s.split(".");if(3!=C.length)return!1;var A=C[0],I=C[1],_=(ut(C[2]),m(Rn(A))),S=m(Rn(I));if(void 0===_.alg)return!1;if(void 0===l.alg)throw"acceptField.alg shall be specified";if(!v(_.alg,l.alg)||void 0!==S.iss&&"object"==typeof l.iss&&!v(S.iss,l.iss)||void 0!==S.sub&&"object"==typeof l.sub&&!v(S.sub,l.sub))return!1;if(void 0!==S.aud&&"object"==typeof l.aud)if("string"==typeof S.aud){if(!v(S.aud,l.aud))return!1}else if("object"==typeof S.aud&&!b(S.aud,l.aud))return!1;var T=p.IntDate.getNow();return void 0!==l.verifyAt&&"number"==typeof l.verifyAt&&(T=l.verifyAt),(void 0===l.gracePeriod||"number"!=typeof l.gracePeriod)&&(l.gracePeriod=0),!(void 0!==S.exp&&"number"==typeof S.exp&&S.exp+l.gracePeriod<T||void 0!==S.nbf&&"number"==typeof S.nbf&&T<S.nbf-l.gracePeriod||void 0!==S.iat&&"number"==typeof S.iat&&T<S.iat-l.gracePeriod||void 0!==S.jti&&void 0!==l.jti&&S.jti!==l.jti||!g.verify(s,u,l.alg))},h.jws.JWS.includedArray=function(s,u){var l=h.jws.JWS.inArray;if(null===s||"object"!=typeof s||"number"!=typeof s.length)return!1;for(var d=0;d<s.length;d++)if(!l(s[d],u))return!1;return!0},h.jws.JWS.inArray=function(s,u){if(null===u||"object"!=typeof u||"number"!=typeof u.length)return!1;for(var l=0;l<u.length;l++)if(u[l]==s)return!0;return!1},h.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},h.jws.JWS.isSafeJSONString=function(s,u,l){var d=null;try{return"object"!=typeof(d=ge(s))||d.constructor===Array?0:(u&&(u[l]=d),1)}catch{return 0}},h.jws.JWS.readSafeJSONString=function(s){var u=null;try{return"object"!=typeof(u=ge(s))||u.constructor===Array?null:u}catch{return null}},h.jws.JWS.getEncodedSignatureValueFromJWS=function(s){var u=s.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==u)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return u[1]},h.jws.JWS.getJWKthumbprint=function(s){if("RSA"!==s.kty&&"EC"!==s.kty&&"oct"!==s.kty)throw"unsupported algorithm for JWK Thumprint";var u="{";if("RSA"===s.kty){if("string"!=typeof s.n||"string"!=typeof s.e)throw"wrong n and e value for RSA key";u+='"e":"'+s.e+'",',u+='"kty":"'+s.kty+'",',u+='"n":"'+s.n+'"}'}else if("EC"===s.kty){if("string"!=typeof s.crv||"string"!=typeof s.x||"string"!=typeof s.y)throw"wrong crv, x and y value for EC key";u+='"crv":"'+s.crv+'",',u+='"kty":"'+s.kty+'",',u+='"x":"'+s.x+'",',u+='"y":"'+s.y+'"}'}else if("oct"===s.kty){if("string"!=typeof s.k)throw"wrong k value for oct(symmetric) key";u+='"kty":"'+s.kty+'",',u+='"k":"'+s.k+'"}'}var l=jn(u);return vt(h.crypto.Util.hashHex(l,"sha256"))},h.jws.IntDate={},h.jws.IntDate.get=function(s){var u=h.jws.IntDate,l=u.getNow,d=u.getZulu;if("now"==s)return l();if("now + 1hour"==s)return l()+3600;if("now + 1day"==s)return l()+86400;if("now + 1month"==s)return l()+2592e3;if("now + 1year"==s)return l()+31536e3;if(s.match(/Z$/))return d(s);if(s.match(/^[0-9]+$/))return parseInt(s);throw"unsupported format: "+s},h.jws.IntDate.getZulu=function(s){return vi(s)},h.jws.IntDate.getNow=function(){return~~(new Date/1e3)},h.jws.IntDate.intDate2UTCString=function(s){return new Date(1e3*s).toUTCString()},h.jws.IntDate.intDate2Zulu=function(s){var u=new Date(1e3*s);return("0000"+u.getUTCFullYear()).slice(-4)+("00"+(u.getUTCMonth()+1)).slice(-2)+("00"+u.getUTCDate()).slice(-2)+("00"+u.getUTCHours()).slice(-2)+("00"+u.getUTCMinutes()).slice(-2)+("00"+u.getUTCSeconds()).slice(-2)+"Z"},(typeof h>"u"||!h)&&(h={}),(typeof h.jws>"u"||!h.jws)&&(h.jws={}),h.jws.JWSJS=function(){var l=h.jws.JWS,d=l.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(p){this.init();var g=p.split(".");if(3!=g.length)throw"malformed input JWS";this.aHeader.push(g[0]),this.sPayload=g[1],this.aSignature.push(g[2])},this.addSignature=function(p,g,m,v){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var b=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var A=h.jws.JWS.sign(p,g,this.sPayload,m,v).split(".");this.aHeader.push(A[0]),this.aSignature.push(A[2])}catch(x){throw this.aHeader.length>b&&this.aHeader.pop(),this.aSignature.length>b&&this.aSignature.pop(),"addSignature failed: "+x}},this.verifyAll=function(p){if(this.aHeader.length!==p.length||this.aSignature.length!==p.length)return!1;for(var g=0;g<p.length;g++){var m=p[g];if(2!==m.length)return!1;if(!1===this.verifyNth(g,m[0],m[1]))return!1}return!0},this.verifyNth=function(p,g,m){if(this.aHeader.length<=p||this.aSignature.length<=p)return!1;var C=this.aHeader[p]+"."+this.sPayload+"."+this.aSignature[p],A=!1;try{A=l.verify(C,g,m)}catch{return!1}return A},this.readJWSJS=function(p){if("string"==typeof p){var g=d(p);if(null==g)throw"argument is not safe JSON object string";this.aHeader=g.headers,this.sPayload=g.payload,this.aSignature=g.signatures}else try{if(!(p.headers.length>0))throw"malformed header";if(this.aHeader=p.headers,"string"!=typeof p.payload)throw"malformed signatures";if(this.sPayload=p.payload,!(p.signatures.length>0))throw"malformed signatures";this.aSignature=p.signatures}catch(m){throw"malformed JWS-JS JSON object: "+m}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},ls.KZ=et,ls.fs=h},995:()=>{}},Gr=>{Gr(Gr.s=754)}]);